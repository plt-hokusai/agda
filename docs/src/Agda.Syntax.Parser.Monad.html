<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Syntax.Parser.Monad</span><span>
</span><span id="line-3"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * The parser monad</span></span><span>
</span><span id="line-4"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier">Parser</span></a></span><span>
</span><span id="line-5"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseResult"><span class="hs-identifier">ParseResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier">ParseState</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier">ParseError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseWarning"><span class="hs-identifier">ParseWarning</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier">LexState</span></a></span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier">LayoutContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier">ParseFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Running the parser</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#initState"><span class="hs-identifier">initState</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#defaultParseFlags"><span class="hs-identifier">defaultParseFlags</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parse"><span class="hs-identifier">parse</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parsePosString"><span class="hs-identifier">parsePosString</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseFromSrc"><span class="hs-identifier">parseFromSrc</span></a></span><span>
</span><span id="line-17"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Manipulating the state</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setParsePos"><span class="hs-identifier">setParsePos</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setLastPos"><span class="hs-identifier">setLastPos</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getParseInterval"><span class="hs-identifier">getParseInterval</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setPrevToken"><span class="hs-identifier">setPrevToken</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getParseFlags"><span class="hs-identifier">getParseFlags</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getLexState"><span class="hs-identifier">getLexState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#pushLexState"><span class="hs-identifier">pushLexState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#popLexState"><span class="hs-identifier">popLexState</span></a></span><span>
</span><span id="line-22"></span><span>      </span><span class="annot"><span class="hs-comment">-- ** Layout</span></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#topContext"><span class="hs-identifier">topContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#popContext"><span class="hs-identifier">popContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#pushContext"><span class="hs-identifier">pushContext</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#pushCurrentContext"><span class="hs-identifier">pushCurrentContext</span></a></span><span>
</span><span id="line-25"></span><span>      </span><span class="annot"><span class="hs-comment">-- ** Errors</span></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseWarningName"><span class="hs-identifier">parseWarningName</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier">parseError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseErrorAt"><span class="hs-identifier">parseErrorAt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseError%27"><span class="hs-identifier">parseError'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseErrorRange"><span class="hs-identifier">parseErrorRange</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#lexError"><span class="hs-identifier">lexError</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">displayException</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Data</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Data</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.Warnings.html"><span class="hs-identifier">Agda.Interaction.Options.Warnings</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html"><span class="hs-identifier">Agda.Utils.FileName</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.List.html#tailWithDefault"><span class="hs-identifier">tailWithDefault</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.Strict.html"><span class="hs-identifier">Agda.Utils.Maybe.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strict</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html"><span class="hs-identifier">Agda.Utils.Pretty</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-comment">{--------------------------------------------------------------------------
    The parse monad
 --------------------------------------------------------------------------}</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">-- | The parse monad.</span><span>
</span><span id="line-56"></span><span class="hs-keyword">newtype</span><span> </span><span id="Parser"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-var">Parser</span></a></span></span><span> </span><span id="local-6989586621680630026"><span class="annot"><a href="#local-6989586621680630026"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="P"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#P"><span class="hs-identifier hs-var">P</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="_runP"><span class="annot"><span class="annottext">Parser a -&gt; StateT ParseState (Either ParseError) a
</span><a href="Agda.Syntax.Parser.Monad.html#_runP"><span class="hs-identifier hs-var hs-var">_runP</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680630026"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680630020"><span id="local-6989586621680630022"><span class="annot"><span class="annottext">a -&gt; Parser b -&gt; Parser a
(a -&gt; b) -&gt; Parser a -&gt; Parser b
(forall a b. (a -&gt; b) -&gt; Parser a -&gt; Parser b)
-&gt; (forall a b. a -&gt; Parser b -&gt; Parser a) -&gt; Functor Parser
forall a b. a -&gt; Parser b -&gt; Parser a
forall a b. (a -&gt; b) -&gt; Parser a -&gt; Parser b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; Parser b -&gt; Parser a
$c&lt;$ :: forall a b. a -&gt; Parser b -&gt; Parser a
fmap :: (a -&gt; b) -&gt; Parser a -&gt; Parser b
$cfmap :: forall a b. (a -&gt; b) -&gt; Parser a -&gt; Parser b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680630008"><span id="local-6989586621680630010"><span id="local-6989586621680630012"><span id="local-6989586621680630014"><span id="local-6989586621680630016"><span class="annot"><span class="annottext">Functor Parser
a -&gt; Parser a
Functor Parser
-&gt; (forall a. a -&gt; Parser a)
-&gt; (forall a b. Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; Parser a -&gt; Parser b -&gt; Parser c)
-&gt; (forall a b. Parser a -&gt; Parser b -&gt; Parser b)
-&gt; (forall a b. Parser a -&gt; Parser b -&gt; Parser a)
-&gt; Applicative Parser
Parser a -&gt; Parser b -&gt; Parser b
Parser a -&gt; Parser b -&gt; Parser a
Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b
(a -&gt; b -&gt; c) -&gt; Parser a -&gt; Parser b -&gt; Parser c
forall a. a -&gt; Parser a
forall a b. Parser a -&gt; Parser b -&gt; Parser a
forall a b. Parser a -&gt; Parser b -&gt; Parser b
forall a b. Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b
forall a b c. (a -&gt; b -&gt; c) -&gt; Parser a -&gt; Parser b -&gt; Parser c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: Parser a -&gt; Parser b -&gt; Parser a
$c&lt;* :: forall a b. Parser a -&gt; Parser b -&gt; Parser a
*&gt; :: Parser a -&gt; Parser b -&gt; Parser b
$c*&gt; :: forall a b. Parser a -&gt; Parser b -&gt; Parser b
liftA2 :: (a -&gt; b -&gt; c) -&gt; Parser a -&gt; Parser b -&gt; Parser c
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; Parser a -&gt; Parser b -&gt; Parser c
&lt;*&gt; :: Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b
$c&lt;*&gt; :: forall a b. Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b
pure :: a -&gt; Parser a
$cpure :: forall a. a -&gt; Parser a
$cp1Applicative :: Functor Parser
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680630000"><span id="local-6989586621680630002"><span id="local-6989586621680630004"><span class="annot"><span class="annottext">Applicative Parser
a -&gt; Parser a
Applicative Parser
-&gt; (forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b)
-&gt; (forall a b. Parser a -&gt; Parser b -&gt; Parser b)
-&gt; (forall a. a -&gt; Parser a)
-&gt; Monad Parser
Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
Parser a -&gt; Parser b -&gt; Parser b
forall a. a -&gt; Parser a
forall a b. Parser a -&gt; Parser b -&gt; Parser b
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; Parser a
$creturn :: forall a. a -&gt; Parser a
&gt;&gt; :: Parser a -&gt; Parser b -&gt; Parser b
$c&gt;&gt; :: forall a b. Parser a -&gt; Parser b -&gt; Parser b
&gt;&gt;= :: Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
$c&gt;&gt;= :: forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
$cp1Monad :: Applicative Parser
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680629992"><span id="local-6989586621680629994"><span id="local-6989586621680629996"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680629986"><span id="local-6989586621680629988"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- | The parser state. Contains everything the parser and the lexer could ever</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   need.</span><span>
</span><span id="line-61"></span><span class="hs-keyword">data</span><span> </span><span id="ParseState"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-var">ParseState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PState"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#PState"><span class="hs-identifier hs-var">PState</span></a></span></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="parseSrcFile"><span class="annot"><span class="annottext">ParseState -&gt; SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseSrcFile"><span class="hs-identifier hs-var hs-var">parseSrcFile</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Syntax.Position.html#SrcFile"><span class="hs-identifier hs-type">SrcFile</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsePos"><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parsePos"><span class="hs-identifier hs-var hs-var">parsePos</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span>  </span><span class="hs-comment">-- ^ position at current input location</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parseLastPos"><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseLastPos"><span class="hs-identifier hs-var hs-var">parseLastPos</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span>  </span><span class="hs-comment">-- ^ position of last token</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parseInp"><span class="annot"><span class="annottext">ParseState -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#parseInp"><span class="hs-identifier hs-var hs-var">parseInp</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>                </span><span class="hs-comment">-- ^ the current input</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsePrevChar"><span class="annot"><span class="annottext">ParseState -&gt; Char
</span><a href="Agda.Syntax.Parser.Monad.html#parsePrevChar"><span class="hs-identifier hs-var hs-var">parsePrevChar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>                 </span><span class="hs-comment">-- ^ the character before the input</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsePrevToken"><span class="annot"><span class="annottext">ParseState -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#parsePrevToken"><span class="hs-identifier hs-var hs-var">parsePrevToken</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>                </span><span class="hs-comment">-- ^ the previous token</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parseLayout"><span class="annot"><span class="annottext">ParseState -&gt; [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLayout"><span class="hs-identifier hs-var hs-var">parseLayout</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier hs-type">LayoutContext</span></a></span><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- ^ the stack of layout contexts</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parseLexState"><span class="annot"><span class="annottext">ParseState -&gt; [LexState]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLexState"><span class="hs-identifier hs-var hs-var">parseLexState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span>            </span><span class="hs-comment">-- ^ the state of the lexer</span><span>
</span><span id="line-70"></span><span>                                             </span><span class="hs-comment">--   (states can be nested so we need a stack)</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parseFlags"><span class="annot"><span class="annottext">ParseState -&gt; ParseFlags
</span><a href="Agda.Syntax.Parser.Monad.html#parseFlags"><span class="hs-identifier hs-var hs-var">parseFlags</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span>            </span><span class="hs-comment">-- ^ parametrization of the parser</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680629969"><span id="local-6989586621680629971"><span id="local-6989586621680629973"><span class="annot"><span class="annottext">LexState -&gt; ParseState -&gt; ShowS
[ParseState] -&gt; ShowS
ParseState -&gt; String
(LexState -&gt; ParseState -&gt; ShowS)
-&gt; (ParseState -&gt; String)
-&gt; ([ParseState] -&gt; ShowS)
-&gt; Show ParseState
forall a.
(LexState -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ParseState] -&gt; ShowS
$cshowList :: [ParseState] -&gt; ShowS
show :: ParseState -&gt; String
$cshow :: ParseState -&gt; String
showsPrec :: LexState -&gt; ParseState -&gt; ShowS
$cshowsPrec :: LexState -&gt; ParseState -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">{-| For context sensitive lexing alex provides what is called /start codes/
    in the Alex documentation.  It is really an integer representing the state
    of the lexer, so we call it @LexState@ instead.
-}</span><span>
</span><span id="line-79"></span><span class="hs-keyword">type</span><span> </span><span id="LexState"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-var">LexState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">-- | We need to keep track of the context to do layout. The context</span><span>
</span><span id="line-82"></span><span class="hs-comment">--   specifies the indentation (if any) of a layout block. See</span><span>
</span><span id="line-83"></span><span class="hs-comment">--   &quot;Agda.Syntax.Parser.Layout&quot; for more informaton.</span><span>
</span><span id="line-84"></span><span class="hs-keyword">data</span><span> </span><span id="LayoutContext"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier hs-var">LayoutContext</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoLayout"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#NoLayout"><span class="hs-identifier hs-var">NoLayout</span></a></span></span><span>        </span><span class="hs-comment">-- ^ no layout</span><span>
</span><span id="line-85"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="Layout"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Layout"><span class="hs-identifier hs-var">Layout</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span>    </span><span class="hs-comment">-- ^ layout at specified column</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680629960"><span id="local-6989586621680629962"><span id="local-6989586621680629964"><span class="annot"><span class="annottext">LexState -&gt; LayoutContext -&gt; ShowS
[LayoutContext] -&gt; ShowS
LayoutContext -&gt; String
(LexState -&gt; LayoutContext -&gt; ShowS)
-&gt; (LayoutContext -&gt; String)
-&gt; ([LayoutContext] -&gt; ShowS)
-&gt; Show LayoutContext
forall a.
(LexState -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [LayoutContext] -&gt; ShowS
$cshowList :: [LayoutContext] -&gt; ShowS
show :: LayoutContext -&gt; String
$cshow :: LayoutContext -&gt; String
showsPrec :: LexState -&gt; LayoutContext -&gt; ShowS
$cshowsPrec :: LexState -&gt; LayoutContext -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Parser flags.</span><span>
</span><span id="line-89"></span><span class="hs-keyword">data</span><span> </span><span id="ParseFlags"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-var">ParseFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ParseFlags"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-var">ParseFlags</span></a></span></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="parseKeepComments"><span class="annot"><span class="annottext">ParseFlags -&gt; Bool
</span><a href="Agda.Syntax.Parser.Monad.html#parseKeepComments"><span class="hs-identifier hs-var hs-var">parseKeepComments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-comment">-- ^ Should comment tokens be returned by the lexer?</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680629952"><span id="local-6989586621680629954"><span id="local-6989586621680629956"><span class="annot"><span class="annottext">LexState -&gt; ParseFlags -&gt; ShowS
[ParseFlags] -&gt; ShowS
ParseFlags -&gt; String
(LexState -&gt; ParseFlags -&gt; ShowS)
-&gt; (ParseFlags -&gt; String)
-&gt; ([ParseFlags] -&gt; ShowS)
-&gt; Show ParseFlags
forall a.
(LexState -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ParseFlags] -&gt; ShowS
$cshowList :: [ParseFlags] -&gt; ShowS
show :: ParseFlags -&gt; String
$cshow :: ParseFlags -&gt; String
showsPrec :: LexState -&gt; ParseFlags -&gt; ShowS
$cshowsPrec :: LexState -&gt; ParseFlags -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Parse errors: what you get if parsing fails.</span><span>
</span><span id="line-96"></span><span class="hs-keyword">data</span><span> </span><span id="ParseError"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-comment">-- | Errors that arise at a specific position in the file</span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ParseError"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="errSrcFile"><span class="annot"><span class="annottext">ParseError -&gt; SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#errSrcFile"><span class="hs-identifier hs-var hs-var">errSrcFile</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Syntax.Position.html#SrcFile"><span class="hs-identifier hs-type">SrcFile</span></a></span><span>
</span><span id="line-101"></span><span>                      </span><span class="hs-comment">-- ^ The file in which the error occurred.</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="errPos"><span class="annot"><span class="annottext">ParseError -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#errPos"><span class="hs-identifier hs-var hs-var">errPos</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span>
</span><span id="line-103"></span><span>                      </span><span class="hs-comment">-- ^ Where the error occurred.</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="errInput"><span class="annot"><span class="annottext">ParseError -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#errInput"><span class="hs-identifier hs-var hs-var">errInput</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-105"></span><span>                      </span><span class="hs-comment">-- ^ The remaining input.</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="errPrevToken"><span class="annot"><span class="annottext">ParseError -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#errPrevToken"><span class="hs-identifier hs-var hs-var">errPrevToken</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-107"></span><span>                      </span><span class="hs-comment">-- ^ The previous token.</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="errMsg"><span class="annot"><span class="annottext">ParseError -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#errMsg"><span class="hs-identifier hs-var hs-var">errMsg</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-109"></span><span>                      </span><span class="hs-comment">-- ^ Hopefully an explanation of what happened.</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-comment">-- | Parse errors that concern a range in a file.</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="OverlappingTokensError"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensError"><span class="hs-identifier hs-var">OverlappingTokensError</span></a></span></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="errRange"><span class="annot"><span class="annottext">ParseError -&gt; Range' SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#errRange"><span class="hs-identifier hs-var hs-var">errRange</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Position.html#Range%27"><span class="hs-identifier hs-type">Range'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#SrcFile"><span class="hs-identifier hs-type">SrcFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>                      </span><span class="hs-comment">-- ^ The range of the bigger overlapping token</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-comment">-- | Parse errors that concern a whole file.</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidExtensionError"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#InvalidExtensionError"><span class="hs-identifier hs-var">InvalidExtensionError</span></a></span></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="errPath"><span class="annot"><span class="annottext">ParseError -&gt; AbsolutePath
</span><a href="Agda.Syntax.Parser.Monad.html#errPath"><span class="hs-identifier hs-var hs-var">errPath</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span>
</span><span id="line-121"></span><span>                      </span><span class="hs-comment">-- ^ The file which the error concerns.</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="errValidExts"><span class="annot"><span class="annottext">ParseError -&gt; [String]
</span><a href="Agda.Syntax.Parser.Monad.html#errValidExts"><span class="hs-identifier hs-var hs-var">errValidExts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ReadFileError"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ReadFileError"><span class="hs-identifier hs-var">ReadFileError</span></a></span></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="errPath"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#errPath"><span class="hs-identifier hs-var">errPath</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="errIOError"><span class="annot"><span class="annottext">ParseError -&gt; IOError
</span><a href="Agda.Syntax.Parser.Monad.html#errIOError"><span class="hs-identifier hs-var hs-var">errIOError</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IOError</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680629933"><span id="local-6989586621680629935"><span id="local-6989586621680629937"><span class="annot"><span class="annottext">LexState -&gt; ParseError -&gt; ShowS
[ParseError] -&gt; ShowS
ParseError -&gt; String
(LexState -&gt; ParseError -&gt; ShowS)
-&gt; (ParseError -&gt; String)
-&gt; ([ParseError] -&gt; ShowS)
-&gt; Show ParseError
forall a.
(LexState -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ParseError] -&gt; ShowS
$cshowList :: [ParseError] -&gt; ShowS
show :: ParseError -&gt; String
$cshow :: ParseError -&gt; String
showsPrec :: LexState -&gt; ParseError -&gt; ShowS
$cshowsPrec :: LexState -&gt; ParseError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | Warnings for parsing.</span><span>
</span><span id="line-131"></span><span class="hs-keyword">data</span><span> </span><span id="ParseWarning"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseWarning"><span class="hs-identifier hs-var">ParseWarning</span></a></span></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-comment">-- | Parse errors that concern a range in a file.</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="OverlappingTokensWarning"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensWarning"><span class="hs-identifier hs-var">OverlappingTokensWarning</span></a></span></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="warnRange"><span class="annot"><span class="annottext">ParseWarning -&gt; Range' SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#warnRange"><span class="hs-identifier hs-var hs-var">warnRange</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Position.html#Range%27"><span class="hs-identifier hs-type">Range'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#SrcFile"><span class="hs-identifier hs-type">SrcFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>                      </span><span class="hs-comment">-- ^ The range of the bigger overlapping token</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24cOverlappingTokensWarning"><span id="%24tParseWarning"><span id="local-6989586621680629902"><span id="local-6989586621680629904"><span id="local-6989586621680629906"><span id="local-6989586621680629908"><span id="local-6989586621680629910"><span id="local-6989586621680629912"><span id="local-6989586621680629914"><span id="local-6989586621680629916"><span id="local-6989586621680629918"><span id="local-6989586621680629920"><span id="local-6989586621680629922"><span id="local-6989586621680629924"><span id="local-6989586621680629926"><span id="local-6989586621680629928"><span class="annot"><span class="annottext">Typeable ParseWarning
DataType
Constr
Typeable ParseWarning
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ParseWarning -&gt; c ParseWarning)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ParseWarning)
-&gt; (ParseWarning -&gt; Constr)
-&gt; (ParseWarning -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ParseWarning))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c ParseWarning))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ParseWarning -&gt; ParseWarning)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; [u])
-&gt; (forall u.
    LexState -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning)
-&gt; Data ParseWarning
ParseWarning -&gt; DataType
ParseWarning -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ParseWarning -&gt; ParseWarning
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ParseWarning -&gt; c ParseWarning
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ParseWarning
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. LexState -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
LexState -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ParseWarning
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ParseWarning -&gt; c ParseWarning
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ParseWarning)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ParseWarning)
$cOverlappingTokensWarning :: Constr
$tParseWarning :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ParseWarning -&gt; m ParseWarning
gmapQi :: LexState -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; u
$cgmapQi :: forall u.
LexState -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ParseWarning -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ParseWarning -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ParseWarning -&gt; ParseWarning
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ParseWarning -&gt; ParseWarning
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ParseWarning)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ParseWarning)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ParseWarning)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ParseWarning)
dataTypeOf :: ParseWarning -&gt; DataType
$cdataTypeOf :: ParseWarning -&gt; DataType
toConstr :: ParseWarning -&gt; Constr
$ctoConstr :: ParseWarning -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ParseWarning
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ParseWarning
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ParseWarning -&gt; c ParseWarning
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ParseWarning -&gt; c ParseWarning
$cp1Data :: Typeable ParseWarning
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680629893"><span id="local-6989586621680629895"><span id="local-6989586621680629897"><span class="annot"><span class="annottext">LexState -&gt; ParseWarning -&gt; ShowS
[ParseWarning] -&gt; ShowS
ParseWarning -&gt; String
(LexState -&gt; ParseWarning -&gt; ShowS)
-&gt; (ParseWarning -&gt; String)
-&gt; ([ParseWarning] -&gt; ShowS)
-&gt; Show ParseWarning
forall a.
(LexState -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ParseWarning] -&gt; ShowS
$cshowList :: [ParseWarning] -&gt; ShowS
show :: ParseWarning -&gt; String
$cshow :: ParseWarning -&gt; String
showsPrec :: LexState -&gt; ParseWarning -&gt; ShowS
$cshowsPrec :: LexState -&gt; ParseWarning -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseWarning"><span class="hs-identifier hs-type">ParseWarning</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621680629890"><span class="annot"><span class="annottext">rnf :: ParseWarning -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensWarning"><span class="hs-identifier hs-type">OverlappingTokensWarning</span></a></span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseWarningName"><span class="hs-identifier hs-type">parseWarningName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseWarning"><span class="hs-identifier hs-type">ParseWarning</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.Warnings.html#WarningName"><span class="hs-identifier hs-type">WarningName</span></a></span><span>
</span><span id="line-143"></span><span id="parseWarningName"><span class="annot"><span class="annottext">parseWarningName :: ParseWarning -&gt; WarningName
</span><a href="Agda.Syntax.Parser.Monad.html#parseWarningName"><span class="hs-identifier hs-var hs-var">parseWarningName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-144"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensWarning"><span class="hs-identifier hs-type">OverlappingTokensWarning</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarningName
</span><a href="Agda.Interaction.Options.Warnings.html#OverlappingTokensWarning_"><span class="hs-identifier hs-var">OverlappingTokensWarning_</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-comment">-- | The result of parsing something.</span><span>
</span><span id="line-147"></span><span class="hs-keyword">data</span><span> </span><span id="ParseResult"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseResult"><span class="hs-identifier hs-var">ParseResult</span></a></span></span><span> </span><span id="local-6989586621680630105"><span class="annot"><a href="#local-6989586621680630105"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ParseOk"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseOk"><span class="hs-identifier hs-var">ParseOk</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630105"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ParseFailed"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFailed"><span class="hs-identifier hs-var">ParseFailed</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680629880"><span id="local-6989586621680629882"><span id="local-6989586621680629884"><span class="annot"><span class="annottext">LexState -&gt; ParseResult a -&gt; ShowS
[ParseResult a] -&gt; ShowS
ParseResult a -&gt; String
(LexState -&gt; ParseResult a -&gt; ShowS)
-&gt; (ParseResult a -&gt; String)
-&gt; ([ParseResult a] -&gt; ShowS)
-&gt; Show (ParseResult a)
forall a. Show a =&gt; LexState -&gt; ParseResult a -&gt; ShowS
forall a. Show a =&gt; [ParseResult a] -&gt; ShowS
forall a. Show a =&gt; ParseResult a -&gt; String
forall a.
(LexState -&gt; a -&gt; ShowS)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ParseResult a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [ParseResult a] -&gt; ShowS
show :: ParseResult a -&gt; String
$cshow :: forall a. Show a =&gt; ParseResult a -&gt; String
showsPrec :: LexState -&gt; ParseResult a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; LexState -&gt; ParseResult a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | Old interface to parser.</span><span>
</span><span id="line-153"></span><span id="local-6989586621680630078"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#unP"><span class="hs-identifier hs-type">unP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630078"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseResult"><span class="hs-identifier hs-type">ParseResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630078"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-154"></span><span id="unP"><span class="annot"><span class="annottext">unP :: Parser a -&gt; ParseState -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#unP"><span class="hs-identifier hs-var hs-var">unP</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621680629878"><span class="annot"><span class="annottext">StateT ParseState (Either ParseError) a
</span><a href="#local-6989586621680629878"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680629877"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629877"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StateT ParseState (Either ParseError) a
-&gt; ParseState -&gt; Either ParseError (a, ParseState)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="annot"><span class="annottext">StateT ParseState (Either ParseError) a
</span><a href="#local-6989586621680629878"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629877"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680629875"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621680629875"><span class="hs-identifier hs-var">err</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; ParseResult a
forall a. ParseError -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#ParseFailed"><span class="hs-identifier hs-var">ParseFailed</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621680629875"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680629874"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680629874"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680629873"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629873"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; a -&gt; ParseResult a
forall a. ParseState -&gt; a -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#ParseOk"><span class="hs-identifier hs-var">ParseOk</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629873"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680629874"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- | Throw a parse error at the current position.</span><span>
</span><span id="line-159"></span><span id="local-6989586621680630064"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier hs-type">parseError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630064"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-160"></span><span id="parseError"><span class="annot"><span class="annottext">parseError :: String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier hs-var hs-var">parseError</span></a></span></span><span> </span><span id="local-6989586621680629872"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629872"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621680629871"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629871"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser ParseState
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><span class="annottext">ParseError -&gt; Parser a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; Parser a) -&gt; ParseError -&gt; Parser a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseError :: SrcFile
-&gt; PositionWithoutFile -&gt; String -&gt; String -&gt; String -&gt; ParseError
</span><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">errSrcFile :: SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#errSrcFile"><span class="hs-identifier hs-var">errSrcFile</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseSrcFile"><span class="hs-identifier hs-var hs-var">parseSrcFile</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629871"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errPos :: PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#errPos"><span class="hs-identifier hs-var">errPos</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseLastPos"><span class="hs-identifier hs-var hs-var">parseLastPos</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629871"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errInput :: String
</span><a href="Agda.Syntax.Parser.Monad.html#errInput"><span class="hs-identifier hs-var">errInput</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#parseInp"><span class="hs-identifier hs-var hs-var">parseInp</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629871"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errPrevToken :: String
</span><a href="Agda.Syntax.Parser.Monad.html#errPrevToken"><span class="hs-identifier hs-var">errPrevToken</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; String
</span><a href="Agda.Syntax.Parser.Monad.html#parsePrevToken"><span class="hs-identifier hs-var hs-var">parsePrevToken</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629871"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsg :: String
</span><a href="Agda.Syntax.Parser.Monad.html#errMsg"><span class="hs-identifier hs-var">errMsg</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629872"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">{--------------------------------------------------------------------------
    Instances
 --------------------------------------------------------------------------}</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680629864"><span id="local-6989586621680629866"><span class="annot"><a href="Agda.Utils.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>  </span><span id="local-6989586621680629862"><span class="annot"><span class="annottext">pretty :: ParseError -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span class="hs-special">{</span><span id="local-6989586621680629860"><span class="annot"><span class="annottext">PositionWithoutFile
errPos :: PositionWithoutFile
errPos :: ParseError -&gt; PositionWithoutFile
</span><a href="#local-6989586621680629860"><span class="hs-identifier hs-var hs-var">errPos</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680629859"><span class="annot"><span class="annottext">SrcFile
errSrcFile :: SrcFile
errSrcFile :: ParseError -&gt; SrcFile
</span><a href="#local-6989586621680629859"><span class="hs-identifier hs-var hs-var">errSrcFile</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680629858"><span class="annot"><span class="annottext">String
errMsg :: String
errMsg :: ParseError -&gt; String
</span><a href="#local-6989586621680629858"><span class="hs-identifier hs-var hs-var">errMsg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680629857"><span class="annot"><span class="annottext">String
errPrevToken :: String
errPrevToken :: ParseError -&gt; String
</span><a href="#local-6989586621680629857"><span class="hs-identifier hs-var hs-var">errPrevToken</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680629856"><span class="annot"><span class="annottext">String
errInput :: String
errInput :: ParseError -&gt; String
</span><a href="#local-6989586621680629856"><span class="hs-identifier hs-var hs-var">errInput</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall (t :: * -&gt; *). Foldable t =&gt; t Doc -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Position' SrcFile -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629860"><span class="hs-identifier hs-var">errPos</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">srcFile :: SrcFile
</span><a href="Agda.Syntax.Position.html#srcFile"><span class="hs-identifier hs-var">srcFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcFile
</span><a href="#local-6989586621680629859"><span class="hs-identifier hs-var">errSrcFile</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span>
</span><span id="line-177"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629858"><span class="hs-identifier hs-var">errMsg</span></a></span><span>
</span><span id="line-178"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Doc) -&gt; String -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629857"><span class="hs-identifier hs-var">errPrevToken</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;ERROR&gt;&quot;</span></span><span>
</span><span id="line-179"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Doc) -&gt; String -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LexState -&gt; ShowS
forall a. LexState -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">LexState
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629856"><span class="hs-identifier hs-var">errInput</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...&quot;</span></span><span>
</span><span id="line-180"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensError"><span class="hs-identifier hs-type">OverlappingTokensError</span></a></span><span class="hs-special">{</span><span id="local-6989586621680629849"><span class="annot"><span class="annottext">Range' SrcFile
errRange :: Range' SrcFile
errRange :: ParseError -&gt; Range' SrcFile
</span><a href="#local-6989586621680629849"><span class="hs-identifier hs-var hs-var">errRange</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall (t :: * -&gt; *). Foldable t =&gt; t Doc -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-182"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range' SrcFile -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><a href="#local-6989586621680629849"><span class="hs-identifier hs-var">errRange</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span>
</span><span id="line-183"></span><span>        </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Multi-line comment spans one or more literate text blocks.&quot;</span></span><span>
</span><span id="line-184"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#InvalidExtensionError"><span class="hs-identifier hs-type">InvalidExtensionError</span></a></span><span class="hs-special">{</span><span id="local-6989586621680629848"><span class="annot"><span class="annottext">AbsolutePath
errPath :: AbsolutePath
errPath :: ParseError -&gt; AbsolutePath
</span><a href="#local-6989586621680629848"><span class="hs-identifier hs-var hs-var">errPath</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680629847"><span class="annot"><span class="annottext">[String]
errValidExts :: [String]
errValidExts :: ParseError -&gt; [String]
</span><a href="#local-6989586621680629847"><span class="hs-identifier hs-var hs-var">errValidExts</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall (t :: * -&gt; *). Foldable t =&gt; t Doc -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-186"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AbsolutePath -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">AbsolutePath
</span><a href="#local-6989586621680629848"><span class="hs-identifier hs-var">errPath</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span>
</span><span id="line-187"></span><span>        </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Unsupported extension.&quot;</span></span><span>
</span><span id="line-188"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Supported extensions are:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Doc
forall a. Pretty a =&gt; [a] -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#prettyList_"><span class="hs-identifier hs-var">prettyList_</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621680629847"><span class="hs-identifier hs-var">errValidExts</span></a></span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ReadFileError"><span class="hs-identifier hs-type">ReadFileError</span></a></span><span class="hs-special">{</span><span id="local-6989586621680629845"><span class="annot"><span class="annottext">AbsolutePath
errPath :: AbsolutePath
errPath :: ParseError -&gt; AbsolutePath
</span><a href="#local-6989586621680629845"><span class="hs-identifier hs-var hs-var">errPath</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680629844"><span class="annot"><span class="annottext">IOError
errIOError :: IOError
errIOError :: ParseError -&gt; IOError
</span><a href="#local-6989586621680629844"><span class="hs-identifier hs-var hs-var">errIOError</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall (t :: * -&gt; *). Foldable t =&gt; t Doc -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-191"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Cannot read file&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">AbsolutePath -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">AbsolutePath
</span><a href="#local-6989586621680629845"><span class="hs-identifier hs-var">errPath</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Error:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOError -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">IOError
</span><a href="#local-6989586621680629844"><span class="hs-identifier hs-var">errIOError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#HasRange"><span class="hs-identifier hs-type">HasRange</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>  </span><span id="local-6989586621680629841"><span class="annot"><span class="annottext">getRange :: ParseError -&gt; Range' SrcFile
</span><a href="Agda.Syntax.Position.html#getRange"><span class="hs-identifier hs-var hs-var hs-var hs-var">getRange</span></a></span></span><span> </span><span id="local-6989586621680629839"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621680629839"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621680629839"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span class="hs-special">{</span><span> </span><span id="local-6989586621680629838"><span class="annot"><span class="annottext">SrcFile
errSrcFile :: SrcFile
errSrcFile :: ParseError -&gt; SrcFile
</span><a href="#local-6989586621680629838"><span class="hs-identifier hs-var hs-var">errSrcFile</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errPos :: ParseError -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#errPos"><span class="hs-identifier hs-var">errPos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680629837"><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629837"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcFile
-&gt; PositionWithoutFile -&gt; PositionWithoutFile -&gt; Range' SrcFile
forall a.
a -&gt; PositionWithoutFile -&gt; PositionWithoutFile -&gt; Range' a
</span><a href="Agda.Syntax.Position.html#posToRange%27"><span class="hs-identifier hs-var">posToRange'</span></a></span><span> </span><span class="annot"><span class="annottext">SrcFile
</span><a href="#local-6989586621680629838"><span class="hs-identifier hs-var">errSrcFile</span></a></span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629837"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629837"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensError"><span class="hs-identifier hs-type">OverlappingTokensError</span></a></span><span class="hs-special">{</span><span> </span><span id="local-6989586621680629835"><span class="annot"><span class="annottext">Range' SrcFile
errRange :: Range' SrcFile
errRange :: ParseError -&gt; Range' SrcFile
</span><a href="#local-6989586621680629835"><span class="hs-identifier hs-var hs-var">errRange</span></a></span></span><span> </span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><a href="#local-6989586621680629835"><span class="hs-identifier hs-var">errRange</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#InvalidExtensionError"><span class="hs-identifier hs-type">InvalidExtensionError</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><a href="#local-6989586621680629834"><span class="hs-identifier hs-var">errPathRange</span></a></span><span>
</span><span id="line-200"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ReadFileError"><span class="hs-identifier hs-type">ReadFileError</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><a href="#local-6989586621680629834"><span class="hs-identifier hs-var">errPathRange</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621680629834"><span class="annot"><span class="annottext">errPathRange :: Range' SrcFile
</span><a href="#local-6989586621680629834"><span class="hs-identifier hs-var hs-var">errPathRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position' SrcFile -&gt; Position' SrcFile -&gt; Range' SrcFile
forall a. Position' a -&gt; Position' a -&gt; Range' a
</span><a href="Agda.Syntax.Position.html#posToRange"><span class="hs-identifier hs-var">posToRange</span></a></span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629832"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629832"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-203"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680629832"><span class="annot"><span class="annottext">p :: Position' SrcFile
</span><a href="#local-6989586621680629832"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe AbsolutePath -&gt; Position' SrcFile
</span><a href="Agda.Syntax.Position.html#startPos"><span class="hs-identifier hs-var">startPos</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe AbsolutePath -&gt; Position' SrcFile)
-&gt; Maybe AbsolutePath -&gt; Position' SrcFile
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AbsolutePath -&gt; Maybe AbsolutePath
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(AbsolutePath -&gt; Maybe AbsolutePath)
-&gt; AbsolutePath -&gt; Maybe AbsolutePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; AbsolutePath
</span><a href="Agda.Syntax.Parser.Monad.html#errPath"><span class="hs-identifier hs-var hs-var">errPath</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621680629839"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680629826"><span id="local-6989586621680629828"><span class="annot"><a href="Agda.Utils.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseWarning"><span class="hs-identifier hs-type">ParseWarning</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621680629825"><span class="annot"><span class="annottext">pretty :: ParseWarning -&gt; Doc
</span><a href="#local-6989586621680629825"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensWarning"><span class="hs-identifier hs-type">OverlappingTokensWarning</span></a></span><span class="hs-special">{</span><span id="local-6989586621680629824"><span class="annot"><span class="annottext">Range' SrcFile
warnRange :: Range' SrcFile
warnRange :: ParseWarning -&gt; Range' SrcFile
</span><a href="#local-6989586621680629824"><span class="hs-identifier hs-var hs-var">warnRange</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall (t :: * -&gt; *). Foldable t =&gt; t Doc -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range' SrcFile -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="Agda.Utils.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><a href="#local-6989586621680629824"><span class="hs-identifier hs-var">warnRange</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span>
</span><span id="line-208"></span><span>        </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Multi-line comment spans one or more literate text blocks.&quot;</span></span><span>
</span><span id="line-209"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-210"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#HasRange"><span class="hs-identifier hs-type">HasRange</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseWarning"><span class="hs-identifier hs-type">ParseWarning</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621680629822"><span class="annot"><span class="annottext">getRange :: ParseWarning -&gt; Range' SrcFile
</span><a href="#local-6989586621680629822"><span class="hs-identifier hs-var hs-var hs-var hs-var">getRange</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#OverlappingTokensWarning"><span class="hs-identifier hs-type">OverlappingTokensWarning</span></a></span><span class="hs-special">{</span><span id="local-6989586621680629821"><span class="annot"><span class="annottext">Range' SrcFile
warnRange :: Range' SrcFile
warnRange :: ParseWarning -&gt; Range' SrcFile
</span><a href="#local-6989586621680629821"><span class="hs-identifier hs-var hs-var">warnRange</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range' SrcFile
</span><a href="#local-6989586621680629821"><span class="hs-identifier hs-var">warnRange</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">{--------------------------------------------------------------------------
    Running the parser
 --------------------------------------------------------------------------}</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#initStatePos"><span class="hs-identifier hs-type">initStatePos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span>
</span><span id="line-218"></span><span id="initStatePos"><span class="annot"><span class="annottext">initStatePos :: Position' SrcFile
-&gt; ParseFlags -&gt; String -&gt; [LexState] -&gt; ParseState
</span><a href="Agda.Syntax.Parser.Monad.html#initStatePos"><span class="hs-identifier hs-var hs-var">initStatePos</span></a></span></span><span> </span><span id="local-6989586621680629818"><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629818"><span class="hs-identifier hs-var">pos</span></a></span></span><span> </span><span id="local-6989586621680629817"><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629817"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span id="local-6989586621680629816"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629816"><span class="hs-identifier hs-var">inp</span></a></span></span><span> </span><span id="local-6989586621680629815"><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629815"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-219"></span><span>        </span><span class="annot"><span class="annottext">PState :: SrcFile
-&gt; PositionWithoutFile
-&gt; PositionWithoutFile
-&gt; String
-&gt; Char
-&gt; String
-&gt; [LayoutContext]
-&gt; [LexState]
-&gt; ParseFlags
-&gt; ParseState
</span><a href="Agda.Syntax.Parser.Monad.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parseSrcFile :: SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseSrcFile"><span class="hs-identifier hs-var">parseSrcFile</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position' SrcFile -&gt; SrcFile
forall a. Position' a -&gt; a
</span><a href="Agda.Syntax.Position.html#srcFile"><span class="hs-identifier hs-var hs-var">srcFile</span></a></span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629818"><span class="hs-identifier hs-var">pos</span></a></span><span>
</span><span id="line-220"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsePos :: PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parsePos"><span class="hs-identifier hs-var">parsePos</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629814"><span class="hs-identifier hs-var">pos'</span></a></span><span>
</span><span id="line-221"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parseLastPos :: PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseLastPos"><span class="hs-identifier hs-var">parseLastPos</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629814"><span class="hs-identifier hs-var">pos'</span></a></span><span>
</span><span id="line-222"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parseInp :: String
</span><a href="Agda.Syntax.Parser.Monad.html#parseInp"><span class="hs-identifier hs-var">parseInp</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629816"><span class="hs-identifier hs-var">inp</span></a></span><span>
</span><span id="line-223"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsePrevChar :: Char
</span><a href="Agda.Syntax.Parser.Monad.html#parsePrevChar"><span class="hs-identifier hs-var">parsePrevChar</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span>
</span><span id="line-224"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsePrevToken :: String
</span><a href="Agda.Syntax.Parser.Monad.html#parsePrevToken"><span class="hs-identifier hs-var">parsePrevToken</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-225"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parseLexState :: [LexState]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLexState"><span class="hs-identifier hs-var">parseLexState</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629815"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-226"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parseLayout :: [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLayout"><span class="hs-identifier hs-var">parseLayout</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LayoutContext
</span><a href="Agda.Syntax.Parser.Monad.html#NoLayout"><span class="hs-identifier hs-var">NoLayout</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-227"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parseFlags :: ParseFlags
</span><a href="Agda.Syntax.Parser.Monad.html#parseFlags"><span class="hs-identifier hs-var">parseFlags</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629817"><span class="hs-identifier hs-var">flags</span></a></span><span>
</span><span id="line-228"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621680629814"><span class="annot"><span class="annottext">pos' :: PositionWithoutFile
</span><a href="#local-6989586621680629814"><span class="hs-identifier hs-var hs-var">pos'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629818"><span class="hs-identifier hs-var">pos</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">srcFile :: ()
</span><a href="Agda.Syntax.Position.html#srcFile"><span class="hs-identifier hs-var">srcFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- | Constructs the initial state of the parser. The string argument</span><span>
</span><span id="line-233"></span><span class="hs-comment">--   is the input string, the file path is only there because it's part</span><span>
</span><span id="line-234"></span><span class="hs-comment">--   of a position.</span><span>
</span><span id="line-235"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#initState"><span class="hs-identifier hs-type">initState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-236"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span>
</span><span id="line-237"></span><span id="initState"><span class="annot"><span class="annottext">initState :: Maybe AbsolutePath
-&gt; ParseFlags -&gt; String -&gt; [LexState] -&gt; ParseState
</span><a href="Agda.Syntax.Parser.Monad.html#initState"><span class="hs-identifier hs-var hs-var">initState</span></a></span></span><span> </span><span id="local-6989586621680629813"><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621680629813"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
-&gt; ParseFlags -&gt; String -&gt; [LexState] -&gt; ParseState
</span><a href="Agda.Syntax.Parser.Monad.html#initStatePos"><span class="hs-identifier hs-var">initStatePos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe AbsolutePath -&gt; Position' SrcFile
</span><a href="Agda.Syntax.Position.html#startPos"><span class="hs-identifier hs-var">startPos</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621680629813"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | The default flags.</span><span>
</span><span id="line-240"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#defaultParseFlags"><span class="hs-identifier hs-type">defaultParseFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span>
</span><span id="line-241"></span><span id="defaultParseFlags"><span class="annot"><span class="annottext">defaultParseFlags :: ParseFlags
</span><a href="Agda.Syntax.Parser.Monad.html#defaultParseFlags"><span class="hs-identifier hs-var hs-var">defaultParseFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseFlags :: Bool -&gt; ParseFlags
</span><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parseKeepComments :: Bool
</span><a href="Agda.Syntax.Parser.Monad.html#parseKeepComments"><span class="hs-identifier hs-var">parseKeepComments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- | The most general way of parsing a string. The &quot;Agda.Syntax.Parser&quot; will define</span><span>
</span><span id="line-244"></span><span class="hs-comment">--   more specialised functions that supply the 'ParseFlags' and the</span><span>
</span><span id="line-245"></span><span class="hs-comment">--   'LexState'.</span><span>
</span><span id="line-246"></span><span id="local-6989586621680629812"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parse"><span class="hs-identifier hs-type">parse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629812"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseResult"><span class="hs-identifier hs-type">ParseResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629812"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-247"></span><span id="parse"><span class="annot"><span class="annottext">parse :: ParseFlags -&gt; [LexState] -&gt; Parser a -&gt; String -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#parse"><span class="hs-identifier hs-var hs-var">parse</span></a></span></span><span> </span><span id="local-6989586621680629811"><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629811"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span id="local-6989586621680629810"><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629810"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621680629809"><span class="annot"><span class="annottext">Parser a
</span><a href="#local-6989586621680629809"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680629808"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629808"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseFlags
-&gt; [LexState] -&gt; Parser a -&gt; SrcFile -&gt; String -&gt; ParseResult a
forall a.
ParseFlags
-&gt; [LexState] -&gt; Parser a -&gt; SrcFile -&gt; String -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#parseFromSrc"><span class="hs-identifier hs-var">parseFromSrc</span></a></span><span> </span><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629811"><span class="hs-identifier hs-var">flags</span></a></span><span> </span><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629810"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Parser a
</span><a href="#local-6989586621680629809"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">SrcFile
forall a. Maybe a
</span><span class="hs-identifier hs-var">Strict.Nothing</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629808"><span class="hs-identifier hs-var">input</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- | The even more general way of parsing a string.</span><span>
</span><span id="line-250"></span><span id="local-6989586621680629806"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parsePosString"><span class="hs-identifier hs-type">parsePosString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629806"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>                  </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseResult"><span class="hs-identifier hs-type">ParseResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629806"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-252"></span><span id="parsePosString"><span class="annot"><span class="annottext">parsePosString :: Position' SrcFile
-&gt; ParseFlags -&gt; [LexState] -&gt; Parser a -&gt; String -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#parsePosString"><span class="hs-identifier hs-var hs-var">parsePosString</span></a></span></span><span> </span><span id="local-6989586621680629805"><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629805"><span class="hs-identifier hs-var">pos</span></a></span></span><span> </span><span id="local-6989586621680629804"><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629804"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span id="local-6989586621680629803"><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629803"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621680629802"><span class="annot"><span class="annottext">Parser a
</span><a href="#local-6989586621680629802"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680629801"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629801"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser a -&gt; ParseState -&gt; ParseResult a
forall a. Parser a -&gt; ParseState -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#unP"><span class="hs-identifier hs-var">unP</span></a></span><span> </span><span class="annot"><span class="annottext">Parser a
</span><a href="#local-6989586621680629802"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Position' SrcFile
-&gt; ParseFlags -&gt; String -&gt; [LexState] -&gt; ParseState
</span><a href="Agda.Syntax.Parser.Monad.html#initStatePos"><span class="hs-identifier hs-var">initStatePos</span></a></span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
</span><a href="#local-6989586621680629805"><span class="hs-identifier hs-var">pos</span></a></span><span> </span><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629804"><span class="hs-identifier hs-var">flags</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629801"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629803"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Parses a string as if it were the contents of the given file</span><span>
</span><span id="line-255"></span><span class="hs-comment">--   Useful for integrating preprocessors.</span><span>
</span><span id="line-256"></span><span id="local-6989586621680630082"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseFromSrc"><span class="hs-identifier hs-type">parseFromSrc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630082"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#SrcFile"><span class="hs-identifier hs-type">SrcFile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-257"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseResult"><span class="hs-identifier hs-type">ParseResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630082"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-258"></span><span id="parseFromSrc"><span class="annot"><span class="annottext">parseFromSrc :: ParseFlags
-&gt; [LexState] -&gt; Parser a -&gt; SrcFile -&gt; String -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#parseFromSrc"><span class="hs-identifier hs-var hs-var">parseFromSrc</span></a></span></span><span> </span><span id="local-6989586621680629800"><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629800"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span id="local-6989586621680629799"><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629799"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621680629798"><span class="annot"><span class="annottext">Parser a
</span><a href="#local-6989586621680629798"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680629797"><span class="annot"><span class="annottext">SrcFile
</span><a href="#local-6989586621680629797"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621680629796"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629796"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser a -&gt; ParseState -&gt; ParseResult a
forall a. Parser a -&gt; ParseState -&gt; ParseResult a
</span><a href="Agda.Syntax.Parser.Monad.html#unP"><span class="hs-identifier hs-var">unP</span></a></span><span> </span><span class="annot"><span class="annottext">Parser a
</span><a href="#local-6989586621680629798"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe AbsolutePath
-&gt; ParseFlags -&gt; String -&gt; [LexState] -&gt; ParseState
</span><a href="Agda.Syntax.Parser.Monad.html#initState"><span class="hs-identifier hs-var">initState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcFile -&gt; Maybe AbsolutePath
forall a. Maybe a -&gt; Maybe a
</span><a href="Agda.Utils.Maybe.Strict.html#toLazy"><span class="hs-identifier hs-var">Strict.toLazy</span></a></span><span> </span><span class="annot"><span class="annottext">SrcFile
</span><a href="#local-6989586621680629797"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ParseFlags
</span><a href="#local-6989586621680629800"><span class="hs-identifier hs-var">flags</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629796"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">[LexState]
</span><a href="#local-6989586621680629799"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">{--------------------------------------------------------------------------
    Manipulating the state
 --------------------------------------------------------------------------}</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setParsePos"><span class="hs-identifier hs-type">setParsePos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span id="setParsePos"><span class="annot"><span class="annottext">setParsePos :: PositionWithoutFile -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setParsePos"><span class="hs-identifier hs-var hs-var">setParsePos</span></a></span></span><span> </span><span id="local-6989586621680629794"><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629794"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; ParseState) -&gt; Parser ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((ParseState -&gt; ParseState) -&gt; Parser ())
-&gt; (ParseState -&gt; ParseState) -&gt; Parser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680629792"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629792"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629792"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parsePos :: PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parsePos"><span class="hs-identifier hs-var">parsePos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629794"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setLastPos"><span class="hs-identifier hs-type">setLastPos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span id="setLastPos"><span class="annot"><span class="annottext">setLastPos :: PositionWithoutFile -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setLastPos"><span class="hs-identifier hs-var hs-var">setLastPos</span></a></span></span><span> </span><span id="local-6989586621680629791"><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629791"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; ParseState) -&gt; Parser ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((ParseState -&gt; ParseState) -&gt; Parser ())
-&gt; (ParseState -&gt; ParseState) -&gt; Parser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680629790"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629790"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629790"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parseLastPos :: PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseLastPos"><span class="hs-identifier hs-var">parseLastPos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629791"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setPrevToken"><span class="hs-identifier hs-type">setPrevToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span id="setPrevToken"><span class="annot"><span class="annottext">setPrevToken :: String -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setPrevToken"><span class="hs-identifier hs-var hs-var">setPrevToken</span></a></span></span><span> </span><span id="local-6989586621680629789"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629789"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; ParseState) -&gt; Parser ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((ParseState -&gt; ParseState) -&gt; Parser ())
-&gt; (ParseState -&gt; ParseState) -&gt; Parser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680629788"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629788"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629788"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parsePrevToken :: String
</span><a href="Agda.Syntax.Parser.Monad.html#parsePrevToken"><span class="hs-identifier hs-var">parsePrevToken</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629789"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getLastPos"><span class="hs-identifier hs-type">getLastPos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span>
</span><span id="line-275"></span><span id="getLastPos"><span class="annot"><span class="annottext">getLastPos :: Parser PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#getLastPos"><span class="hs-identifier hs-var hs-var">getLastPos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; PositionWithoutFile) -&gt; Parser PositionWithoutFile
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseLastPos"><span class="hs-identifier hs-var hs-var">parseLastPos</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | The parse interval is between the last position and the current position.</span><span>
</span><span id="line-278"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getParseInterval"><span class="hs-identifier hs-type">getParseInterval</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Interval"><span class="hs-identifier hs-type">Interval</span></a></span><span>
</span><span id="line-279"></span><span id="getParseInterval"><span class="annot"><span class="annottext">getParseInterval :: Parser Interval
</span><a href="Agda.Syntax.Parser.Monad.html#getParseInterval"><span class="hs-identifier hs-var hs-var">getParseInterval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621680629785"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629785"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser ParseState
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><span class="annottext">Interval -&gt; Parser Interval
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Interval -&gt; Parser Interval) -&gt; Interval -&gt; Parser Interval
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcFile -&gt; PositionWithoutFile -&gt; PositionWithoutFile -&gt; Interval
forall a.
a -&gt; PositionWithoutFile -&gt; PositionWithoutFile -&gt; Interval' a
</span><a href="Agda.Syntax.Position.html#posToInterval"><span class="hs-identifier hs-var">posToInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseState -&gt; SrcFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseSrcFile"><span class="hs-identifier hs-var hs-var">parseSrcFile</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629785"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parseLastPos"><span class="hs-identifier hs-var hs-var">parseLastPos</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629785"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parsePos"><span class="hs-identifier hs-var hs-var">parsePos</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629785"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getLexState"><span class="hs-identifier hs-type">getLexState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-284"></span><span id="getLexState"><span class="annot"><span class="annottext">getLexState :: Parser [LexState]
</span><a href="Agda.Syntax.Parser.Monad.html#getLexState"><span class="hs-identifier hs-var hs-var">getLexState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; [LexState]) -&gt; Parser [LexState]
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; [LexState]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLexState"><span class="hs-identifier hs-var hs-var">parseLexState</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-comment">-- UNUSED Liang-Ting Chen 2019-07-16</span><span>
</span><span id="line-287"></span><span class="hs-comment">--setLexState :: [LexState] -&gt; Parser ()</span><span>
</span><span id="line-288"></span><span class="hs-comment">--setLexState ls = modify $ \ s -&gt; s { parseLexState = ls }</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#modifyLexState"><span class="hs-identifier hs-type">modifyLexState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span id="modifyLexState"><span class="annot"><span class="annottext">modifyLexState :: ([LexState] -&gt; [LexState]) -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#modifyLexState"><span class="hs-identifier hs-var hs-var">modifyLexState</span></a></span></span><span> </span><span id="local-6989586621680629782"><span class="annot"><span class="annottext">[LexState] -&gt; [LexState]
</span><a href="#local-6989586621680629782"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; ParseState) -&gt; Parser ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((ParseState -&gt; ParseState) -&gt; Parser ())
-&gt; (ParseState -&gt; ParseState) -&gt; Parser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680629781"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629781"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629781"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parseLexState :: [LexState]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLexState"><span class="hs-identifier hs-var">parseLexState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LexState] -&gt; [LexState]
</span><a href="#local-6989586621680629782"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseState -&gt; [LexState]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLexState"><span class="hs-identifier hs-var hs-var">parseLexState</span></a></span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629781"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#pushLexState"><span class="hs-identifier hs-type">pushLexState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LexState"><span class="hs-identifier hs-type">LexState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span id="pushLexState"><span class="annot"><span class="annottext">pushLexState :: LexState -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#pushLexState"><span class="hs-identifier hs-var hs-var">pushLexState</span></a></span></span><span> </span><span id="local-6989586621680629780"><span class="annot"><span class="annottext">LexState
</span><a href="#local-6989586621680629780"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([LexState] -&gt; [LexState]) -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#modifyLexState"><span class="hs-identifier hs-var">modifyLexState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LexState
</span><a href="#local-6989586621680629780"><span class="hs-identifier hs-var">l</span></a></span><span class="annot"><span class="annottext">LexState -&gt; [LexState] -&gt; [LexState]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#popLexState"><span class="hs-identifier hs-type">popLexState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span id="popLexState"><span class="annot"><span class="annottext">popLexState :: Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#popLexState"><span class="hs-identifier hs-var hs-var">popLexState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([LexState] -&gt; [LexState]) -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#modifyLexState"><span class="hs-identifier hs-var">modifyLexState</span></a></span><span> </span><span class="annot"><span class="annottext">(([LexState] -&gt; [LexState]) -&gt; Parser ())
-&gt; ([LexState] -&gt; [LexState]) -&gt; Parser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[LexState] -&gt; [LexState] -&gt; [LexState]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.List.html#tailWithDefault"><span class="hs-identifier hs-var">tailWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">[LexState]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getParseFlags"><span class="hs-identifier hs-type">getParseFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a></span><span>
</span><span id="line-300"></span><span id="getParseFlags"><span class="annot"><span class="annottext">getParseFlags :: Parser ParseFlags
</span><a href="Agda.Syntax.Parser.Monad.html#getParseFlags"><span class="hs-identifier hs-var hs-var">getParseFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; ParseFlags) -&gt; Parser ParseFlags
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; ParseFlags
</span><a href="Agda.Syntax.Parser.Monad.html#parseFlags"><span class="hs-identifier hs-var hs-var">parseFlags</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-comment">-- | Fake a parse error at the specified position. Used, for instance, when</span><span>
</span><span id="line-304"></span><span class="hs-comment">--   lexing nested comments, which when failing will always fail at the end</span><span>
</span><span id="line-305"></span><span class="hs-comment">--   of the file. A more informative position is the beginning of the failing</span><span>
</span><span id="line-306"></span><span class="hs-comment">--   comment.</span><span>
</span><span id="line-307"></span><span id="local-6989586621680630060"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseErrorAt"><span class="hs-identifier hs-type">parseErrorAt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630060"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-308"></span><span id="parseErrorAt"><span class="annot"><span class="annottext">parseErrorAt :: PositionWithoutFile -&gt; String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseErrorAt"><span class="hs-identifier hs-var hs-var">parseErrorAt</span></a></span></span><span> </span><span id="local-6989586621680629778"><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629778"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680629777"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629777"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="annot"><span class="annottext">PositionWithoutFile -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setLastPos"><span class="hs-identifier hs-var">setLastPos</span></a></span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629778"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-310"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Parser a
forall a. String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629777"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">-- | Use 'parseErrorAt' or 'parseError' as appropriate.</span><span>
</span><span id="line-313"></span><span id="local-6989586621680630057"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseError%27"><span class="hs-identifier hs-type">parseError'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#PositionWithoutFile"><span class="hs-identifier hs-type">PositionWithoutFile</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680630057"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-314"></span><span id="parseError%27"><span class="annot"><span class="annottext">parseError' :: Maybe PositionWithoutFile -&gt; String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError%27"><span class="hs-identifier hs-var hs-var">parseError'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser a)
-&gt; (PositionWithoutFile -&gt; String -&gt; Parser a)
-&gt; Maybe PositionWithoutFile
-&gt; String
-&gt; Parser a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser a
forall a. String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile -&gt; String -&gt; Parser a
forall a. PositionWithoutFile -&gt; String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseErrorAt"><span class="hs-identifier hs-var">parseErrorAt</span></a></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="hs-comment">-- | Report a parse error at the beginning of the given 'Range'.</span><span>
</span><span id="line-317"></span><span id="local-6989586621680629774"><span id="local-6989586621680629775"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#parseErrorRange"><span class="hs-identifier hs-type">parseErrorRange</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#HasRange"><span class="hs-identifier hs-type">HasRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629775"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680629775"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629774"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-318"></span><span id="parseErrorRange"><span class="annot"><span class="annottext">parseErrorRange :: r -&gt; String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseErrorRange"><span class="hs-identifier hs-var hs-var">parseErrorRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe PositionWithoutFile -&gt; String -&gt; Parser a
forall a. Maybe PositionWithoutFile -&gt; String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError%27"><span class="hs-identifier hs-var">parseError'</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe PositionWithoutFile -&gt; String -&gt; Parser a)
-&gt; (r -&gt; Maybe PositionWithoutFile) -&gt; r -&gt; String -&gt; Parser a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Range' SrcFile -&gt; Maybe PositionWithoutFile
forall a. Range' a -&gt; Maybe PositionWithoutFile
</span><a href="Agda.Syntax.Position.html#rStart%27"><span class="hs-identifier hs-var">rStart'</span></a></span><span> </span><span class="annot"><span class="annottext">(Range' SrcFile -&gt; Maybe PositionWithoutFile)
-&gt; (r -&gt; Range' SrcFile) -&gt; r -&gt; Maybe PositionWithoutFile
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; Range' SrcFile
forall a. HasRange a =&gt; a -&gt; Range' SrcFile
</span><a href="Agda.Syntax.Position.html#getRange"><span class="hs-identifier hs-var">getRange</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | For lexical errors we want to report the current position as the site of</span><span>
</span><span id="line-322"></span><span class="hs-comment">--   the error, whereas for parse errors the previous position is the one</span><span>
</span><span id="line-323"></span><span class="hs-comment">--   we're interested in (since this will be the position of the token we just</span><span>
</span><span id="line-324"></span><span class="hs-comment">--   lexed). This function does 'parseErrorAt' the current position.</span><span>
</span><span id="line-325"></span><span id="local-6989586621680629771"><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#lexError"><span class="hs-identifier hs-type">lexError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680629771"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-326"></span><span id="lexError"><span class="annot"><span class="annottext">lexError :: String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#lexError"><span class="hs-identifier hs-var hs-var">lexError</span></a></span></span><span> </span><span id="local-6989586621680629770"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629770"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621680629769"><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629769"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; PositionWithoutFile) -&gt; Parser PositionWithoutFile
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#parsePos"><span class="hs-identifier hs-var hs-var">parsePos</span></a></span><span>
</span><span id="line-328"></span><span>        </span><span class="annot"><span class="annottext">PositionWithoutFile -&gt; String -&gt; Parser a
forall a. PositionWithoutFile -&gt; String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseErrorAt"><span class="hs-identifier hs-var">parseErrorAt</span></a></span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629769"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680629770"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">{--------------------------------------------------------------------------
    Layout
 --------------------------------------------------------------------------}</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#getContext"><span class="hs-identifier hs-type">getContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier hs-type">LayoutContext</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-335"></span><span id="getContext"><span class="annot"><span class="annottext">getContext :: Parser [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#getContext"><span class="hs-identifier hs-var hs-var">getContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; [LayoutContext]) -&gt; Parser [LayoutContext]
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ParseState -&gt; [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLayout"><span class="hs-identifier hs-var hs-var">parseLayout</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#setContext"><span class="hs-identifier hs-type">setContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier hs-type">LayoutContext</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span id="setContext"><span class="annot"><span class="annottext">setContext :: [LayoutContext] -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setContext"><span class="hs-identifier hs-var hs-var">setContext</span></a></span></span><span> </span><span id="local-6989586621680629766"><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629766"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseState -&gt; ParseState) -&gt; Parser ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((ParseState -&gt; ParseState) -&gt; Parser ())
-&gt; (ParseState -&gt; ParseState) -&gt; Parser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680629765"><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629765"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState
</span><a href="#local-6989586621680629765"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parseLayout :: [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#parseLayout"><span class="hs-identifier hs-var">parseLayout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629766"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">-- | Return the current layout context.</span><span>
</span><span id="line-341"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#topContext"><span class="hs-identifier hs-type">topContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier hs-type">LayoutContext</span></a></span><span>
</span><span id="line-342"></span><span id="topContext"><span class="annot"><span class="annottext">topContext :: Parser LayoutContext
</span><a href="Agda.Syntax.Parser.Monad.html#topContext"><span class="hs-identifier hs-var hs-var">topContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621680629764"><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629764"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#getContext"><span class="hs-identifier hs-var">getContext</span></a></span><span>
</span><span id="line-344"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629764"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-345"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser LayoutContext
forall a. String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No layout context in scope&quot;</span></span><span>
</span><span id="line-346"></span><span>            </span><span id="local-6989586621680629763"><span class="annot"><span class="annottext">LayoutContext
</span><a href="#local-6989586621680629763"><span class="hs-identifier hs-var">l</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[LayoutContext]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LayoutContext -&gt; Parser LayoutContext
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">LayoutContext
</span><a href="#local-6989586621680629763"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#popContext"><span class="hs-identifier hs-type">popContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span id="popContext"><span class="annot"><span class="annottext">popContext :: Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#popContext"><span class="hs-identifier hs-var hs-var">popContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621680629762"><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629762"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#getContext"><span class="hs-identifier hs-var">getContext</span></a></span><span>
</span><span id="line-351"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629762"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-352"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser ()
forall a. String -&gt; Parser a
</span><a href="Agda.Syntax.Parser.Monad.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There is no layout block to close at this point.&quot;</span></span><span>
</span><span id="line-353"></span><span>            </span><span class="annot"><span class="annottext">LayoutContext
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621680629761"><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629761"><span class="hs-identifier hs-var">ctx</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LayoutContext] -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setContext"><span class="hs-identifier hs-var">setContext</span></a></span><span> </span><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629761"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#pushContext"><span class="hs-identifier hs-type">pushContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#LayoutContext"><span class="hs-identifier hs-type">LayoutContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span id="pushContext"><span class="annot"><span class="annottext">pushContext :: LayoutContext -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#pushContext"><span class="hs-identifier hs-var hs-var">pushContext</span></a></span></span><span> </span><span id="local-6989586621680629760"><span class="annot"><span class="annottext">LayoutContext
</span><a href="#local-6989586621680629760"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-357"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621680629759"><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629759"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser [LayoutContext]
</span><a href="Agda.Syntax.Parser.Monad.html#getContext"><span class="hs-identifier hs-var">getContext</span></a></span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="annottext">[LayoutContext] -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#setContext"><span class="hs-identifier hs-var">setContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LayoutContext
</span><a href="#local-6989586621680629760"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutContext -&gt; [LayoutContext] -&gt; [LayoutContext]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LayoutContext]
</span><a href="#local-6989586621680629759"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-comment">-- | Should only be used at the beginning of a file. When we start parsing</span><span>
</span><span id="line-361"></span><span class="hs-comment">--   we should be in layout mode. Instead of forcing zero indentation we use</span><span>
</span><span id="line-362"></span><span class="hs-comment">--   the indentation of the first token.</span><span>
</span><span id="line-363"></span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#pushCurrentContext"><span class="hs-identifier hs-type">pushCurrentContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.Monad.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span id="pushCurrentContext"><span class="annot"><span class="annottext">pushCurrentContext :: Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#pushCurrentContext"><span class="hs-identifier hs-var hs-var">pushCurrentContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621680629758"><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629758"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser PositionWithoutFile
</span><a href="Agda.Syntax.Parser.Monad.html#getLastPos"><span class="hs-identifier hs-var">getLastPos</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="annot"><span class="annottext">LayoutContext -&gt; Parser ()
</span><a href="Agda.Syntax.Parser.Monad.html#pushContext"><span class="hs-identifier hs-var">pushContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int32 -&gt; LayoutContext
</span><a href="Agda.Syntax.Parser.Monad.html#Layout"><span class="hs-identifier hs-var">Layout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PositionWithoutFile -&gt; Int32
forall a. Position' a -&gt; Int32
</span><a href="Agda.Syntax.Position.html#posCol"><span class="hs-identifier hs-var hs-var">posCol</span></a></span><span> </span><span class="annot"><span class="annottext">PositionWithoutFile
</span><a href="#local-6989586621680629758"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-367"></span></pre></body></html>