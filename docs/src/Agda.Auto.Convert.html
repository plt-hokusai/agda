<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Auto.Convert</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IORef</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier">Hiding</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier">getHiding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier">Arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Concrete.html"><span class="hs-identifier">Agda.Syntax.Concrete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Concrete.html#exprFieldA"><span class="hs-identifier">exprFieldA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">I</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom%27"><span class="hs-identifier">Dom'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier">domInfo</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier">unDom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Pattern.html"><span class="hs-identifier">Agda.Syntax.Internal.Pattern</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IP</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cm</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html"><span class="hs-identifier">Agda.Syntax.Abstract.Name</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AN</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html"><span class="hs-identifier">Agda.Syntax.Abstract</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SP</span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Base</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MB</span></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Signature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier">getConstInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier">getDefFreeVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#ignoreAbstractMode"><span class="hs-identifier">ignoreAbstractMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Level.html"><span class="hs-identifier">Agda.TypeChecking.Level</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Level.html#reallyUnLevelView"><span class="hs-identifier">reallyUnLevelView</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#mvJudgement"><span class="hs-identifier">mvJudgement</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier">mvPermutation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier">getMetaInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#envContext"><span class="hs-identifier">envContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#clEnv"><span class="hs-identifier">clEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html"><span class="hs-identifier">Agda.TypeChecking.Monad.MetaVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupMeta"><span class="hs-identifier">lookupMeta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier">withMetaInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionPoint"><span class="hs-identifier">lookupInteractionPoint</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier">getContextArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Constraints.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Constraints.html#getAllConstraints"><span class="hs-identifier">getAllConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier">applySubst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#renamingR"><span class="hs-identifier">renamingR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-identifier">piApplyM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">I</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier">absBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier">normalise</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#instantiate"><span class="hs-identifier">instantiate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.EtaContract.html"><span class="hs-identifier">Agda.TypeChecking.EtaContract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier">etaContract</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Builtin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#constructorForm"><span class="hs-identifier">constructorForm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html"><span class="hs-identifier">Agda.TypeChecking.Free</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-identifier">freeIn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.MakeCase.html"><span class="hs-identifier">Agda.Interaction.MakeCase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.MakeCase.html#getClauseZipperForIP"><span class="hs-identifier">getClauseZipperForIP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html"><span class="hs-identifier">Agda.Auto.NarrowingSearch</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html"><span class="hs-identifier">Agda.Auto.Syntax</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#getConst"><span class="hs-identifier">getConst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html"><span class="hs-identifier">Agda.Auto.CaseSplit</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#lift"><span class="hs-identifier">lift</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html"><span class="hs-identifier">Agda.Utils.Lens</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html#forMaybeMM"><span class="hs-identifier">forMaybeMM</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#Permutation"><span class="hs-identifier">Permutation</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Permutation.html#Perm"><span class="hs-identifier">Perm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier">permute</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier">takeP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#compactP"><span class="hs-identifier">compactP</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html"><span class="hs-identifier">Agda.Utils.Pretty</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier">prettyShow</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">data</span><span> </span><span id="Hint"><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Hint"><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="hintIsConstructor"><span class="annot"><span class="annottext">Hint -&gt; Bool
</span><a href="Agda.Auto.Convert.html#hintIsConstructor"><span class="hs-identifier hs-var hs-var">hintIsConstructor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="hintQName"><span class="annot"><span class="annottext">Hint -&gt; QName
</span><a href="Agda.Auto.Convert.html#hintQName"><span class="hs-identifier hs-var hs-var">hintQName</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">I.QName</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">type</span><span> </span><span id="O"><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-var">O</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-comment">-- Nothing - Def</span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-comment">-- Just npar - Con with npar parameters which don't appear in Agda</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">data</span><span> </span><span id="TMode"><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-var">TMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TMAll"><span class="annot"><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span></span><span> </span><span class="hs-comment">-- can be extended to distinguish between different modes (all, only def)</span><span>
</span><span id="line-65"></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680650950"><span id="local-6989586621680650952"><span class="annot"><span class="annottext">TMode -&gt; TMode -&gt; Bool
(TMode -&gt; TMode -&gt; Bool) -&gt; (TMode -&gt; TMode -&gt; Bool) -&gt; Eq TMode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TMode -&gt; TMode -&gt; Bool
$c/= :: TMode -&gt; TMode -&gt; Bool
== :: TMode -&gt; TMode -&gt; Bool
$c== :: TMode -&gt; TMode -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">type</span><span> </span><span id="MapS"><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-var">MapS</span></a></span></span><span> </span><span id="local-6989586621680650948"><span class="annot"><a href="#local-6989586621680650948"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680650947"><span class="annot"><a href="#local-6989586621680650947"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621680650948"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650947"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680650948"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span id="local-6989586621680651211"><span id="local-6989586621680651212"><span class="annot"><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-type">initMapS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680651212"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680651211"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-70"></span><span id="initMapS"><span class="annot"><span class="annottext">initMapS :: MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var hs-var">initMapS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map a b
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span id="local-6989586621680651335"><span id="local-6989586621680651336"><span class="annot"><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-type">popMapS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680651336"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680651335"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680651336"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680651335"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621680651335"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-73"></span><span id="popMapS"><span class="annot"><span class="annottext">popMapS :: (S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var hs-var">popMapS</span></a></span></span><span> </span><span id="local-6989586621680650943"><span class="annot"><span class="annottext">S -&gt; (a, [b])
</span><a href="#local-6989586621680650943"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621680650942"><span class="annot"><span class="annottext">(a, [b]) -&gt; S -&gt; S
</span><a href="#local-6989586621680650942"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650941"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650941"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650940"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621680650940"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; (a, [b])) -&gt; StateT S TCM (a, [b])
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; (a, [b])
</span><a href="#local-6989586621680650943"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-74"></span><span>                 </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621680650940"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-75"></span><span>                  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe b -&gt; TOM (Maybe b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe b
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-76"></span><span>                  </span><span class="hs-special">(</span><span id="local-6989586621680650938"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680650938"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621680650937"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621680650937"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-77"></span><span>                   </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, [b]) -&gt; S -&gt; S
</span><a href="#local-6989586621680650942"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650941"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621680650937"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>                   </span><span class="annot"><span class="annottext">Maybe b -&gt; TOM (Maybe b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; TOM (Maybe b)) -&gt; Maybe b -&gt; TOM (Maybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680650938"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">data</span><span> </span><span id="S"><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="S"><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span> </span><span class="hs-special">{</span><span id="sConsts"><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>            </span><span id="sMetas"><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>            </span><span id="sEqs"><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>            </span><span id="sCurMeta"><span class="annot"><span class="annottext">S -&gt; Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var hs-var">sCurMeta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>            </span><span id="sMainMeta"><span class="annot"><span class="annottext">S -&gt; MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var hs-var">sMainMeta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span>
</span><span id="line-85"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">type</span><span> </span><span id="TOM"><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-var">TOM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">type</span><span> </span><span id="MOT"><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-var">MOT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="annot"><a href="Agda.Auto.Convert.html#tomy"><span class="hs-identifier hs-type">tomy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-92"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-93"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-95"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span id="tomy"><span class="annot"><span class="annottext">tomy :: MetaId
-&gt; [Hint]
-&gt; [Type]
-&gt; TCM
     ([ConstRef O], [MExp O],
      Map
        MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]),
      [(Bool, MExp O, MExp O)], Map QName (TMode, ConstRef O))
</span><a href="Agda.Auto.Convert.html#tomy"><span class="hs-identifier hs-var hs-var">tomy</span></a></span></span><span> </span><span id="local-6989586621680650927"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650927"><span class="hs-identifier hs-var">imi</span></a></span></span><span> </span><span id="local-6989586621680650926"><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621680650926"><span class="hs-identifier hs-var">icns</span></a></span></span><span> </span><span id="local-6989586621680650925"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650925"><span class="hs-identifier hs-var">typs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-97"></span><span> </span><span id="local-6989586621680650924"><span class="annot"><span class="annottext">[(Bool, Term, Term)]
</span><a href="#local-6989586621680650924"><span class="hs-identifier hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM [(Bool, Term, Term)]
</span><a href="Agda.Auto.Convert.html#getEqs"><span class="hs-identifier hs-var">getEqs</span></a></span><span>
</span><span id="line-98"></span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="#local-6989586621680650922"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>  </span><span id="local-6989586621680650922"><span class="annot"><span class="annottext">r :: [QName] -&gt; TOM [QName]
</span><a href="#local-6989586621680650922"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span id="local-6989586621680650921"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650921"><span class="hs-identifier hs-var">projfcns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-101"></span><span>   </span><span id="local-6989586621680650920"><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680650920"><span class="hs-identifier hs-var">nxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MapS QName (TMode, ConstRef O))
-&gt; (MapS QName (TMode, ConstRef O) -&gt; S -&gt; S) -&gt; TOM (Maybe QName)
forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var">popMapS</span></a></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650919"><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650919"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680650918"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650918"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650918"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650919"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680650920"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650917"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650917"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>     </span><span id="local-6989586621680650916"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650916"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map QName (TMode, ConstRef O))
-&gt; StateT S TCM (Map QName (TMode, ConstRef O))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O))
-&gt; (S -&gt; MapS QName (TMode, ConstRef O))
-&gt; S
-&gt; Map QName (TMode, ConstRef O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650914"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621680650914"><span class="hs-identifier hs-var">mode</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650913"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650913"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650916"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O) -&gt; QName -&gt; (TMode, ConstRef O)
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650917"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-106"></span><span>     </span><span id="local-6989586621680650911"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650911"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S TCM Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S TCM Definition)
-&gt; TCM Definition -&gt; StateT S TCM Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650917"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-107"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650909"><span class="annot"><span class="annottext">typ :: Type
</span><a href="#local-6989586621680650909"><span class="hs-identifier hs-var hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var hs-var">MB.defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650911"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-108"></span><span>         </span><span id="local-6989586621680650907"><span class="annot"><span class="annottext">defn :: Defn
</span><a href="#local-6989586621680650907"><span class="hs-identifier hs-var hs-var">defn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var hs-var">MB.theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650911"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-109"></span><span>     </span><span id="local-6989586621680650905"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650905"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Type -&gt; StateT S TCM Type
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; StateT S TCM Type) -&gt; TCM Type -&gt; StateT S TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650909"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-110"></span><span>     </span><span id="local-6989586621680650904"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650904"><span class="hs-identifier hs-var">typ'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650905"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-111"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650902"><span class="annot"><span class="annottext">clausesToDef :: [Clause] -&gt; m (DeclCont o, [a])
</span><a href="#local-6989586621680650902"><span class="hs-identifier hs-var hs-var">clausesToDef</span></a></span></span><span> </span><span id="local-6989586621680650901"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650901"><span class="hs-identifier hs-var">clauses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-112"></span><span>           </span><span id="local-6989586621680650900"><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680650900"><span class="hs-identifier hs-var">clauses'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; m [Clause o]
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650901"><span class="hs-identifier hs-var">clauses</span></a></span><span>
</span><span id="line-113"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650899"><span class="annot"><span class="annottext">narg :: Int
</span><a href="#local-6989586621680650899"><span class="hs-identifier hs-var hs-var">narg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650901"><span class="hs-identifier hs-var">clauses</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-114"></span><span>                        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-115"></span><span>                        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">namedClausePats :: Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">I.namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650896"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621680650896"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621680650896"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-116"></span><span>           </span><span class="annot"><span class="annottext">(DeclCont o, [a]) -&gt; m (DeclCont o, [a])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Clause o] -&gt; Maybe Int -&gt; Maybe Int -&gt; DeclCont o
forall o. Int -&gt; [Clause o] -&gt; Maybe Int -&gt; Maybe Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650899"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680650900"><span class="hs-identifier hs-var">clauses'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>     </span><span class="hs-special">(</span><span id="local-6989586621680650893"><span class="annot"><span class="annottext">DeclCont O
</span><a href="#local-6989586621680650893"><span class="hs-identifier hs-var">cont</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650892"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650892"><span class="hs-identifier hs-var">projfcns2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621680650907"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-118"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Axiom"><span class="hs-identifier hs-type">MB.Axiom</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#DataOrRecSig"><span class="hs-identifier hs-type">MB.DataOrRecSig</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#GeneralizableVar"><span class="hs-identifier hs-type">MB.GeneralizableVar</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StateT S TCM (DeclCont O, [QName])
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-121"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#AbstractDefn"><span class="hs-identifier hs-type">MB.AbstractDefn</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Function"><span class="hs-identifier hs-type">MB.Function</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">funClauses :: Defn -&gt; [Clause]
</span><a href="Agda.TypeChecking.Monad.Base.html#funClauses"><span class="hs-identifier hs-var">MB.funClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650883"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650883"><span class="hs-identifier hs-var">clauses</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) o a.
(Monad m, Conversion m [Clause] [Clause o]) =&gt;
[Clause] -&gt; m (DeclCont o, [a])
</span><a href="#local-6989586621680650902"><span class="hs-identifier hs-var">clausesToDef</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650883"><span class="hs-identifier hs-var">clauses</span></a></span><span>
</span><span id="line-123"></span><span>      </span><span class="hs-comment">-- MB.Primitive {MB.primClauses = []} -&gt; throwError $ strMsg &quot;Auto: Primitive functions are not supported&quot; -- Andreas, 2013-06-17 breaks interaction/AutoMisc</span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Primitive"><span class="hs-identifier hs-type">MB.Primitive</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">primClauses :: Defn -&gt; [Clause]
</span><a href="Agda.TypeChecking.Monad.Base.html#primClauses"><span class="hs-identifier hs-var">MB.primClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650880"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650880"><span class="hs-identifier hs-var">clauses</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) o a.
(Monad m, Conversion m [Clause] [Clause o]) =&gt;
[Clause] -&gt; m (DeclCont o, [a])
</span><a href="#local-6989586621680650902"><span class="hs-identifier hs-var">clausesToDef</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680650880"><span class="hs-identifier hs-var">clauses</span></a></span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PrimitiveSort"><span class="hs-identifier hs-type">MB.PrimitiveSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StateT S TCM (DeclCont O, [QName])
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Datatype"><span class="hs-identifier hs-type">MB.Datatype</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dataCons :: Defn -&gt; [QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#dataCons"><span class="hs-identifier hs-var">MB.dataCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650876"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650876"><span class="hs-identifier hs-var">cons</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-127"></span><span>       </span><span id="local-6989586621680650875"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650875"><span class="hs-identifier hs-var">cons2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; StateT S TCM (ConstRef O))
-&gt; [QName] -&gt; StateT S TCM [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650873"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650873"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650873"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650876"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-128"></span><span>       </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; DeclCont O
forall o. [ConstRef o] -&gt; [ConstRef o] -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650875"><span class="hs-identifier hs-var">cons2</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">MB.Record</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">recFields :: Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">MB.recFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650868"><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621680650868"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recTel :: Defn -&gt; Telescope
</span><a href="Agda.TypeChecking.Monad.Base.html#recTel"><span class="hs-identifier hs-var">MB.recTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650866"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680650866"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- the value of recPars seems unreliable or don't know what it signifies</span><span>
</span><span id="line-130"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650865"><span class="annot"><span class="annottext">pars :: Int -&gt; Type -&gt; [Arg Term]
</span><a href="#local-6989586621680650865"><span class="hs-identifier hs-var hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621680650864"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650864"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span id="local-6989586621680650861"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650861"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span id="local-6989586621680650860"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650860"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var hs-var">I.domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650861"><span class="hs-identifier hs-var">it</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">I.var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650864"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; [Arg Term] -&gt; [Arg Term]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span>
</span><span id="line-131"></span><span>                                           </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; [Arg Term]
</span><a href="#local-6989586621680650865"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650864"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Abs a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unAbs"><span class="hs-identifier hs-var hs-var">I.unAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650860"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>           </span><span class="annot"><a href="#local-6989586621680650865"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-133"></span><span>           </span><span id="local-6989586621680650856"><span class="annot"><span class="annottext">contyp :: Int -&gt; Telescope -&gt; Type
</span><a href="#local-6989586621680650856"><span class="hs-identifier hs-var hs-var">contyp</span></a></span></span><span> </span><span id="local-6989586621680650855"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650855"><span class="hs-identifier hs-var">npar</span></a></span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="Agda.Syntax.Internal.html#EmptyTel"><span class="hs-identifier hs-var">I.EmptyTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">I.El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-comment">{- arbitrary -}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; Term -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-134"></span><span>                                      </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650917"><span class="hs-identifier hs-var">cn</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; Elims -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim' Term) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim' Term
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Elims) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; [Arg Term]
</span><a href="#local-6989586621680650865"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650855"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650905"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-135"></span><span>           </span><span class="annot"><a href="#local-6989586621680650856"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span id="local-6989586621680650850"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650850"><span class="hs-identifier hs-var">npar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-type">I.ExtendTel</span></a></span><span> </span><span id="local-6989586621680650848"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650848"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">I.Abs</span></a></span><span> </span><span id="local-6989586621680650846"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650846"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680650845"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680650845"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">I.El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-comment">{- arbitrary -}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Type -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-var">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650848"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; Type -&gt; Abs Type
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650846"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Type
</span><a href="#local-6989586621680650856"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650850"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680650845"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>           </span><span class="annot"><a href="#local-6989586621680650856"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span id="local-6989586621680650843"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650843"><span class="hs-identifier hs-var">npar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-type">I.ExtendTel</span></a></span><span> </span><span id="local-6989586621680650842"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650842"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">I.NoAbs</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-137"></span><span>       </span><span id="local-6989586621680650840"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650840"><span class="hs-identifier hs-var">contyp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; StateT S TCM (MExp O)) -&gt; Type -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Type
</span><a href="#local-6989586621680650856"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680650866"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-138"></span><span>       </span><span id="local-6989586621680650839"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650839"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650913"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-139"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621680650836"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650836"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; DeclCont O
forall o. ConstDef o -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var hs-var">cdcont</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650839"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-140"></span><span>       </span><span class="annot"><span class="annottext">TCM () -&gt; StateT S TCM ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; StateT S TCM ()) -&gt; TCM () -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; (ConstDef O -&gt; ConstDef O) -&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650836"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650833"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650833"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650833"><span class="hs-identifier hs-var">cdef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650840"><span class="hs-identifier hs-var">contyp'</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span>       </span><span id="local-6989586621680650831"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650831"><span class="hs-identifier hs-var">projfcns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; StateT S TCM (ConstRef O))
-&gt; [Dom QName] -&gt; StateT S TCM [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680650830"><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680650830"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">I.unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680650830"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621680650868"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-143"></span><span>       </span><span class="hs-comment">-- Equivalently projfcns &lt;- mapM (($ TMAll) . getConst False . I.unDom) fields</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>       </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; DeclCont O
forall o. [ConstRef o] -&gt; [ConstRef o] -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650836"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650831"><span class="hs-identifier hs-var">projfcns</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-comment">{-map snd fields-}</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Constructor"><span class="hs-identifier hs-type">MB.Constructor</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">conData :: Defn -&gt; QName
</span><a href="Agda.TypeChecking.Monad.Base.html#conData"><span class="hs-identifier hs-var">MB.conData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650827"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650827"><span class="hs-identifier hs-var">dt</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-147"></span><span>       </span><span class="annot"><span class="annottext">ConstRef O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650827"><span class="hs-identifier hs-var">dt</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span> </span><span class="hs-comment">-- make sure that datatype is included</span><span>
</span><span id="line-148"></span><span>       </span><span id="local-6989586621680650826"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650826"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650913"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-149"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650825"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650825"><span class="hs-identifier hs-var">nomi</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650826"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-150"></span><span>       </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S TCM (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DeclCont O
forall o. Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650825"><span class="hs-identifier hs-var">nomi</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; Int
forall o. ConstDef o -&gt; Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var hs-var">cddeffreevars</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650826"><span class="hs-identifier hs-var">cc</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>     </span><span class="annot"><span class="annottext">TCM () -&gt; StateT S TCM ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; StateT S TCM ()) -&gt; TCM () -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; (ConstDef O -&gt; ConstDef O) -&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650913"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650821"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650821"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650821"><span class="hs-identifier hs-var">cdef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650904"><span class="hs-identifier hs-var">typ'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
</span><a href="#local-6989586621680650893"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>     </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621680650922"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">([QName] -&gt; TOM [QName]) -&gt; [QName] -&gt; TOM [QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650892"><span class="hs-identifier hs-var">projfcns2</span></a></span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; [QName] -&gt; [QName]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650921"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">Maybe QName
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>     </span><span id="local-6989586621680650820"><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621680650820"><span class="hs-identifier hs-var">nxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S
 -&gt; MapS
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; (MapS
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
    -&gt; S -&gt; S)
-&gt; TOM (Maybe MetaId)
forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var">popMapS</span></a></span><span> </span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650819"><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621680650819"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680650818"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650818"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650818"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621680650819"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621680650820"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-156"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650817"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-157"></span><span>       </span><span class="annot"><span class="annottext">(((Bool, Term, Term), Int) -&gt; StateT S TCM ())
-&gt; [((Bool, Term, Term), Int)] -&gt; StateT S TCM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650815"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650815"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650814"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650814"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650813"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650813"><span class="hs-identifier hs-var">eqi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-158"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; StateT S TCM () -&gt; StateT S TCM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650815"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650814"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT S TCM () -&gt; StateT S TCM ())
-&gt; StateT S TCM () -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-159"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680650809"><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621680650809"><span class="hs-identifier hs-var">eqsm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650808"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680650808"><span class="hs-identifier hs-var">eqsl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O)))
-&gt; StateT S TCM (MapS Int (Maybe (Bool, MExp O, MExp O)))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span><span>
</span><span id="line-160"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; StateT S TCM () -&gt; StateT S TCM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Map Int (Maybe (Bool, MExp O, MExp O)) -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.notMember</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650813"><span class="hs-identifier hs-var">eqi</span></a></span><span> </span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621680650809"><span class="hs-identifier hs-var">eqsm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT S TCM () -&gt; StateT S TCM ())
-&gt; StateT S TCM () -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>           </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S TCM ()) -&gt; (S -&gt; S) -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680650806"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650806"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650806"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; Maybe (Bool, MExp O, MExp O)
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650813"><span class="hs-identifier hs-var">eqi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, MExp O, MExp O)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621680650809"><span class="hs-identifier hs-var">eqsm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650813"><span class="hs-identifier hs-var">eqi</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; [Int]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680650808"><span class="hs-identifier hs-var">eqsl</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-162"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Bool, Term, Term)] -&gt; [Int] -&gt; [((Bool, Term, Term), Int)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[(Bool, Term, Term)]
</span><a href="#local-6989586621680650924"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>       </span><span id="local-6989586621680650804"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM MetaVariable -&gt; StateT S TCM MetaVariable
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM MetaVariable -&gt; StateT S TCM MetaVariable)
-&gt; TCM MetaVariable -&gt; StateT S TCM MetaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
forall (m :: * -&gt; *).
(MonadFail m, ReadTCState m) =&gt;
MetaId -&gt; m MetaVariable
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupMeta"><span class="hs-identifier hs-var">lookupMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-164"></span><span>       </span><span id="local-6989586621680650803"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621680650803"><span class="hs-identifier hs-var">msol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; MetaInstantiation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvInstantiation"><span class="hs-identifier hs-var hs-var">MB.mvInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-165"></span><span>                     </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#InstV"><span class="hs-identifier hs-type">MB.InstV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>                      </span><span class="annot"><span class="annottext">TCMT IO (Maybe Term) -&gt; StateT S TCM (Maybe Term)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Maybe Term) -&gt; StateT S TCM (Maybe Term))
-&gt; TCMT IO (Maybe Term) -&gt; StateT S TCM (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO (Maybe Term) -&gt; TCMT IO (Maybe Term)
forall a. Closure Range -&gt; TCM a -&gt; TCM a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Maybe Term) -&gt; TCMT IO (Maybe Term))
-&gt; TCMT IO (Maybe Term) -&gt; TCMT IO (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>                       </span><span id="local-6989586621680650800"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650800"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Arg Term]
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m [Arg Term]
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier hs-var">getContextArgs</span></a></span><span>
</span><span id="line-168"></span><span>                       </span><span class="hs-comment">--sol &lt;- norm (I.MetaV mi args)</span><span>
</span><span id="line-169"></span><span>                       </span><span id="local-6989586621680650799"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650799"><span class="hs-identifier hs-var">sol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a (m :: * -&gt; *). (Instantiate a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#instantiate"><span class="hs-identifier hs-var">instantiate</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCMT IO Term) -&gt; Term -&gt; TCMT IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-var">I.MetaV</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; Elims -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim' Term) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim' Term
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Elims) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Permutation -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier hs-var">permute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier hs-var">takeP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650800"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Permutation) -&gt; Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Permutation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier hs-var hs-var">mvPermutation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650800"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-170"></span><span>                       </span><span class="annot"><span class="annottext">Maybe Term -&gt; TCMT IO (Maybe Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; TCMT IO (Maybe Term))
-&gt; Maybe Term -&gt; TCMT IO (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650799"><span class="hs-identifier hs-var">sol</span></a></span><span>
</span><span id="line-171"></span><span>                     </span><span class="annot"><span class="annottext">MetaInstantiation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; StateT S TCM (Maybe Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-172"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621680650803"><span class="hs-identifier hs-var">msol</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-173"></span><span>        </span><span class="annot"><span class="annottext">Maybe Term
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; StateT S TCM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650797"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650797"><span class="hs-identifier hs-var">sol</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-175"></span><span>         </span><span id="local-6989586621680650796"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650796"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-176"></span><span>         </span><span id="local-6989586621680650794"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650794"><span class="hs-identifier hs-var">sol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650797"><span class="hs-identifier hs-var">sol</span></a></span><span>
</span><span id="line-177"></span><span>         </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S TCM ()) -&gt; (S -&gt; S) -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680650793"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650793"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650793"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map Int (Maybe (Bool, MExp O, MExp O))
 -&gt; Map Int (Maybe (Bool, MExp O, MExp O)))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; Maybe (Bool, MExp O, MExp O)
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O)) -&gt; Int
forall k a. Map k a -&gt; Int
</span><span class="hs-identifier hs-var">Map.size</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS Int (Maybe (Bool, MExp O, MExp O))
 -&gt; Map Int (Maybe (Bool, MExp O, MExp O)))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650793"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Bool, MExp O, MExp O) -&gt; Maybe (Bool, MExp O, MExp O)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MExp O
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650796"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650794"><span class="hs-identifier hs-var">sol'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650793"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-178"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650790"><span class="annot"><span class="annottext">tt :: Type
</span><a href="#local-6989586621680650790"><span class="hs-identifier hs-var hs-var">tt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Judgement MetaId -&gt; Type
forall a. Judgement a -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#jMetaType"><span class="hs-identifier hs-var hs-var">MB.jMetaType</span></a></span><span> </span><span class="annot"><span class="annottext">(Judgement MetaId -&gt; Type) -&gt; Judgement MetaId -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Judgement MetaId
</span><a href="Agda.TypeChecking.Monad.Base.html#mvJudgement"><span class="hs-identifier hs-var hs-var">mvJudgement</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-179"></span><span>           </span><span id="local-6989586621680650788"><span class="annot"><span class="annottext">minfo :: Closure Range
</span><a href="#local-6989586621680650788"><span class="hs-identifier hs-var hs-var">minfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-180"></span><span>           </span><span id="local-6989586621680650787"><span class="annot"><span class="annottext">localVars :: [Type]
</span><a href="#local-6989586621680650787"><span class="hs-identifier hs-var hs-var">localVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dom' Term (Name, Type) -&gt; Type)
-&gt; [Dom' Term (Name, Type)] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name, Type) -&gt; Type
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Name, Type) -&gt; Type)
-&gt; (Dom' Term (Name, Type) -&gt; (Name, Type))
-&gt; Dom' Term (Name, Type)
-&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dom' Term (Name, Type) -&gt; (Name, Type)
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">I.unDom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Dom' Term (Name, Type)] -&gt; [Type])
-&gt; (Closure Range -&gt; [Dom' Term (Name, Type)])
-&gt; Closure Range
-&gt; [Type]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TCEnv -&gt; [Dom' Term (Name, Type)]
</span><a href="Agda.TypeChecking.Monad.Base.html#envContext"><span class="hs-identifier hs-var hs-var">envContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCEnv -&gt; [Dom' Term (Name, Type)])
-&gt; (Closure Range -&gt; TCEnv)
-&gt; Closure Range
-&gt; [Dom' Term (Name, Type)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCEnv
forall a. Closure a -&gt; TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#clEnv"><span class="hs-identifier hs-var hs-var">clEnv</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Range -&gt; [Type]) -&gt; Closure Range -&gt; [Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621680650788"><span class="hs-identifier hs-var">minfo</span></a></span><span>
</span><span id="line-181"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621680650786"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650786"><span class="hs-identifier hs-var">targettype</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650785"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650785"><span class="hs-identifier hs-var">localVars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Type, [Type]) -&gt; StateT S TCM (Type, [Type])
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Type, [Type]) -&gt; StateT S TCM (Type, [Type]))
-&gt; TCMT IO (Type, [Type]) -&gt; StateT S TCM (Type, [Type])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO (Type, [Type]) -&gt; TCMT IO (Type, [Type])
forall a. Closure Range -&gt; TCM a -&gt; TCM a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621680650788"><span class="hs-identifier hs-var">minfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Type, [Type]) -&gt; TCMT IO (Type, [Type]))
-&gt; TCMT IO (Type, [Type]) -&gt; TCMT IO (Type, [Type])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-182"></span><span>        </span><span id="local-6989586621680650784"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650784"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Arg Term]
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m [Arg Term]
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier hs-var">getContextArgs</span></a></span><span>
</span><span id="line-183"></span><span>        </span><span id="local-6989586621680650783"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650783"><span class="hs-identifier hs-var">targettype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650790"><span class="hs-identifier hs-var">tt</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Arg Term] -&gt; TCM Type
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; a -&gt; m Type
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-operator hs-var">`piApplyM`</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Permutation -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier hs-var">permute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier hs-var">takeP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650784"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Permutation) -&gt; Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Permutation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier hs-var hs-var">mvPermutation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650804"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650784"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-184"></span><span>        </span><span id="local-6989586621680650782"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650782"><span class="hs-identifier hs-var">targettype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650783"><span class="hs-identifier hs-var">targettype</span></a></span><span>
</span><span id="line-185"></span><span>        </span><span id="local-6989586621680650781"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650781"><span class="hs-identifier hs-var">localVars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCM Type) -&gt; [Type] -&gt; TCMT IO [Type]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650787"><span class="hs-identifier hs-var">localVars</span></a></span><span>
</span><span id="line-186"></span><span>        </span><span class="annot"><span class="annottext">(Type, [Type]) -&gt; TCMT IO (Type, [Type])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650782"><span class="hs-identifier hs-var">targettype</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650781"><span class="hs-identifier hs-var">localVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>       </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650780"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650780"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650780"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Maybe MetaId
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>       </span><span id="local-6989586621680650779"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650779"><span class="hs-identifier hs-var">typ'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650786"><span class="hs-identifier hs-var">targettype</span></a></span><span>
</span><span id="line-189"></span><span>       </span><span id="local-6989586621680650778"><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621680650778"><span class="hs-identifier hs-var">ctx'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; StateT S TCM (MExp O)) -&gt; [Type] -&gt; StateT S TCM [MExp O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650785"><span class="hs-identifier hs-var">localVars</span></a></span><span>
</span><span id="line-190"></span><span>       </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650777"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650777"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650777"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>       </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650776"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650776"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650776"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map
   MetaId
   (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]),
     [MetaId]))
-&gt; MetaId
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.adjust</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680650774"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650774"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650773"><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621680650773"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650774"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(MExp O, [MExp O]) -&gt; Maybe (MExp O, [MExp O])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650779"><span class="hs-identifier hs-var">typ'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621680650778"><span class="hs-identifier hs-var">ctx'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621680650773"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650817"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650776"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>       </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621680650922"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650921"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><span class="annottext">Maybe MetaId
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-194"></span><span>       </span><span id="local-6989586621680650772"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680650772"><span class="hs-identifier hs-var">nxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O)))
-&gt; (MapS Int (Maybe (Bool, MExp O, MExp O)) -&gt; S -&gt; S)
-&gt; TOM (Maybe Int)
forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var">popMapS</span></a></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650771"><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621680650771"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680650770"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650770"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650770"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621680650771"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680650772"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650769"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650769"><span class="hs-identifier hs-var">eqi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-197"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650768"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650768"><span class="hs-identifier hs-var">ineq</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650767"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650767"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650766"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650766"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Bool, Term, Term)]
</span><a href="#local-6989586621680650924"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Term, Term)] -&gt; Int -&gt; (Bool, Term, Term)
forall a. [a] -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">!!</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650769"><span class="hs-identifier hs-var">eqi</span></a></span><span>
</span><span id="line-198"></span><span>         </span><span id="local-6989586621680650764"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650764"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650767"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-199"></span><span>         </span><span id="local-6989586621680650763"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650763"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650766"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-200"></span><span>         </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650762"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650762"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650762"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map Int (Maybe (Bool, MExp O, MExp O))
 -&gt; Map Int (Maybe (Bool, MExp O, MExp O)))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Maybe (Bool, MExp O, MExp O) -&gt; Maybe (Bool, MExp O, MExp O))
-&gt; Int
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.adjust</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Maybe (Bool, MExp O, MExp O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, MExp O, MExp O) -&gt; Maybe (Bool, MExp O, MExp O)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650768"><span class="hs-identifier hs-var">ineq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650764"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650763"><span class="hs-identifier hs-var">i'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650769"><span class="hs-identifier hs-var">eqi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650762"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>         </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621680650922"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650921"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-203"></span><span>         </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650921"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-204"></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621680650761"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650761"><span class="hs-identifier hs-var">icns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650760"><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621680650760"><span class="hs-identifier hs-var">typs'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650759"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650759"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S TCM ([ConstRef O], [MExp O])
-&gt; S -&gt; TCM (([ConstRef O], [MExp O]), S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650927"><span class="hs-identifier hs-var">imi</span></a></span><span>
</span><span id="line-206"></span><span>      </span><span id="local-6989586621680650757"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650757"><span class="hs-identifier hs-var">icns'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Hint -&gt; StateT S TCM (ConstRef O))
-&gt; [Hint] -&gt; StateT S TCM [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span> </span><span id="local-6989586621680650756"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650756"><span class="hs-identifier hs-var">iscon</span></a></span></span><span> </span><span id="local-6989586621680650755"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650755"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650756"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650755"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621680650926"><span class="hs-identifier hs-var">icns</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span id="local-6989586621680650754"><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621680650754"><span class="hs-identifier hs-var">typs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; StateT S TCM (MExp O)) -&gt; [Type] -&gt; StateT S TCM [MExp O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680650925"><span class="hs-identifier hs-var">typs</span></a></span><span>
</span><span id="line-208"></span><span>      </span><span id="local-6989586621680650753"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650753"><span class="hs-identifier hs-var">projfcns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621680650922"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-209"></span><span>      </span><span id="local-6989586621680650752"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650752"><span class="hs-identifier hs-var">projfcns'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; StateT S TCM (ConstRef O))
-&gt; [QName] -&gt; StateT S TCM [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650751"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650751"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650751"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680650753"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621680650922"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-211"></span><span>      </span><span class="annot"><span class="annottext">([ConstRef O], [MExp O]) -&gt; StateT S TCM ([ConstRef O], [MExp O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650752"><span class="hs-identifier hs-var">projfcns'</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; [ConstRef O]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650757"><span class="hs-identifier hs-var">icns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621680650754"><span class="hs-identifier hs-var">typs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S :: MapS QName (TMode, ConstRef O)
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Maybe MetaId
-&gt; MetaId
-&gt; S
</span><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O)
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650927"><span class="hs-identifier hs-var">imi</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConstRef O -&gt; IO ()) -&gt; [ConstRef O] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO ()
forall o. ConstRef o -&gt; IO ()
</span><a href="Agda.Auto.Syntax.html#categorizedecl"><span class="hs-identifier hs-var">categorizedecl</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650761"><span class="hs-identifier hs-var">icns'</span></a></span><span>
</span><span id="line-214"></span><span> </span><span class="annot"><span class="annottext">([ConstRef O], [MExp O],
 Map
   MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]),
 [(Bool, MExp O, MExp O)], Map QName (TMode, ConstRef O))
-&gt; TCM
     ([ConstRef O], [MExp O],
      Map
        MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]),
      [(Bool, MExp O, MExp O)], Map QName (TMode, ConstRef O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621680650761"><span class="hs-identifier hs-var">icns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621680650760"><span class="hs-identifier hs-var">typs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]))
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId])
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">(Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId])
forall a b c d. (a, Maybe (b, c), d) -&gt; (a, b, c, d)
</span><a href="#local-6989586621680650748"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650759"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Maybe (Bool, MExp O, MExp O) -&gt; (Bool, MExp O, MExp O))
-&gt; [Maybe (Bool, MExp O, MExp O)] -&gt; [(Bool, MExp O, MExp O)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, MExp O, MExp O) -&gt; (Bool, MExp O, MExp O)
forall p. Maybe p -&gt; p
</span><a href="#local-6989586621680650747"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">([Maybe (Bool, MExp O, MExp O)] -&gt; [(Bool, MExp O, MExp O)])
-&gt; [Maybe (Bool, MExp O, MExp O)] -&gt; [(Bool, MExp O, MExp O)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; [Maybe (Bool, MExp O, MExp O)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650759"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650759"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span> </span><span id="local-6989586621680650748"><span class="annot"><span class="annottext">flatten :: (a, Maybe (b, c), d) -&gt; (a, b, c, d)
</span><a href="#local-6989586621680650748"><span class="hs-identifier hs-var hs-var">flatten</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650745"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650745"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650744"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680650744"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650743"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680650743"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650742"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680650742"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650745"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680650744"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680650743"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680650742"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span> </span><span class="annot"><a href="#local-6989586621680650748"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650741"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650741"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (b, c)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650740"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621680650740"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, b, c, d)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span> </span><span id="local-6989586621680650747"><span class="annot"><span class="annottext">fromJust :: Maybe p -&gt; p
</span><a href="#local-6989586621680650747"><span class="hs-identifier hs-var hs-var">fromJust</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650739"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680650739"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680650739"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-220"></span><span> </span><span class="annot"><a href="#local-6989586621680650747"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe p
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-type">getConst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span id="getConst"><span class="annot"><span class="annottext">getConst :: Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var hs-var">getConst</span></a></span></span><span> </span><span id="local-6989586621680650738"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650738"><span class="hs-identifier hs-var">iscon</span></a></span></span><span> </span><span id="local-6989586621680650737"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680650736"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621680650736"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-224"></span><span> </span><span id="local-6989586621680650735"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650735"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S TCM Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S TCM Definition)
-&gt; TCM Definition -&gt; StateT S TCM Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-225"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var hs-var">MB.theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650735"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">MB.Record</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">recConHead :: Defn -&gt; ConHead
</span><a href="Agda.TypeChecking.Monad.Base.html#recConHead"><span class="hs-identifier hs-var">MB.recConHead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650733"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650733"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-227"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650732"><span class="annot"><span class="annottext">conname :: QName
</span><a href="#local-6989586621680650732"><span class="hs-identifier hs-var hs-var">conname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650733"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-228"></span><span>       </span><span id="local-6989586621680650730"><span class="annot"><span class="annottext">conflds :: [Arg QName]
</span><a href="#local-6989586621680650730"><span class="hs-identifier hs-var hs-var">conflds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; [Arg QName]
</span><a href="Agda.Syntax.Internal.html#conFields"><span class="hs-identifier hs-var hs-var">I.conFields</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650733"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-229"></span><span>   </span><span id="local-6989586621680650728"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650728"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map QName (TMode, ConstRef O))
-&gt; StateT S TCM (Map QName (TMode, ConstRef O))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O))
-&gt; (S -&gt; MapS QName (TMode, ConstRef O))
-&gt; S
-&gt; Map QName (TMode, ConstRef O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Map QName (TMode, ConstRef O) -&gt; Maybe (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650728"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650726"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621680650726"><span class="hs-identifier hs-var">mode'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650725"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650725"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>     </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650738"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-233"></span><span>      </span><span id="local-6989586621680650724"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650724"><span class="hs-identifier hs-var">cd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650725"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621680650723"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650723"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; DeclCont O
forall o. ConstDef o -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var hs-var">cdcont</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650724"><span class="hs-identifier hs-var">cd</span></a></span><span>
</span><span id="line-235"></span><span>      </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S TCM (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650723"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-236"></span><span>     </span><span class="hs-keyword">else</span><span>
</span><span id="line-237"></span><span>      </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S TCM (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650725"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TMode, ConstRef O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-239"></span><span>     </span><span id="local-6989586621680650722"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650722"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MetaId) -&gt; StateT S TCM MetaId
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var hs-var">sMainMeta</span></a></span><span>
</span><span id="line-240"></span><span>     </span><span id="local-6989586621680650721"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650721"><span class="hs-identifier hs-var">dfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Int -&gt; StateT S TCM Int
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; StateT S TCM Int)
-&gt; TCMT IO Int -&gt; StateT S TCM Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650722"><span class="hs-identifier hs-var">mainm</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-241"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650719"><span class="annot"><span class="annottext">nomi :: Int
</span><a href="#local-6989586621680650719"><span class="hs-identifier hs-var hs-var">nomi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="Agda.Syntax.Internal.html#arity"><span class="hs-identifier hs-var">I.arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var hs-var">MB.defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650735"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>     </span><span id="local-6989586621680650717"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650717"><span class="hs-identifier hs-var">ccon</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O))
-&gt; TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCM (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCM (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstDef :: forall o. ArgName -&gt; o -&gt; MExp o -&gt; DeclCont o -&gt; Int -&gt; ConstDef o
</span><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: ArgName
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; ArgName -&gt; ArgName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;.CONS&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int, [Arg QName]) -&gt; Maybe (Int, [Arg QName])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650719"><span class="hs-identifier hs-var">nomi</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621680650730"><span class="hs-identifier hs-var">conflds</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650732"><span class="hs-identifier hs-var">conname</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; DeclCont O
forall o. Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650719"><span class="hs-identifier hs-var">nomi</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650721"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650721"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ?? correct value of deffreevars for records?</span><span>
</span><span id="line-243"></span><span>     </span><span id="local-6989586621680650713"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650713"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O))
-&gt; TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCM (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCM (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstDef :: forall o. ArgName -&gt; o -&gt; MExp o -&gt; DeclCont o -&gt; Int -&gt; ConstDef o
</span><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: ArgName
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; DeclCont O
forall o. [ConstRef o] -&gt; [ConstRef o] -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650717"><span class="hs-identifier hs-var">ccon</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650721"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ?? correct value of deffreevars for records?</span><span>
</span><span id="line-244"></span><span>     </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650712"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650712"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650712"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
-&gt; (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621680650736"><span class="hs-identifier hs-var">mode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650713"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650728"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [QName] -&gt; [QName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; [QName]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650712"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>     </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S TCM (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ConstRef O -&gt; StateT S TCM (ConstRef O))
-&gt; ConstRef O -&gt; StateT S TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650738"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650717"><span class="hs-identifier hs-var">ccon</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650713"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><span class="annottext">Defn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-247"></span><span>   </span><span id="local-6989586621680650711"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650711"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map QName (TMode, ConstRef O))
-&gt; StateT S TCM (Map QName (TMode, ConstRef O))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O))
-&gt; (S -&gt; MapS QName (TMode, ConstRef O))
-&gt; S
-&gt; Map QName (TMode, ConstRef O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Map QName (TMode, ConstRef O) -&gt; Maybe (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650711"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650710"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621680650710"><span class="hs-identifier hs-var">mode'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650709"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650709"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-250"></span><span>     </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S TCM (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650709"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TMode, ConstRef O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-252"></span><span>     </span><span class="hs-special">(</span><span id="local-6989586621680650708"><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621680650708"><span class="hs-identifier hs-var">miscon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650707"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650707"><span class="hs-identifier hs-var">sname</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650738"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Constructor"><span class="hs-identifier hs-type">MB.Constructor</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">conPars :: Defn -&gt; Int
</span><a href="Agda.TypeChecking.Monad.Base.html#conPars"><span class="hs-identifier hs-var">MB.conPars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650705"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650705"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">conData :: Defn -&gt; QName
</span><a href="Agda.TypeChecking.Monad.Base.html#conData"><span class="hs-identifier hs-var">MB.conData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650704"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650704"><span class="hs-identifier hs-var">dname</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">conSrcCon :: Defn -&gt; ConHead
</span><a href="Agda.TypeChecking.Monad.Base.html#conSrcCon"><span class="hs-identifier hs-var">MB.conSrcCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650702"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650702"><span class="hs-identifier hs-var">ch</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var hs-var">MB.theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650735"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-254"></span><span>       </span><span class="annot"><span class="annottext">(Maybe (Int, [Arg QName]), ArgName)
-&gt; StateT S TCM (Maybe (Int, [Arg QName]), ArgName)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int, [Arg QName]) -&gt; Maybe (Int, [Arg QName])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650705"><span class="hs-identifier hs-var">npar</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ConHead -&gt; [Arg QName]
</span><a href="Agda.Syntax.Internal.html#conFields"><span class="hs-identifier hs-var hs-var">I.conFields</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650702"><span class="hs-identifier hs-var">ch</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650704"><span class="hs-identifier hs-var">dname</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; ArgName -&gt; ArgName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; ArgName -&gt; ArgName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#qnameName"><span class="hs-identifier hs-var hs-var">I.qnameName</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-keyword">else</span><span>
</span><span id="line-256"></span><span>       </span><span class="annot"><span class="annottext">(Maybe (Int, [Arg QName]), ArgName)
-&gt; StateT S TCM (Maybe (Int, [Arg QName]), ArgName)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>     </span><span id="local-6989586621680650700"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650700"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MetaId) -&gt; StateT S TCM MetaId
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var hs-var">sMainMeta</span></a></span><span>
</span><span id="line-258"></span><span>     </span><span id="local-6989586621680650699"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650699"><span class="hs-identifier hs-var">dfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Int -&gt; StateT S TCM Int
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; StateT S TCM Int)
-&gt; TCMT IO Int -&gt; StateT S TCM Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650700"><span class="hs-identifier hs-var">mainm</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-259"></span><span>     </span><span id="local-6989586621680650698"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650698"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O))
-&gt; TCM (ConstRef O) -&gt; StateT S TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCM (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCM (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstDef :: forall o. ArgName -&gt; o -&gt; MExp o -&gt; DeclCont o -&gt; Int -&gt; ConstDef o
</span><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: ArgName
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650707"><span class="hs-identifier hs-var">sname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621680650708"><span class="hs-identifier hs-var">miscon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650699"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>     </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650697"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650697"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650697"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
-&gt; (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621680650736"><span class="hs-identifier hs-var">mode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650698"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650711"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650737"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [QName] -&gt; [QName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; [QName]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650697"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>     </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S TCM (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650698"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-type">getdfv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">A.QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Cm.Nat</span></a></span><span>
</span><span id="line-264"></span><span id="getdfv"><span class="annot"><span class="annottext">getdfv :: MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var hs-var">getdfv</span></a></span></span><span> </span><span id="local-6989586621680650695"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650695"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span id="local-6989586621680650694"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650694"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span> </span><span id="local-6989586621680650693"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650693"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
forall (m :: * -&gt; *).
(MonadFail m, ReadTCState m) =&gt;
MetaId -&gt; m MetaVariable
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupMeta"><span class="hs-identifier hs-var">lookupMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650695"><span class="hs-identifier hs-var">mainm</span></a></span><span>
</span><span id="line-266"></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO Int -&gt; TCMT IO Int
forall a. Closure Range -&gt; TCM a -&gt; TCM a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621680650693"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; TCMT IO Int) -&gt; TCMT IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Int
forall (m :: * -&gt; *).
(Functor m, Applicative m, ReadTCState m, MonadTCEnv m) =&gt;
QName -&gt; m Int
</span><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier hs-var">getDefFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650694"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="annot"><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-type">getMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span id="getMeta"><span class="annot"><span class="annottext">getMeta :: MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var hs-var">getMeta</span></a></span></span><span> </span><span id="local-6989586621680650692"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650692"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-270"></span><span> </span><span id="local-6989586621680650691"><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621680650691"><span class="hs-identifier hs-var">mmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; StateT
     S
     TCM
     (Map
        MetaId
        (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS
   MetaId
   (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; (S
    -&gt; MapS
         MetaId
         (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; S
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MetaId
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Maybe
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650692"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621680650691"><span class="hs-identifier hs-var">mmap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650690"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650690"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-273"></span><span>   </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; TOM (Metavar (Exp O) (RefInfo O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650690"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-274"></span><span>  </span><span class="annot"><span class="annottext">Maybe
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-275"></span><span>   </span><span id="local-6989586621680650689"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650689"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (Metavar (Exp O) (RefInfo O))
-&gt; TOM (Metavar (Exp O) (RefInfo O))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (Metavar (Exp O) (RefInfo O))
 -&gt; TOM (Metavar (Exp O) (RefInfo O)))
-&gt; TCM (Metavar (Exp O) (RefInfo O))
-&gt; TOM (Metavar (Exp O) (RefInfo O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (Metavar (Exp O) (RefInfo O))
-&gt; TCM (Metavar (Exp O) (RefInfo O))
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">IO (Metavar (Exp O) (RefInfo O))
forall a blk. IO (Metavar a blk)
</span><a href="Agda.Auto.NarrowingSearch.html#initMeta"><span class="hs-identifier hs-var">initMeta</span></a></span><span>
</span><span id="line-276"></span><span>   </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S TCM ()) -&gt; (S -&gt; S) -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680650687"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650687"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650687"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
-&gt; (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]),
    [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650692"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650689"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621680650691"><span class="hs-identifier hs-var">mmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650692"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [MetaId] -&gt; [MetaId]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; [MetaId]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650687"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-277"></span><span>   </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; TOM (Metavar (Exp O) (RefInfo O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650689"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="annot"><a href="Agda.Auto.Convert.html#getEqs"><span class="hs-identifier hs-type">getEqs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-280"></span><span id="getEqs"><span class="annot"><span class="annottext">getEqs :: TCM [(Bool, Term, Term)]
</span><a href="Agda.Auto.Convert.html#getEqs"><span class="hs-identifier hs-var hs-var">getEqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO [ProblemConstraint]
-&gt; (ProblemConstraint -&gt; TCMT IO (Maybe (Bool, Term, Term)))
-&gt; TCM [(Bool, Term, Term)]
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m [a] -&gt; (a -&gt; m (Maybe b)) -&gt; m [b]
</span><a href="Agda.Utils.Monad.html#forMaybeMM"><span class="hs-identifier hs-var">forMaybeMM</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO [ProblemConstraint]
forall (m :: * -&gt; *). ReadTCState m =&gt; m [ProblemConstraint]
</span><a href="Agda.TypeChecking.Monad.Constraints.html#getAllConstraints"><span class="hs-identifier hs-var">getAllConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">((ProblemConstraint -&gt; TCMT IO (Maybe (Bool, Term, Term)))
 -&gt; TCM [(Bool, Term, Term)])
-&gt; (ProblemConstraint -&gt; TCMT IO (Maybe (Bool, Term, Term)))
-&gt; TCM [(Bool, Term, Term)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680650686"><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621680650686"><span class="hs-identifier hs-var">eqc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621680650685"><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621680650685"><span class="hs-identifier hs-var">neqc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProblemConstraint -&gt; TCMT IO ProblemConstraint
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621680650686"><span class="hs-identifier hs-var">eqc</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Closure Constraint -&gt; Constraint
forall a. Closure a -&gt; a
</span><a href="Agda.TypeChecking.Monad.Base.html#clValue"><span class="hs-identifier hs-var hs-var">MB.clValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Constraint -&gt; Constraint)
-&gt; Closure Constraint -&gt; Constraint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint -&gt; Closure Constraint
</span><a href="Agda.TypeChecking.Monad.Base.html#theConstraint"><span class="hs-identifier hs-var hs-var">MB.theConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621680650685"><span class="hs-identifier hs-var">neqc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ValueCmp"><span class="hs-identifier hs-type">MB.ValueCmp</span></a></span><span> </span><span id="local-6989586621680650681"><span class="annot"><span class="annottext">Comparison
</span><a href="#local-6989586621680650681"><span class="hs-identifier hs-var">ineq</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompareAs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650680"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650680"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680650679"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650679"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-284"></span><span>      </span><span id="local-6989586621680650678"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650678"><span class="hs-identifier hs-var">ei</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasConstInfo m, HasOptions m, TermLike a) =&gt;
a -&gt; m a
</span><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier hs-var">etaContract</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650680"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-285"></span><span>      </span><span id="local-6989586621680650677"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650677"><span class="hs-identifier hs-var">ee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasConstInfo m, HasOptions m, TermLike a) =&gt;
a -&gt; m a
</span><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier hs-var">etaContract</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650679"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-286"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term)))
-&gt; Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Bool, Term, Term) -&gt; Maybe (Bool, Term, Term)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Comparison -&gt; Bool
</span><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-var">tomyIneq</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="#local-6989586621680650681"><span class="hs-identifier hs-var">ineq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650677"><span class="hs-identifier hs-var">ee</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650678"><span class="hs-identifier hs-var">ei</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><span class="annottext">Constraint
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, Term, Term)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="local-6989586621680651143"><span class="annot"><a href="Agda.Auto.Convert.html#copatternsNotImplemented"><span class="hs-identifier hs-type">copatternsNotImplemented</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680651143"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-290"></span><span id="copatternsNotImplemented"><span class="annot"><span class="annottext">copatternsNotImplemented :: TCM a
</span><a href="Agda.Auto.Convert.html#copatternsNotImplemented"><span class="hs-identifier hs-var hs-var">copatternsNotImplemented</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCM a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">MB.typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCM a) -&gt; TypeError -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotImplemented"><span class="hs-identifier hs-var">MB.NotImplemented</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgName -&gt; TypeError) -&gt; ArgName -&gt; TypeError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;The Agda synthesizer (Agsy) does not support copatterns yet&quot;</span></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span id="local-6989586621680650672"><span class="annot"><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-type">literalsNotImplemented</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650672"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-294"></span><span id="literalsNotImplemented"><span class="annot"><span class="annottext">literalsNotImplemented :: TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var hs-var">literalsNotImplemented</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCM a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">MB.typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCM a) -&gt; TypeError -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotImplemented"><span class="hs-identifier hs-var">MB.NotImplemented</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgName -&gt; TypeError) -&gt; ArgName -&gt; TypeError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-295"></span><span>  </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;The Agda synthesizer (Agsy) does not support literals yet&quot;</span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span id="local-6989586621680650670"><span class="annot"><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-type">hitsNotImplemented</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650670"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-298"></span><span id="hitsNotImplemented"><span class="annot"><span class="annottext">hitsNotImplemented :: TCM a
</span><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-var hs-var">hitsNotImplemented</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCM a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">MB.typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCM a) -&gt; TypeError -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotImplemented"><span class="hs-identifier hs-var">MB.NotImplemented</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgName -&gt; TypeError) -&gt; ArgName -&gt; TypeError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-299"></span><span>  </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;The Agda synthesizer (Agsy) does not support HITs yet&quot;</span></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-keyword">class</span><span> </span><span id="Conversion"><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-var">Conversion</span></a></span></span><span> </span><span id="local-6989586621680651315"><span class="annot"><a href="#local-6989586621680651315"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680651314"><span class="annot"><a href="#local-6989586621680651314"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680651313"><span class="annot"><a href="#local-6989586621680651313"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>  </span><span id="convert"><span class="annot"><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-type">convert</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680651314"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680651315"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680651313"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621680650666"><span class="annot"><span class="annottext">convert :: [Clause] -&gt; TOM [([Pat O], MExp O)]
</span><a href="#local-6989586621680650666"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Maybe ([Pat O], MExp O)] -&gt; [([Pat O], MExp O)])
-&gt; StateT S TCM [Maybe ([Pat O], MExp O)]
-&gt; TOM [([Pat O], MExp O)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[Maybe ([Pat O], MExp O)] -&gt; [([Pat O], MExp O)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">(StateT S TCM [Maybe ([Pat O], MExp O)] -&gt; TOM [([Pat O], MExp O)])
-&gt; ([Clause] -&gt; StateT S TCM [Maybe ([Pat O], MExp O)])
-&gt; [Clause]
-&gt; TOM [([Pat O], MExp O)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; StateT S TCM (Maybe ([Pat O], MExp O)))
-&gt; [Clause] -&gt; StateT S TCM [Maybe ([Pat O], MExp O)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; StateT S TCM (Maybe ([Pat O], MExp O))
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-308"></span><span>  </span><span id="local-6989586621680650664"><span class="annot"><span class="annottext">convert :: Clause -&gt; StateT S TCM (Maybe ([Pat O], MExp O))
</span><a href="#local-6989586621680650664"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621680650663"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650663"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- Jesper, 2016-07-28:</span><span>
</span><span id="line-310"></span><span>     </span><span class="hs-comment">-- I can't figure out if this should be the old or new</span><span>
</span><span id="line-311"></span><span>     </span><span class="hs-comment">-- clause body (i.e. relative to the positions of pattern variables or</span><span>
</span><span id="line-312"></span><span>     </span><span class="hs-comment">-- relative to the clauseTel). Both options pass the test suite, so I</span><span>
</span><span id="line-313"></span><span>     </span><span class="hs-comment">-- have the impression it doesn't actually matter.</span><span>
</span><span id="line-314"></span><span>     </span><span class="hs-comment">-- ALTERNATIVE CODE:</span><span>
</span><span id="line-315"></span><span>     </span><span class="hs-comment">-- perm = fromMaybe __IMPOSSIBLE__ $ IP.clausePerm cl</span><span>
</span><span id="line-316"></span><span>     </span><span class="hs-comment">-- body = applySubst (renamingR perm) $ I.clauseBody cl</span><span>
</span><span id="line-317"></span><span>        </span><span id="local-6989586621680650662"><span class="annot"><span class="annottext">body :: Maybe Term
</span><a href="#local-6989586621680650662"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var hs-var">I.clauseBody</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650663"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span id="local-6989586621680650660"><span class="annot"><span class="annottext">pats :: [Arg DeBruijnPattern]
</span><a href="#local-6989586621680650660"><span class="hs-identifier hs-var hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Arg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#clausePats"><span class="hs-identifier hs-var">I.clausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650663"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span id="local-6989586621680650658"><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621680650658"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Arg Pattern -&gt; StateT S TCM (Pat O))
-&gt; [Arg Pattern] -&gt; StateT S TCM [Pat O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Arg Pattern -&gt; StateT S TCM (Pat O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg DeBruijnPattern] -&gt; [Arg Pattern]
forall a b. LabelPatVars a b =&gt; b -&gt; a
</span><a href="Agda.Syntax.Internal.Pattern.html#unnumberPatVars"><span class="hs-identifier hs-var">IP.unnumberPatVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg DeBruijnPattern]
</span><a href="#local-6989586621680650660"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pattern"><span class="hs-identifier hs-type">I.Pattern</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>    </span><span id="local-6989586621680650656"><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621680650656"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; StateT S TCM (MExp O))
-&gt; Maybe Term -&gt; StateT S TCM (Maybe (MExp O))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; StateT S TCM (Maybe (MExp O)))
-&gt; StateT S TCM (Maybe Term) -&gt; StateT S TCM (Maybe (MExp O))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Maybe Term) -&gt; StateT S TCM (Maybe Term)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Term -&gt; TCMT IO (Maybe Term)
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621680650662"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><span class="annottext">Maybe ([Pat O], MExp O) -&gt; StateT S TCM (Maybe ([Pat O], MExp O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ([Pat O], MExp O) -&gt; StateT S TCM (Maybe ([Pat O], MExp O)))
-&gt; Maybe ([Pat O], MExp O)
-&gt; StateT S TCM (Maybe ([Pat O], MExp O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621680650658"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; ([Pat O], MExp O))
-&gt; Maybe (MExp O) -&gt; Maybe ([Pat O], MExp O)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621680650656"><span class="hs-identifier hs-var">body'</span></a></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pattern"><span class="hs-identifier hs-type">I.Pattern</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>  </span><span id="local-6989586621680650651"><span class="annot"><span class="annottext">convert :: Arg Pattern -&gt; StateT S TCM (Pat O)
</span><a href="#local-6989586621680650651"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621680650650"><span class="annot"><span class="annottext">Arg Pattern
</span><a href="#local-6989586621680650650"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Arg Pattern -&gt; Pattern
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">Cm.unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Pattern
</span><a href="#local-6989586621680650650"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">I.IApplyP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650647"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650647"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S TCM (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S TCM (Pat O)) -&gt; Pat O -&gt; StateT S TCM (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; Pat O
forall o. ArgName -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650647"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">I.VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650644"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650644"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S TCM (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S TCM (Pat O)) -&gt; Pat O -&gt; StateT S TCM (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; Pat O
forall o. ArgName -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650644"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">I.DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S TCM (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S TCM (Pat O)) -&gt; Pat O -&gt; StateT S TCM (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; Pat O
forall o. ArgName -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;_&quot;</span></span><span>
</span><span id="line-328"></span><span>      </span><span class="hs-comment">-- because Agda includes these when referring to variables in the body</span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">I.ConP</span></a></span><span> </span><span id="local-6989586621680650641"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650641"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650640"><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650640"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650639"><span class="annot"><span class="annottext">n :: QName
</span><a href="#local-6989586621680650639"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650641"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-331"></span><span>      </span><span id="local-6989586621680650638"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650638"><span class="hs-identifier hs-var">c</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650639"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-332"></span><span>      </span><span id="local-6989586621680650637"><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621680650637"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(NamedArg Pattern -&gt; StateT S TCM (Pat O))
-&gt; [NamedArg Pattern] -&gt; StateT S TCM [Pat O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Pattern -&gt; StateT S TCM (Pat O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Pattern -&gt; StateT S TCM (Pat O))
-&gt; (NamedArg Pattern -&gt; Arg Pattern)
-&gt; NamedArg Pattern
-&gt; StateT S TCM (Pat O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Named NamedName Pattern -&gt; Pattern)
-&gt; NamedArg Pattern -&gt; Arg Pattern
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Named NamedName Pattern -&gt; Pattern
forall name a. Named name a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedThing"><span class="hs-identifier hs-var hs-var">Cm.namedThing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650640"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-333"></span><span>      </span><span id="local-6989586621680650635"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650635"><span class="hs-identifier hs-var">def</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S TCM Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S TCM Definition)
-&gt; TCM Definition -&gt; StateT S TCM Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650639"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-334"></span><span>      </span><span id="local-6989586621680650634"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650634"><span class="hs-identifier hs-var">cc</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650638"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-335"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650633"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650633"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; Maybe (Int, [Arg QName])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; Maybe (Int, [Arg QName])) -&gt; O -&gt; Maybe (Int, [Arg QName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650634"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-336"></span><span>      </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S TCM (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S TCM (Pat O)) -&gt; Pat O -&gt; StateT S TCM (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; [Pat O] -&gt; Pat O
forall o. ConstRef o -&gt; [Pat o] -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatConApp"><span class="hs-identifier hs-var">PatConApp</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650638"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Pat O -&gt; [Pat O]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650633"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="annot"><span class="annottext">Pat O
forall o. Pat o
</span><a href="Agda.Auto.Syntax.html#PatExp"><span class="hs-identifier hs-var">PatExp</span></a></span><span> </span><span class="annot"><span class="annottext">[Pat O] -&gt; [Pat O] -&gt; [Pat O]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621680650637"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-comment">-- UNSUPPORTED CASES</span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">I.ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Pat O) -&gt; StateT S TCM (Pat O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Pat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#copatternsNotImplemented"><span class="hs-identifier hs-var">copatternsNotImplemented</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">I.LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Pat O) -&gt; StateT S TCM (Pat O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Pat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var">literalsNotImplemented</span></a></span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">I.DefP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Pat O) -&gt; StateT S TCM (Pat O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Pat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-var">hitsNotImplemented</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-344"></span><span>  </span><span id="local-6989586621680650625"><span class="annot"><span class="annottext">convert :: Type -&gt; StateT S TCM (MExp O)
</span><a href="#local-6989586621680650625"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650624"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650624"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650624"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-comment">-- sort info is thrown away</span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-347"></span><span>  </span><span id="local-6989586621680650622"><span class="annot"><span class="annottext">convert :: Term -&gt; StateT S TCM (MExp O)
</span><a href="#local-6989586621680650622"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621680650621"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650621"><span class="hs-identifier hs-var">v0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#unSpine"><span class="hs-identifier hs-var">I.unSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650621"><span class="hs-identifier hs-var">v0</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-349"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650618"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650618"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680650617"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650617"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-350"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650616"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650616"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe [Arg Term]
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">I.allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650617"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-351"></span><span>        </span><span id="local-6989586621680650614"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650614"><span class="hs-identifier hs-var">as'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; StateT S TCM (MArgList O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650616"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-352"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elr O
forall o. Int -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650618"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650614"><span class="hs-identifier hs-var">as'</span></a></span><span>
</span><span id="line-353"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span id="local-6989586621680650608"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650608"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621680650607"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650607"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-354"></span><span>        </span><span id="local-6989586621680650606"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650606"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650607"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Abs (MExp O) -&gt; Exp O
forall o. Hiding -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650608"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp O -&gt; Abs (MExp O)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgName -&gt; MId) -&gt; ArgName -&gt; MId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs Term -&gt; ArgName
forall a. Abs a -&gt; ArgName
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var hs-var">I.absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650607"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650606"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>      </span><span id="local-6989586621680650601"><span class="annot"><span class="annottext">t :: Term
</span><a href="#local-6989586621680650601"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-357"></span><span>        </span><span id="local-6989586621680650599"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650599"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Term -&gt; StateT S TCM Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; StateT S TCM Term)
-&gt; TCMT IO Term -&gt; StateT S TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Term -&gt; m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#constructorForm"><span class="hs-identifier hs-var">constructorForm</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650601"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-358"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650599"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-359"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO (MExp O) -&gt; StateT S TCM (MExp O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO (MExp O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var">literalsNotImplemented</span></a></span><span>
</span><span id="line-360"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650599"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">I.Level</span></a></span><span> </span><span id="local-6989586621680650597"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621680650597"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; StateT S TCM (MExp O))
-&gt; StateT S TCM Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Term -&gt; StateT S TCM Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Level -&gt; TCMT IO Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Level -&gt; m Term
</span><a href="Agda.TypeChecking.Level.html#reallyUnLevelView"><span class="hs-identifier hs-var">reallyUnLevelView</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621680650597"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621680650596"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650596"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680650595"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650595"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-363"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650594"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650594"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe [Arg Term]
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">I.allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650595"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span id="local-6989586621680650593"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650593"><span class="hs-identifier hs-var">c</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650596"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span id="local-6989586621680650592"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650592"><span class="hs-identifier hs-var">as'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; StateT S TCM (MArgList O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650594"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; Elr O
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650593"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650592"><span class="hs-identifier hs-var">as'</span></a></span><span>
</span><span id="line-367"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621680650589"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650589"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621680650588"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621680650588"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621680650587"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650587"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-368"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650586"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650586"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe [Arg Term]
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">I.allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650587"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-369"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650585"><span class="annot"><span class="annottext">name :: QName
</span><a href="#local-6989586621680650585"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650589"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-370"></span><span>        </span><span id="local-6989586621680650584"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650584"><span class="hs-identifier hs-var">c</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650585"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-371"></span><span>        </span><span id="local-6989586621680650583"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650583"><span class="hs-identifier hs-var">as'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; StateT S TCM (MArgList O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650586"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-372"></span><span>        </span><span id="local-6989586621680650582"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621680650582"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S TCM Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S TCM Definition)
-&gt; TCM Definition -&gt; StateT S TCM Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650585"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-373"></span><span>        </span><span id="local-6989586621680650581"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650581"><span class="hs-identifier hs-var">cc</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650584"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-374"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650580"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650580"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; Maybe (Int, [Arg QName])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; Maybe (Int, [Arg QName])) -&gt; O -&gt; Maybe (Int, [Arg QName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650581"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; Elr O
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650584"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MArgList O -&gt; Int -&gt; MArgList O)
-&gt; MArgList O -&gt; [Int] -&gt; MArgList O
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650578"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650578"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgList O -&gt; MArgList O) -&gt; ArgList O -&gt; MArgList O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MArgList O -&gt; ArgList O
forall o. MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-var">ALConPar</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650578"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650583"><span class="hs-identifier hs-var">as'</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650580"><span class="hs-identifier hs-var">npar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">I.Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650575"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650575"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650574"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650574"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650573"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650573"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-377"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650572"><span class="annot"><span class="annottext">y :: Type
</span><a href="#local-6989586621680650572"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650573"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-378"></span><span>            </span><span id="local-6989586621680650571"><span class="annot"><span class="annottext">name :: ArgName
</span><a href="#local-6989586621680650571"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; ArgName
forall a. Abs a -&gt; ArgName
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var hs-var">I.absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650573"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-379"></span><span>        </span><span id="local-6989586621680650570"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650570"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650574"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-380"></span><span>        </span><span id="local-6989586621680650569"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650569"><span class="hs-identifier hs-var">y'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650572"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-381"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; Hiding -&gt; Bool -&gt; MExp O -&gt; Abs (MExp O) -&gt; Exp O
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650575"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Bool
forall a. Free a =&gt; Int -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-identifier hs-var">Free.freeIn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650572"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650570"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp O -&gt; Abs (MExp O)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650571"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650569"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ClosedLevel"><span class="hs-identifier hs-type">I.ClosedLevel</span></a></span><span> </span><span id="local-6989586621680650564"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680650564"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; Exp O) -&gt; Sort -&gt; Exp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Sort
</span><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-var">Set</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Sort) -&gt; Int -&gt; Sort
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680650564"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-383"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span>
</span><span id="line-384"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">I.Dummy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span>
</span><span id="line-385"></span><span>      </span><span id="local-6989586621680650559"><span class="annot"><span class="annottext">t :: Term
</span><a href="#local-6989586621680650559"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>        </span><span id="local-6989586621680650558"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650558"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Term -&gt; StateT S TCM Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; StateT S TCM Term)
-&gt; TCMT IO Term -&gt; StateT S TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a (m :: * -&gt; *). (Instantiate a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#instantiate"><span class="hs-identifier hs-var">instantiate</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650559"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-387"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650558"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-388"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span> </span><span id="local-6989586621680650557"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650557"><span class="hs-identifier hs-var">mid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-389"></span><span>            </span><span id="local-6989586621680650556"><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621680650556"><span class="hs-identifier hs-var">mcurmeta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Maybe MetaId) -&gt; TOM (Maybe MetaId)
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var hs-var">sCurMeta</span></a></span><span>
</span><span id="line-390"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621680650556"><span class="hs-identifier hs-var">mcurmeta</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-391"></span><span>              </span><span class="annot"><span class="annottext">Maybe MetaId
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; StateT S TCM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650555"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650555"><span class="hs-identifier hs-var">curmeta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-393"></span><span>                </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S TCM ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S TCM ()) -&gt; (S -&gt; S) -&gt; StateT S TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680650554"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650554"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650554"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map
   MetaId
   (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]),
     [MetaId]))
-&gt; MetaId
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.adjust</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680650553"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650553"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650552"><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><a href="#local-6989586621680650552"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650551"><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621680650551"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650553"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><a href="#local-6989586621680650552"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650557"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [MetaId] -&gt; [MetaId]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621680650551"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650555"><span class="hs-identifier hs-var">curmeta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621680650554"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-394"></span><span>            </span><span id="local-6989586621680650550"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650550"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650557"><span class="hs-identifier hs-var">mid</span></a></span><span>
</span><span id="line-395"></span><span>            </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MExp O
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621680650550"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-396"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650558"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-397"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">I.DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S TCM (MExp O))
-&gt; MExp O -&gt; StateT S TCM (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">Exp O
forall o. Exp o
</span><a href="Agda.Auto.Syntax.html#dontCare"><span class="hs-identifier hs-var">dontCare</span></a></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span id="local-6989586621680650546"><span id="local-6989586621680650547"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650547"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650546"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650547"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680650546"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-400"></span><span>  </span><span id="local-6989586621680650544"><span class="annot"><span class="annottext">convert :: Arg a -&gt; TOM (Hiding, b)
</span><a href="#local-6989586621680650544"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621680650543"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650543"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621680650542"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650542"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650543"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(b -&gt; (Hiding, b)) -&gt; StateT S TCM b -&gt; TOM (Hiding, b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; StateT S TCM b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650542"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">I.Args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-403"></span><span>  </span><span id="local-6989586621680650539"><span class="annot"><span class="annottext">convert :: [Arg Term] -&gt; StateT S TCM (MArgList O)
</span><a href="#local-6989586621680650539"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621680650538"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650538"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgList O -&gt; MArgList O)
-&gt; ([(Hiding, MExp O)] -&gt; ArgList O)
-&gt; [(Hiding, MExp O)]
-&gt; MArgList O
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Hiding, MExp O) -&gt; ArgList O -&gt; ArgList O)
-&gt; ArgList O -&gt; [(Hiding, MExp O)] -&gt; ArgList O
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650536"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650536"><span class="hs-identifier hs-var">hid</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680650535"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650535"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; MExp O -&gt; MArgList O -&gt; ArgList O
forall o. Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-var">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650536"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650535"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(MArgList O -&gt; ArgList O)
-&gt; (ArgList O -&gt; MArgList O) -&gt; ArgList O -&gt; ArgList O
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ArgList O
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>
</span><span id="line-404"></span><span>               </span><span class="annot"><span class="annottext">([(Hiding, MExp O)] -&gt; MArgList O)
-&gt; StateT S TCM [(Hiding, MExp O)] -&gt; StateT S TCM (MArgList O)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; StateT S TCM (Hiding, MExp O))
-&gt; [Arg Term] -&gt; StateT S TCM [(Hiding, MExp O)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; StateT S TCM (Hiding, MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650538"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="annot"><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-type">tomyIneq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Comparison"><span class="hs-identifier hs-type">MB.Comparison</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-407"></span><span id="tomyIneq"><span class="annot"><span class="annottext">tomyIneq :: Comparison -&gt; Bool
</span><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-var hs-var">tomyIneq</span></a></span></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="Agda.TypeChecking.Monad.Base.html#CmpEq"><span class="hs-identifier hs-var">MB.CmpEq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-408"></span><span class="annot"><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-var">tomyIneq</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="Agda.TypeChecking.Monad.Base.html#CmpLeq"><span class="hs-identifier hs-var">MB.CmpLeq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-type">fmType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-413"></span><span id="fmType"><span class="annot"><span class="annottext">fmType :: MetaId -&gt; Type -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-var hs-var">fmType</span></a></span></span><span> </span><span id="local-6989586621680650529"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650529"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650528"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650528"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650529"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650528"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-type">fmExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-416"></span><span id="fmExp"><span class="annot"><span class="annottext">fmExp :: MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var hs-var">fmExp</span></a></span></span><span> </span><span id="local-6989586621680650527"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650527"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650526"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650526"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var">fmExps</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650527"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; [Arg Term]
forall t. [Elim' t] -&gt; [Arg t]
</span><a href="Agda.Syntax.Internal.Elim.html#argsFromElims"><span class="hs-identifier hs-var">I.argsFromElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650526"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-417"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650523"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650523"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650522"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650522"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650523"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Abs a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unAbs"><span class="hs-identifier hs-var hs-var">I.unAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650522"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650521"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650521"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-419"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650520"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650520"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">I.Level</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-type">I.Max</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650518"><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621680650518"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlusLevel' Term -&gt; Bool) -&gt; [PlusLevel' Term] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; PlusLevel' Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmLevel"><span class="hs-identifier hs-var">fmLevel</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650520"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621680650518"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-420"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650515"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650515"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650514"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650514"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var">fmExps</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650515"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; [Arg Term]
forall t. [Elim' t] -&gt; [Arg t]
</span><a href="Agda.Syntax.Internal.Elim.html#argsFromElims"><span class="hs-identifier hs-var">I.argsFromElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650514"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-421"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650513"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650513"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650512"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621680650512"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621680650511"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650511"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var">fmExps</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650513"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; [Arg Term]
forall t. [Elim' t] -&gt; [Arg t]
</span><a href="Agda.Syntax.Internal.Elim.html#argsFromElims"><span class="hs-identifier hs-var">I.argsFromElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650511"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-422"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650510"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650510"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span id="local-6989586621680650509"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650509"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680650508"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650508"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Type -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-var">fmType</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650510"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">I.unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650509"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Type -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-var">fmType</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650510"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Abs a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unAbs"><span class="hs-identifier hs-var hs-var">I.unAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650508"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650507"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650507"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-424"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650506"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650506"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span> </span><span id="local-6989586621680650505"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650505"><span class="hs-identifier hs-var">mid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650505"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; MetaId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650506"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-425"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621680650504"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650504"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">I.DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-426"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">I.Dummy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-type">fmExps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">I.Args</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-429"></span><span id="fmExps"><span class="annot"><span class="annottext">fmExps :: MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var hs-var">fmExps</span></a></span></span><span> </span><span id="local-6989586621680650503"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650503"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621680650502"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650502"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650503"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Bool) -&gt; (Arg Term -&gt; Term) -&gt; Arg Term -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">Cm.unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621680650502"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmLevel"><span class="hs-identifier hs-type">fmLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PlusLevel"><span class="hs-identifier hs-type">I.PlusLevel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-432"></span><span id="fmLevel"><span class="annot"><span class="annottext">fmLevel :: MetaId -&gt; PlusLevel' Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmLevel"><span class="hs-identifier hs-var hs-var">fmLevel</span></a></span></span><span> </span><span id="local-6989586621680650500"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650500"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Plus"><span class="hs-identifier hs-type">I.Plus</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650498"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650498"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650500"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650498"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="annot"><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-type">icnvh</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">Cm.ArgInfo</span></a></span><span>
</span><span id="line-437"></span><span id="icnvh"><span class="annot"><span class="annottext">icnvh :: Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var hs-var">icnvh</span></a></span></span><span> </span><span id="local-6989586621680650496"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650496"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo -&gt; ArgInfo
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">Cm.setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650496"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo) -&gt; ArgInfo -&gt; ArgInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-438"></span><span>          </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">Cm.setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621680650493"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo) -&gt; ArgInfo -&gt; ArgInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-439"></span><span>          </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="Agda.Syntax.Common.html#defaultArgInfo"><span class="hs-identifier hs-var">Cm.defaultArgInfo</span></a></span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-comment">-- Andreas, 2017-01-18, issue #819.</span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-comment">-- Visible arguments are made UserWritten,</span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-comment">-- otherwise they might not be printed in patterns.</span><span>
</span><span id="line-444"></span><span>    </span><span id="local-6989586621680650493"><span class="annot"><span class="annottext">o :: Origin
</span><a href="#local-6989586621680650493"><span class="hs-identifier hs-var hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650496"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-445"></span><span>          </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#UserWritten"><span class="hs-identifier hs-var">Cm.UserWritten</span></a></span><span>
</span><span id="line-446"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Common.html#Instance"><span class="hs-identifier hs-type">Instance</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Cm.Inserted</span></a></span><span>
</span><span id="line-447"></span><span>          </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Cm.Inserted</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span id="local-6989586621680650485"><span id="local-6989586621680650486"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650486"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650485"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650486"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680650485"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-452"></span><span>  </span><span id="local-6989586621680650483"><span class="annot"><span class="annottext">convert :: MM a (RefInfo O) -&gt; MOT b
</span><a href="#local-6989586621680650483"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621680650482"><span class="annot"><span class="annottext">MM a (RefInfo O)
</span><a href="#local-6989586621680650482"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MM a (RefInfo O)
</span><a href="#local-6989586621680650482"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-453"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680650481"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650481"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; MOT b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650481"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span> </span><span id="local-6989586621680650480"><span class="annot"><span class="annottext">Metavar a (RefInfo O)
</span><a href="#local-6989586621680650480"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>      </span><span id="local-6989586621680650479"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621680650479"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe a) -&gt; ExceptT ArgName IO (Maybe a)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe a) -&gt; ExceptT ArgName IO (Maybe a))
-&gt; IO (Maybe a) -&gt; ExceptT ArgName IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe a) -&gt; IO (Maybe a)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">(IORef (Maybe a) -&gt; IO (Maybe a))
-&gt; IORef (Maybe a) -&gt; IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar a (RefInfo O) -&gt; IORef (Maybe a)
forall a blk. Metavar a blk -&gt; IORef (Maybe a)
</span><a href="Agda.Auto.NarrowingSearch.html#mbind"><span class="hs-identifier hs-var hs-var">mbind</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar a (RefInfo O)
</span><a href="#local-6989586621680650480"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-456"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621680650479"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-457"></span><span>        </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; MOT b
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;meta not bound&quot;</span></span><span>
</span><span id="line-458"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650476"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650476"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; MOT b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650476"><span class="hs-identifier hs-var">a</span></a></span></span></span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span id="local-6989586621680650474"><span id="local-6989586621680650475"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650475"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650474"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650475"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">I.Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650474"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621680650472"><span class="annot"><span class="annottext">convert :: Abs a -&gt; MOT (Abs b)
</span><a href="#local-6989586621680650472"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621680650471"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680650471"><span class="hs-identifier hs-var">mid</span></a></span></span><span> </span><span id="local-6989586621680650470"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650470"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; b -&gt; Abs b
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650469"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(b -&gt; Abs b) -&gt; ExceptT ArgName IO b -&gt; MOT (Abs b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; ExceptT ArgName IO b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650470"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-462"></span><span>    </span><span id="local-6989586621680650469"><span class="annot"><span class="annottext">id :: ArgName
</span><a href="#local-6989586621680650469"><span class="hs-identifier hs-var hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680650471"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-463"></span><span>           </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;x&quot;</span></span><span>
</span><span id="line-464"></span><span>           </span><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621680650467"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650467"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650467"><span class="hs-identifier hs-var">id</span></a></span></span></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-467"></span><span>  </span><span id="local-6989586621680650465"><span class="annot"><span class="annottext">convert :: Exp O -&gt; MOT Type
</span><a href="#local-6989586621680650465"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621680650464"><span class="annot"><span class="annottext">Exp O
</span><a href="#local-6989586621680650464"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">I.El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; ExceptT ArgName IO Term -&gt; MOT Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Exp O
</span><a href="#local-6989586621680650464"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-468"></span><span>              </span><span class="hs-comment">-- 0 is arbitrary, sort not read by Agda when reifying</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-471"></span><span>  </span><span id="local-6989586621680650462"><span class="annot"><span class="annottext">convert :: Exp O -&gt; ExceptT ArgName IO Term
</span><a href="#local-6989586621680650462"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-472"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680650461"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650461"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650460"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650460"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650460"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650461"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span id="local-6989586621680650458"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650458"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650457"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650457"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-474"></span><span>      </span><span id="local-6989586621680650456"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650456"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650458"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-475"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650455"><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621680650455"><span class="hs-identifier hs-var">iscon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650454"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650454"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650456"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-476"></span><span class="hs-comment">{-
   case iscon of
      Just n -&gt; do
        v &lt;- getConTerm name -- We are not in TCM
        frommyExps n as v
-}</span><span>
</span><span id="line-482"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680650453"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650453"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650452"><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="#local-6989586621680650452"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621680650455"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-483"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650451"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650451"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680650450"><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621680650450"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650451"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680650449"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650449"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">I.Con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; DataOrRecord -&gt; Induction -&gt; [Arg QName] -&gt; ConHead
</span><a href="Agda.Syntax.Internal.html#ConHead"><span class="hs-identifier hs-var">I.ConHead</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650449"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-var">I.IsData</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#Inductive"><span class="hs-identifier hs-var">Cm.Inductive</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621680650450"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="Agda.Syntax.Common.html#ConOSystem"><span class="hs-identifier hs-var">Cm.ConOSystem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>                         </span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680650444"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650444"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680650443"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650443"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650444"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650443"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650453"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650457"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="#local-6989586621680650452"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650454"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-486"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621680650442"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650442"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680650441"><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621680650441"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Abs Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-var">I.Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650442"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Abs Term -&gt; Term)
-&gt; ExceptT ArgName IO (Abs Term) -&gt; ExceptT ArgName IO Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O) -&gt; ExceptT ArgName IO (Abs Term)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621680650441"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-487"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650440"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650440"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650439"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650439"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680650438"><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621680650438"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-488"></span><span>      </span><span id="local-6989586621680650437"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650437"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; MOT Type
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650439"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-489"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650436"><span class="annot"><span class="annottext">dom :: Dom Type
</span><a href="#local-6989586621680650436"><span class="hs-identifier hs-var hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Dom Type
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">I.defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650437"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650440"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Type -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-var">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680650436"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Type -&gt; Term)
-&gt; ExceptT ArgName IO (Abs Type) -&gt; ExceptT ArgName IO Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O) -&gt; ExceptT ArgName IO (Abs Type)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621680650438"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-491"></span><span>   </span><span class="hs-comment">-- maybe have case for Pi where possdep is False which produces Fun (and has to unweaken y), return $ I.Fun (Cm.Arg (icnvh hid) x') y'</span><span>
</span><span id="line-492"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span id="local-6989586621680650434"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650434"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; ExceptT ArgName IO Term)
-&gt; Term -&gt; ExceptT ArgName IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-var">I.Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650434"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-494"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; ExceptT ArgName IO Term)
-&gt; Term -&gt; ExceptT ArgName IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-var">I.Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- hoping it's thrown away</span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span> </span><span id="local-6989586621680650431"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650431"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; ExceptT ArgName IO Term)
-&gt; Term -&gt; ExceptT ArgName IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Abs Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-var">I.Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650431"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>                               </span><span class="annot"><span class="annottext">(Abs Term -&gt; Term) -&gt; Abs Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; Term -&gt; Abs Term
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-var">abslamvarname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="annot"><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-type">frommyExps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span>
</span><span id="line-500"></span><span id="frommyExps"><span class="annot"><span class="annottext">frommyExps :: Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var hs-var">frommyExps</span></a></span></span><span> </span><span id="local-6989586621680650428"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650428"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span> </span><span id="local-6989586621680650427"><span class="annot"><span class="annottext">Metavar (ArgList O) (RefInfo O)
</span><a href="#local-6989586621680650427"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650426"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650426"><span class="hs-identifier hs-var">trm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-501"></span><span> </span><span id="local-6989586621680650425"><span class="annot"><span class="annottext">Maybe (ArgList O)
</span><a href="#local-6989586621680650425"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe (ArgList O)) -&gt; ExceptT ArgName IO (Maybe (ArgList O))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe (ArgList O)) -&gt; ExceptT ArgName IO (Maybe (ArgList O)))
-&gt; IO (Maybe (ArgList O)) -&gt; ExceptT ArgName IO (Maybe (ArgList O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe (ArgList O)) -&gt; IO (Maybe (ArgList O))
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">(IORef (Maybe (ArgList O)) -&gt; IO (Maybe (ArgList O)))
-&gt; IORef (Maybe (ArgList O)) -&gt; IO (Maybe (ArgList O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar (ArgList O) (RefInfo O) -&gt; IORef (Maybe (ArgList O))
forall a blk. Metavar a blk -&gt; IORef (Maybe a)
</span><a href="Agda.Auto.NarrowingSearch.html#mbind"><span class="hs-identifier hs-var hs-var">mbind</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (ArgList O) (RefInfo O)
</span><a href="#local-6989586621680650427"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-502"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ArgList O)
</span><a href="#local-6989586621680650425"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-503"></span><span>  </span><span class="annot"><span class="annottext">Maybe (ArgList O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; ExceptT ArgName IO Term
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;meta not bound&quot;</span></span><span>
</span><span id="line-504"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650424"><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621680650424"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650428"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621680650424"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650426"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-505"></span><span class="annot"><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span id="local-6989586621680650423"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650423"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680650422"><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621680650422"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650421"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650421"><span class="hs-identifier hs-var">trm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-506"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621680650422"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-507"></span><span>  </span><span class="annot"><span class="annottext">ArgList O
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650421"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-508"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650420"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650420"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650423"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650423"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650420"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650421"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-509"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span id="local-6989586621680650418"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650418"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680650417"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650417"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680650416"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650416"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-510"></span><span>   </span><span id="local-6989586621680650415"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650415"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650417"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-511"></span><span>   </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650423"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650416"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621680650414"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650418"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650415"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650421"><span class="hs-identifier hs-var">trm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-comment">-- Andreas, 2013-10-19 TODO: restore postfix projections</span><span>
</span><span id="line-514"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span> </span><span id="local-6989586621680650412"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650412"><span class="hs-identifier hs-var">eas</span></a></span></span><span> </span><span id="local-6989586621680650411"><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621680650411"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621680650410"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650410"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680650409"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650409"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-515"></span><span>   </span><span id="local-6989586621680650408"><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621680650408"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MM (ConstRef O) (RefInfo O))
-&gt; ExceptT ArgName IO (MM (ConstRef O) (RefInfo O))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (MM (ConstRef O) (RefInfo O))
 -&gt; ExceptT ArgName IO (MM (ConstRef O) (RefInfo O)))
-&gt; IO (MM (ConstRef O) (RefInfo O))
-&gt; ExceptT ArgName IO (MM (ConstRef O) (RefInfo O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O) -&gt; IO (MM (ConstRef O) (RefInfo O))
forall a blk. MM a blk -&gt; MetaEnv (MM a blk)
</span><a href="Agda.Auto.NarrowingSearch.html#expandbind"><span class="hs-identifier hs-var">expandbind</span></a></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621680650411"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-516"></span><span>   </span><span id="local-6989586621680650406"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650406"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621680650408"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-517"></span><span>            </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680650405"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650405"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; ExceptT ArgName IO (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650405"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-518"></span><span>            </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; ExceptT ArgName IO (ConstRef O)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;meta not bound&quot;</span></span><span>
</span><span id="line-519"></span><span>   </span><span id="local-6989586621680650404"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650404"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650406"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-520"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650403"><span class="annot"><span class="annottext">name :: QName
</span><a href="#local-6989586621680650403"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; QName
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; QName) -&gt; O -&gt; QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650404"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-521"></span><span>   </span><span id="local-6989586621680650402"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650402"><span class="hs-identifier hs-var">trm2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650412"><span class="hs-identifier hs-var">eas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650403"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>   </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650409"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621680650414"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650410"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650421"><span class="hs-identifier hs-var">trm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650402"><span class="hs-identifier hs-var">trm2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621680650401"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650401"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650423"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT ArgName IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650423"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621680650401"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650421"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-525"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-526"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-527"></span><span>  </span><span id="local-6989586621680650414"><span class="annot"><span class="annottext">addend :: Arg Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621680650414"><span class="hs-identifier hs-var hs-var">addend</span></a></span></span><span> </span><span id="local-6989586621680650400"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680650400"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650399"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650399"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680650398"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650398"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650399"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650398"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Elims -&gt; Elims
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim' Term
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680650400"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>  </span><span class="annot"><a href="#local-6989586621680650414"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span id="local-6989586621680650397"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680650397"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621680650396"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650396"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680650395"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621680650395"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621680650394"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650394"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">I.Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650396"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621680650395"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650394"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Elims -&gt; Elims
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim' Term
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680650397"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>  </span><span class="annot"><a href="#local-6989586621680650414"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span id="local-6989586621680650393"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680650393"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621680650392"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650392"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680650391"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650391"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650392"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650391"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Elims -&gt; Elims
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim' Term
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680650393"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>  </span><span class="annot"><a href="#local-6989586621680650414"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="hs-comment">-- --------------------------------</span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="annot"><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-type">abslamvarname</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-535"></span><span id="abslamvarname"><span class="annot"><span class="annottext">abslamvarname :: ArgName
</span><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-var hs-var">abslamvarname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-string">&quot;\0absurdlambda&quot;</span></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="annot"><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-type">modifyAbstractExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-538"></span><span id="modifyAbstractExpr"><span class="annot"><span class="annottext">modifyAbstractExpr :: Expr -&gt; Expr
</span><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-var hs-var">modifyAbstractExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-539"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-540"></span><span>  </span><span id="local-6989586621680650389"><span class="annot"><span class="annottext">f :: Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#App"><span class="hs-identifier hs-type">A.App</span></a></span><span> </span><span id="local-6989586621680650387"><span class="annot"><span class="annottext">AppInfo
</span><a href="#local-6989586621680650387"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680650386"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650386"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621680650385"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650385"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-type">Cm.Named</span></a></span><span> </span><span id="local-6989586621680650383"><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621680650383"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650382"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650382"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><span class="annottext">AppInfo -&gt; Expr -&gt; Arg (Named_ Expr) -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#App"><span class="hs-identifier hs-var">A.App</span></a></span><span> </span><span class="annot"><span class="annottext">AppInfo
</span><a href="#local-6989586621680650387"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650386"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Named_ Expr -&gt; Arg (Named_ Expr)
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650385"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NamedName -&gt; Expr -&gt; Named_ Expr
forall name a. Maybe name -&gt; a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-var">Cm.Named</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621680650383"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650382"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>  </span><span class="annot"><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-type">A.Lam</span></a></span><span> </span><span id="local-6989586621680650380"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650380"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#DomainFree"><span class="hs-identifier hs-type">A.DomainFree</span></a></span><span> </span><span class="annot"><span class="annottext">TacticAttr
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650378"><span class="annot"><span class="annottext">NamedArg Binder
</span><a href="#local-6989586621680650378"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Binder"><span class="hs-identifier hs-type">A.Binder</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Pattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#BindName"><span class="hs-identifier hs-type">A.BindName</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">unBind :: BindName -&gt; Name
</span><a href="Agda.Syntax.Abstract.html#unBind"><span class="hs-identifier hs-var">unBind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650374"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680650374"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamedArg Binder -&gt; Binder
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">Cm.namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Binder
</span><a href="#local-6989586621680650378"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-544"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; ArgName
forall a. Pretty a =&gt; a -&gt; ArgName
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#nameConcrete"><span class="hs-identifier hs-var hs-var">A.nameConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680650374"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; ArgName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-var">abslamvarname</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>        </span><span class="annot"><span class="annottext">ExprInfo -&gt; Hiding -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#AbsurdLam"><span class="hs-identifier hs-var">A.AbsurdLam</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650380"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Hiding -&gt; Expr) -&gt; Hiding -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamedArg Binder -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">Cm.getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Binder
</span><a href="#local-6989586621680650378"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-546"></span><span>  </span><span class="annot"><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-type">A.Lam</span></a></span><span> </span><span id="local-6989586621680650370"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650370"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680650369"><span class="annot"><span class="annottext">LamBinding
</span><a href="#local-6989586621680650369"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680650368"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650368"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; LamBinding -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-var">A.Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650370"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">LamBinding
</span><a href="#local-6989586621680650369"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650368"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>  </span><span class="annot"><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Rec"><span class="hs-identifier hs-type">A.Rec</span></a></span><span> </span><span id="local-6989586621680650366"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650366"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680650365"><span class="annot"><span class="annottext">RecordAssigns
</span><a href="#local-6989586621680650365"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; RecordAssigns -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Rec"><span class="hs-identifier hs-var">A.Rec</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650366"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either Assign ModuleName -&gt; Either Assign ModuleName)
-&gt; RecordAssigns -&gt; RecordAssigns
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Assign -&gt; Assign)
-&gt; Either Assign ModuleName -&gt; Either Assign ModuleName
forall a c b. (a -&gt; c) -&gt; Either a b -&gt; Either c b
</span><a href="Agda.Utils.Either.html#mapLeft"><span class="hs-identifier hs-var">mapLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Expr Assign -&gt; LensMap Expr Assign
forall i o. Lens' i o -&gt; LensMap i o
</span><a href="Agda.Utils.Lens.html#over"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Lens' a (FieldAssignment' a)
Lens' Expr Assign
</span><a href="Agda.Syntax.Concrete.html#exprFieldA"><span class="hs-identifier hs-var">exprFieldA</span></a></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RecordAssigns
</span><a href="#local-6989586621680650365"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>  </span><span class="annot"><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#RecUpdate"><span class="hs-identifier hs-type">A.RecUpdate</span></a></span><span> </span><span id="local-6989586621680650361"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650361"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680650360"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650360"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680650359"><span class="annot"><span class="annottext">Assigns
</span><a href="#local-6989586621680650359"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; Expr -&gt; Assigns -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#RecUpdate"><span class="hs-identifier hs-var">A.RecUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621680650361"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650360"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Assign -&gt; Assign) -&gt; Assigns -&gt; Assigns
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Expr Assign -&gt; LensMap Expr Assign
forall i o. Lens' i o -&gt; LensMap i o
</span><a href="Agda.Utils.Lens.html#over"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Lens' a (FieldAssignment' a)
Lens' Expr Assign
</span><a href="Agda.Syntax.Concrete.html#exprFieldA"><span class="hs-identifier hs-var">exprFieldA</span></a></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Assigns
</span><a href="#local-6989586621680650359"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-549"></span><span>  </span><span class="annot"><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#ScopedExpr"><span class="hs-identifier hs-type">A.ScopedExpr</span></a></span><span> </span><span id="local-6989586621680650357"><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621680650357"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680650356"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650356"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#ScopedExpr"><span class="hs-identifier hs-var">A.ScopedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621680650357"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650356"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>  </span><span class="annot"><a href="#local-6989586621680650389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680650355"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650355"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650355"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="annot"><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-type">modifyAbstractClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span>
</span><span id="line-553"></span><span id="modifyAbstractClause"><span class="annot"><span class="annottext">modifyAbstractClause :: Clause -&gt; Clause
</span><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-var hs-var">modifyAbstractClause</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span> </span><span id="local-6989586621680650352"><span class="annot"><span class="annottext">LHS
</span><a href="#local-6989586621680650352"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621680650351"><span class="annot"><span class="annottext">[ProblemEq]
</span><a href="#local-6989586621680650351"><span class="hs-identifier hs-var">spats</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#RHS"><span class="hs-identifier hs-type">A.RHS</span></a></span><span> </span><span id="local-6989586621680650349"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650349"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680650348"><span class="annot"><span class="annottext">Maybe Expr
</span><a href="#local-6989586621680650348"><span class="hs-identifier hs-var">mc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650347"><span class="annot"><span class="annottext">WhereDeclarations
</span><a href="#local-6989586621680650347"><span class="hs-identifier hs-var">decls</span></a></span></span><span> </span><span id="local-6989586621680650346"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650346"><span class="hs-identifier hs-var">catchall</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-554"></span><span>  </span><span class="annot"><span class="annottext">LHS -&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause
forall lhs.
lhs
-&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause' lhs
</span><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-var">A.Clause</span></a></span><span> </span><span class="annot"><span class="annottext">LHS
</span><a href="#local-6989586621680650352"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">[ProblemEq]
</span><a href="#local-6989586621680650351"><span class="hs-identifier hs-var">spats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Maybe Expr -&gt; RHS
</span><a href="Agda.Syntax.Abstract.html#RHS"><span class="hs-identifier hs-var">A.RHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-var">modifyAbstractExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680650349"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Expr
</span><a href="#local-6989586621680650348"><span class="hs-identifier hs-var">mc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereDeclarations
</span><a href="#local-6989586621680650347"><span class="hs-identifier hs-var">decls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650346"><span class="hs-identifier hs-var">catchall</span></a></span><span>
</span><span id="line-555"></span><span class="annot"><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-var">modifyAbstractClause</span></a></span><span> </span><span id="local-6989586621680650345"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650345"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650345"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="annot"><a href="Agda.Auto.Convert.html#constructPats"><span class="hs-identifier hs-type">constructPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MId"><span class="hs-identifier hs-type">MId</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPat"><span class="hs-identifier hs-type">CSPat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span id="constructPats"><span class="annot"><span class="annottext">constructPats :: Map QName (TMode, ConstRef O)
-&gt; MetaId -&gt; Clause -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="Agda.Auto.Convert.html#constructPats"><span class="hs-identifier hs-var hs-var">constructPats</span></a></span></span><span> </span><span id="local-6989586621680650343"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650343"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span id="local-6989586621680650342"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650342"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span id="local-6989586621680650341"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650341"><span class="hs-identifier hs-var">clause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-562"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650340"><span class="annot"><span class="annottext">cnvps :: [(Hiding, MId)]
-&gt; [NamedArg Pattern] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621680650340"><span class="hs-identifier hs-var hs-var">cnvps</span></a></span></span><span> </span><span id="local-6989586621680650339"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650339"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], [CSPat O]) -&gt; TCM ([(Hiding, MId)], [CSPat O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650339"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>     </span><span class="annot"><a href="#local-6989586621680650340"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621680650338"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650338"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650337"><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650337"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650336"><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650336"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-564"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621680650335"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650335"><span class="hs-identifier hs-var">ns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650334"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650334"><span class="hs-identifier hs-var">ps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; [NamedArg Pattern] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621680650340"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650338"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650336"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-565"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621680650333"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650333"><span class="hs-identifier hs-var">ns''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650332"><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621680650332"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; NamedArg Pattern -&gt; TCM ([(Hiding, MId)], CSPat O)
</span><a href="#local-6989586621680650331"><span class="hs-identifier hs-var">cnvp</span></a></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650335"><span class="hs-identifier hs-var">ns'</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650337"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-566"></span><span>      </span><span class="annot"><span class="annottext">([(Hiding, MId)], [CSPat O]) -&gt; TCM ([(Hiding, MId)], [CSPat O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650333"><span class="hs-identifier hs-var">ns''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621680650332"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">CSPat O -&gt; [CSPat O] -&gt; [CSPat O]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650334"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>     </span><span id="local-6989586621680650331"><span class="annot"><span class="annottext">cnvp :: [(Hiding, MId)]
-&gt; NamedArg Pattern -&gt; TCM ([(Hiding, MId)], CSPat O)
</span><a href="#local-6989586621680650331"><span class="hs-identifier hs-var hs-var">cnvp</span></a></span></span><span> </span><span id="local-6989586621680650330"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621680650329"><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650329"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-568"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650328"><span class="annot"><span class="annottext">hid :: Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var hs-var">hid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; Hiding) -&gt; ArgInfo -&gt; Hiding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamedArg Pattern -&gt; ArgInfo
forall e. Arg e -&gt; ArgInfo
</span><a href="Agda.Syntax.Common.html#argInfo"><span class="hs-identifier hs-var hs-var">Cm.argInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650329"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-569"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamedArg Pattern -&gt; Pattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">Cm.namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650329"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-570"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">I.VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650326"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650326"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650326"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Hiding, MId) -&gt; [(Hiding, MId)] -&gt; [(Hiding, MId)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSPatI O
forall o. Int -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-var">CSPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; CSPatI O) -&gt; Int -&gt; CSPatI O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">I.IApplyP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650323"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650323"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ArgName -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650323"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Hiding, MId) -&gt; [(Hiding, MId)] -&gt; [(Hiding, MId)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSPatI O
forall o. Int -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-var">CSPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; CSPatI O) -&gt; Int -&gt; CSPatI O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">I.ConP</span></a></span><span> </span><span id="local-6989586621680650322"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650322"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650321"><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650321"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-573"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650320"><span class="annot"><span class="annottext">c :: QName
</span><a href="#local-6989586621680650320"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650322"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-574"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680650319"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650319"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">S
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S TCM (ConstRef O) -&gt; S -&gt; TCM (ConstRef O, S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S TCM (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650320"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S :: MapS QName (TMode, ConstRef O)
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Maybe MetaId
-&gt; MetaId
-&gt; S
</span><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650343"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650342"><span class="hs-identifier hs-var">mainm</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680650318"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650318"><span class="hs-identifier hs-var">ns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650317"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650317"><span class="hs-identifier hs-var">ps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; [NamedArg Pattern] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621680650340"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650321"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-576"></span><span>        </span><span id="local-6989586621680650316"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650316"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650319"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-577"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650315"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650315"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; Maybe (Int, [Arg QName])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; Maybe (Int, [Arg QName])) -&gt; O -&gt; Maybe (Int, [Arg QName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650316"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650318"><span class="hs-identifier hs-var">ns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; [CSPat O] -&gt; CSPatI O
forall o. ConstRef o -&gt; [CSPat o] -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-var">CSPatConApp</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650319"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSPat O -&gt; [CSPat O]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650315"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">CSPatI O
forall o. CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSOmittedArg"><span class="hs-identifier hs-var">CSOmittedArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O] -&gt; [CSPat O] -&gt; [CSPat O]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650317"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">I.DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650312"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650312"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680650311"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650311"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">S
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S TCM (MExp O) -&gt; S -&gt; TCM (MExp O, S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; StateT S TCM (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650312"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S :: MapS QName (TMode, ConstRef O)
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Maybe MetaId
-&gt; MetaId
-&gt; S
</span><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621680650343"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621680650342"><span class="hs-identifier hs-var">mainm</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span>        </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650330"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650328"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp O -&gt; CSPatI O
forall o. MExp o -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-var">CSPatExp</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650311"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">I.ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM ([(Hiding, MId)], CSPat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#copatternsNotImplemented"><span class="hs-identifier hs-var">copatternsNotImplemented</span></a></span><span>
</span><span id="line-583"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">I.LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM ([(Hiding, MId)], CSPat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var">literalsNotImplemented</span></a></span><span>
</span><span id="line-584"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">I.DefP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM ([(Hiding, MId)], CSPat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-var">hitsNotImplemented</span></a></span><span>
</span><span id="line-585"></span><span>
</span><span id="line-586"></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650309"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650309"><span class="hs-identifier hs-var">names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650308"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650308"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; [NamedArg Pattern] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621680650340"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NAPs -&gt; [NamedArg Pattern]
forall a b. LabelPatVars a b =&gt; b -&gt; a
</span><a href="Agda.Syntax.Internal.Pattern.html#unnumberPatVars"><span class="hs-identifier hs-var">IP.unnumberPatVars</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; [NamedArg Pattern]) -&gt; NAPs -&gt; [NamedArg Pattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var hs-var">I.namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650341"><span class="hs-identifier hs-var">clause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], [CSPat O]) -&gt; TCM ([(Hiding, MId)], [CSPat O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)] -&gt; [(Hiding, MId)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621680650309"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650308"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span class="annot"><a href="Agda.Auto.Convert.html#frommyClause"><span class="hs-identifier hs-type">frommyClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSCtx"><span class="hs-identifier hs-type">CSCtx</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPat"><span class="hs-identifier hs-type">CSPat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span>
</span><span id="line-591"></span><span id="frommyClause"><span class="annot"><span class="annottext">frommyClause :: (CSCtx O, [CSPat O], Maybe (MExp O)) -&gt; ExceptT ArgName IO Clause
</span><a href="Agda.Auto.Convert.html#frommyClause"><span class="hs-identifier hs-var hs-var">frommyClause</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650305"><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621680650305"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650304"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650304"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650303"><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621680650303"><span class="hs-identifier hs-var">mrhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-592"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650302"><span class="annot"><span class="annottext">ctel :: [HI (MId, a)] -&gt; m (Tele (Dom' Term e))
</span><a href="#local-6989586621680650302"><span class="hs-identifier hs-var hs-var">ctel</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Tele (Dom' Term e)
forall a. Tele a
</span><a href="Agda.Syntax.Internal.html#EmptyTel"><span class="hs-identifier hs-var">I.EmptyTel</span></a></span><span>
</span><span id="line-593"></span><span>     </span><span class="annot"><a href="#local-6989586621680650302"><span class="hs-identifier hs-var">ctel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span id="local-6989586621680650301"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650301"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650300"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680650300"><span class="hs-identifier hs-var">mid</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650299"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650299"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650298"><span class="annot"><span class="annottext">[HI (MId, a)]
</span><a href="#local-6989586621680650298"><span class="hs-identifier hs-var">ctx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-594"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621680650297"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650297"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680650300"><span class="hs-identifier hs-var">mid</span></a></span><span>
</span><span id="line-595"></span><span>      </span><span id="local-6989586621680650296"><span class="annot"><span class="annottext">Tele (Dom' Term e)
</span><a href="#local-6989586621680650296"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[HI (MId, a)] -&gt; m (Tele (Dom' Term e))
</span><a href="#local-6989586621680650302"><span class="hs-identifier hs-var">ctel</span></a></span><span> </span><span class="annot"><span class="annottext">[HI (MId, a)]
</span><a href="#local-6989586621680650298"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-596"></span><span>      </span><span id="local-6989586621680650295"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680650295"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; m e
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650299"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-597"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650294"><span class="annot"><span class="annottext">dom :: Dom' Term e
</span><a href="#local-6989586621680650294"><span class="hs-identifier hs-var hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Dom' Term e
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">I.defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680650295"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650301"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-598"></span><span>      </span><span class="annot"><span class="annottext">Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e)))
-&gt; Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom' Term e -&gt; Abs (Tele (Dom' Term e)) -&gt; Tele (Dom' Term e)
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">I.ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' Term e
</span><a href="#local-6989586621680650294"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; Tele (Dom' Term e) -&gt; Abs (Tele (Dom' Term e))
forall a. ArgName -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650297"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Tele (Dom' Term e)
</span><a href="#local-6989586621680650296"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span> </span><span id="local-6989586621680650293"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680650293"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSCtx O -&gt; ExceptT ArgName IO Telescope
forall (m :: * -&gt; *) a e.
(Monad m, Conversion m a e) =&gt;
[HI (MId, a)] -&gt; m (Tele (Dom' Term e))
</span><a href="#local-6989586621680650302"><span class="hs-identifier hs-var">ctel</span></a></span><span> </span><span class="annot"><span class="annottext">(CSCtx O -&gt; ExceptT ArgName IO Telescope)
-&gt; CSCtx O -&gt; ExceptT ArgName IO Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O -&gt; CSCtx O
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621680650305"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-600"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650292"><span class="annot"><span class="annottext">getperms :: Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650292"><span class="hs-identifier hs-var hs-var">getperms</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621680650291"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650291"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621680650290"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650290"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Int, Int)], Int) -&gt; ExceptT ArgName IO ([(Int, Int)], Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650291"><span class="hs-identifier hs-var">perm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650290"><span class="hs-identifier hs-var">nv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>     </span><span class="annot"><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621680650289"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650289"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO ([(Int, Int)], Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-602"></span><span>     </span><span class="annot"><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650288"><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621680650288"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650287"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650287"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650286"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650286"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621680650285"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650285"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-603"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621680650284"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650284"><span class="hs-identifier hs-var">perm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650283"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650283"><span class="hs-identifier hs-var">nv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSPat O
-&gt; [(Int, Int)] -&gt; Int -&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650282"><span class="hs-identifier hs-var">getperm</span></a></span><span> </span><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621680650288"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650286"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650285"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-604"></span><span>      </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650287"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650284"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650283"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-605"></span><span>     </span><span class="annot"><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621680650281"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650281"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650280"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650280"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650279"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650279"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621680650278"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650278"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650281"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650280"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650279"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650278"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-606"></span><span>     </span><span class="annot"><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621680650277"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650277"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSOmittedArg"><span class="hs-identifier hs-type">CSOmittedArg</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650276"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650276"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650275"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650275"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621680650274"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650274"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650277"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650276"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650275"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650274"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-607"></span><span>     </span><span class="annot"><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621680650273"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650273"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSPat O
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO ([(Int, Int)], Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-608"></span><span>     </span><span id="local-6989586621680650282"><span class="annot"><span class="annottext">getperm :: CSPat O
-&gt; [(Int, Int)] -&gt; Int -&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650282"><span class="hs-identifier hs-var hs-var">getperm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650272"><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621680650272"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680650271"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650271"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621680650270"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650270"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-609"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621680650272"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-610"></span><span>       </span><span class="hs-comment">--CSPatVar v -&gt; return (length ids + nv - 1 - v : perm, nv)</span><span>
</span><span id="line-611"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-type">CSPatVar</span></a></span><span> </span><span id="local-6989586621680650269"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650269"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Int, Int)], Int) -&gt; ExceptT ArgName IO ([(Int, Int)], Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSCtx O -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621680650305"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650269"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650270"><span class="hs-identifier hs-var">nv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; [(Int, Int)] -&gt; [(Int, Int)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650271"><span class="hs-identifier hs-var">perm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650270"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-type">CSPatConApp</span></a></span><span> </span><span id="local-6989586621680650268"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650268"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680650267"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650267"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-613"></span><span>        </span><span id="local-6989586621680650266"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650266"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650268"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-614"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650265"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650265"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650266"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-615"></span><span>        </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650265"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650267"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650271"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650270"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-616"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span> </span><span id="local-6989586621680650264"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650264"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Int, Int)], Int) -&gt; ExceptT ArgName IO ([(Int, Int)], Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650271"><span class="hs-identifier hs-var">perm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650270"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>       </span><span class="annot"><span class="annottext">CSPatI O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO ([(Int, Int)], Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-618"></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650263"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650263"><span class="hs-identifier hs-var">rperm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650262"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650262"><span class="hs-identifier hs-var">nv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT ArgName IO ([(Int, Int)], Int)
</span><a href="#local-6989586621680650292"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650304"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-619"></span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">--perm = reverse rperm</span><span>
</span><span id="line-620"></span><span>     </span><span id="local-6989586621680650261"><span class="annot"><span class="annottext">perm :: [Int]
</span><a href="#local-6989586621680650261"><span class="hs-identifier hs-var hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; [Int] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650260"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650260"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650259"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650259"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [(Int, Int)] -&gt; Maybe Int
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650260"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621680650263"><span class="hs-identifier hs-var">rperm</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650259"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">CSCtx O -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621680650305"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-621"></span><span>     </span><span class="hs-comment">--renperm = map (\i -&gt; length ids + nv - 1 - i) rperm</span><span>
</span><span id="line-622"></span><span>     </span><span class="hs-comment">--renm = rename (\i -&gt; renperm !! i)</span><span>
</span><span id="line-623"></span><span>     </span><span id="local-6989586621680650257"><span class="annot"><span class="annottext">cnvps :: Int -&gt; [CSPat O] -&gt; ExceptT ArgName IO [NamedArg Pattern]
</span><a href="#local-6989586621680650257"><span class="hs-identifier hs-var hs-var">cnvps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern] -&gt; ExceptT ArgName IO [NamedArg Pattern]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-624"></span><span>     </span><span class="annot"><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621680650256"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650256"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO [NamedArg Pattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-625"></span><span>     </span><span class="annot"><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650255"><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621680650255"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650254"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650254"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-626"></span><span>      </span><span id="local-6989586621680650253"><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650253"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSPat O -&gt; ExceptT ArgName IO (NamedArg Pattern)
</span><a href="#local-6989586621680650252"><span class="hs-identifier hs-var">cnvp</span></a></span><span> </span><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621680650255"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-627"></span><span>      </span><span id="local-6989586621680650251"><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650251"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT ArgName IO [NamedArg Pattern]
</span><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650254"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-628"></span><span>      </span><span class="annot"><span class="annottext">[NamedArg Pattern] -&gt; ExceptT ArgName IO [NamedArg Pattern]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedArg Pattern
</span><a href="#local-6989586621680650253"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Pattern -&gt; [NamedArg Pattern] -&gt; [NamedArg Pattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650251"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>     </span><span class="annot"><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621680650250"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650250"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650249"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650249"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT ArgName IO [NamedArg Pattern]
</span><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650250"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650249"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-630"></span><span>     </span><span class="annot"><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621680650248"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650248"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSOmittedArg"><span class="hs-identifier hs-type">CSOmittedArg</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650247"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650247"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT ArgName IO [NamedArg Pattern]
</span><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650248"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650247"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-631"></span><span>     </span><span class="annot"><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621680650246"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650246"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSPat O
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO [NamedArg Pattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-632"></span><span>     </span><span id="local-6989586621680650252"><span class="annot"><span class="annottext">cnvp :: CSPat O -&gt; ExceptT ArgName IO (NamedArg Pattern)
</span><a href="#local-6989586621680650252"><span class="hs-identifier hs-var hs-var">cnvp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span id="local-6989586621680650245"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650245"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680650244"><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621680650244"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-633"></span><span>      </span><span id="local-6989586621680650243"><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621680650243"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621680650244"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-634"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-type">CSPatVar</span></a></span><span> </span><span id="local-6989586621680650242"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650242"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pattern -&gt; ExceptT ArgName IO Pattern
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgName -&gt; Pattern
forall a. a -&gt; Pattern' a
</span><a href="Agda.Syntax.Internal.html#varP"><span class="hs-identifier hs-var">I.varP</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgName -&gt; Pattern) -&gt; ArgName -&gt; Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621680650240"><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650240"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621680650305"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">CSCtx O -&gt; Int -&gt; HI (MId, MExp O)
forall a. [a] -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">!!</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650242"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ArgName
</span><a href="#local-6989586621680650240"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-635"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-type">CSPatConApp</span></a></span><span> </span><span id="local-6989586621680650239"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650239"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680650238"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650238"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-636"></span><span>        </span><span id="local-6989586621680650237"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650237"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT ArgName IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621680650239"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-637"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680650236"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650236"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650235"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650235"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621680650237"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-638"></span><span>        </span><span id="local-6989586621680650234"><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650234"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT ArgName IO [NamedArg Pattern]
</span><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650236"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650238"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-639"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650233"><span class="annot"><span class="annottext">con :: ConHead
</span><a href="#local-6989586621680650233"><span class="hs-identifier hs-var hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; DataOrRecord -&gt; Induction -&gt; [Arg QName] -&gt; ConHead
</span><a href="Agda.Syntax.Internal.html#ConHead"><span class="hs-identifier hs-var">I.ConHead</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650235"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-var">I.IsData</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#Inductive"><span class="hs-identifier hs-var">Cm.Inductive</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- TODO: restore DataOrRecord and record fields!</span><span>
</span><span id="line-640"></span><span>        </span><span class="annot"><span class="annottext">Pattern -&gt; ExceptT ArgName IO Pattern
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; ConPatternInfo -&gt; [NamedArg Pattern] -&gt; Pattern
forall x.
ConHead -&gt; ConPatternInfo -&gt; [NamedArg (Pattern' x)] -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-var">I.ConP</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650233"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="Agda.Syntax.Internal.html#noConPatternInfo"><span class="hs-identifier hs-var">I.noConPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650234"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-641"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span> </span><span id="local-6989586621680650231"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650231"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-642"></span><span>        </span><span id="local-6989586621680650230"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650230"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650231"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-comment">{- renm e -}</span><span> </span><span class="hs-comment">-- renaming before adding to clause below</span><span>
</span><span id="line-643"></span><span>        </span><span class="annot"><span class="annottext">Pattern -&gt; ExceptT ArgName IO Pattern
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Pattern
forall a. Term -&gt; Pattern' a
</span><a href="Agda.Syntax.Internal.html#dotP"><span class="hs-identifier hs-var">I.dotP</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650230"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>       </span><span class="annot"><span class="annottext">CSPatI O
</span><a href="Agda.Auto.CaseSplit.html#CSAbsurd"><span class="hs-identifier hs-var">CSAbsurd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO Pattern
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- CSAbsurd not used</span><span>
</span><span id="line-645"></span><span>       </span><span class="annot"><span class="annottext">CSPatI O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT ArgName IO Pattern
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-646"></span><span>      </span><span class="annot"><span class="annottext">NamedArg Pattern -&gt; ExceptT ArgName IO (NamedArg Pattern)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(NamedArg Pattern -&gt; ExceptT ArgName IO (NamedArg Pattern))
-&gt; NamedArg Pattern -&gt; ExceptT ArgName IO (NamedArg Pattern)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Named NamedName Pattern -&gt; NamedArg Pattern
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650245"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Named NamedName Pattern -&gt; NamedArg Pattern)
-&gt; Named NamedName Pattern -&gt; NamedArg Pattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pattern -&gt; Named NamedName Pattern
forall a name. a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#unnamed"><span class="hs-identifier hs-var">Cm.unnamed</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621680650243"><span class="hs-identifier hs-var">p'</span></a></span><span>   </span><span class="hs-comment">-- TODO: recover names</span><span>
</span><span id="line-647"></span><span> </span><span id="local-6989586621680650226"><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650226"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT ArgName IO [NamedArg Pattern]
</span><a href="#local-6989586621680650257"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621680650304"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-648"></span><span> </span><span id="local-6989586621680650225"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621680650225"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621680650303"><span class="hs-identifier hs-var">mrhs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-649"></span><span>          </span><span class="annot"><span class="annottext">Maybe (MExp O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; ExceptT ArgName IO (Maybe Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; ExceptT ArgName IO (Maybe Term))
-&gt; Maybe Term -&gt; ExceptT ArgName IO (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-650"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650224"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650224"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Maybe Term)
-&gt; ExceptT ArgName IO Term -&gt; ExceptT ArgName IO (Maybe Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; ExceptT ArgName IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621680650224"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-651"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680650223"><span class="annot"><span class="annottext">cperm :: Permutation
</span><a href="#local-6989586621680650223"><span class="hs-identifier hs-var hs-var">cperm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#Perm"><span class="hs-identifier hs-var">Perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650262"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680650261"><span class="hs-identifier hs-var">perm</span></a></span><span>
</span><span id="line-652"></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; ExceptT ArgName IO Clause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; ExceptT ArgName IO Clause)
-&gt; Clause -&gt; ExceptT ArgName IO Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause :: Range
-&gt; Range
-&gt; Telescope
-&gt; NAPs
-&gt; Maybe Term
-&gt; Maybe (Arg Type)
-&gt; Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; ExpandedEllipsis
-&gt; Clause
</span><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span>
</span><span id="line-653"></span><span>   </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">I.clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">SP.noRange</span></a></span><span>
</span><span id="line-654"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">I.clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">SP.noRange</span></a></span><span>
</span><span id="line-655"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">I.clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680650293"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-656"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">I.namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; [NamedArg Pattern] -&gt; NAPs
forall a b.
(LabelPatVars a b, PatVarLabel b ~ Int) =&gt;
Int -&gt; Permutation -&gt; a -&gt; b
</span><a href="Agda.Syntax.Internal.Pattern.html#numberPatVars"><span class="hs-identifier hs-var">IP.numberPatVars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621680650223"><span class="hs-identifier hs-var">cperm</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg Pattern] -&gt; NAPs) -&gt; [NamedArg Pattern] -&gt; NAPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg Pattern])
-&gt; [NamedArg Pattern] -&gt; [NamedArg Pattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Permutation -&gt; Substitution' Term
forall a. DeBruijn a =&gt; Permutation -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.html#renamingR"><span class="hs-identifier hs-var">renamingR</span></a></span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Substitution' Term)
-&gt; Permutation -&gt; Substitution' Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#compactP"><span class="hs-identifier hs-var">compactP</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621680650223"><span class="hs-identifier hs-var">cperm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg Pattern]
</span><a href="#local-6989586621680650226"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-657"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">I.clauseBody</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621680650225"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-658"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">I.clauseType</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO: compute clause type</span><span>
</span><span id="line-659"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">I.clauseCatchall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-660"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">I.clauseExact</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-661"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">I.clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO: Don't know here whether recursive or not !?</span><span>
</span><span id="line-662"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">I.clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO: Don't know here whether reachable or not !?</span><span>
</span><span id="line-663"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">I.clauseEllipsis</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">Cm.NoEllipsis</span></a></span><span>
</span><span id="line-664"></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-665"></span><span>
</span><span id="line-666"></span><span class="annot"><a href="Agda.Auto.Convert.html#contains_constructor"><span class="hs-identifier hs-type">contains_constructor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPat"><span class="hs-identifier hs-type">CSPat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-667"></span><span id="contains_constructor"><span class="annot"><span class="annottext">contains_constructor :: [CSPat O] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#contains_constructor"><span class="hs-identifier hs-var hs-var">contains_constructor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CSPat O -&gt; Bool) -&gt; [CSPat O] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">CSPat O -&gt; Bool
forall o. HI (CSPatI o) -&gt; Bool
</span><a href="#local-6989586621680650209"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-668"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-669"></span><span>  </span><span id="local-6989586621680650209"><span class="annot"><span class="annottext">f :: HI (CSPatI o) -&gt; Bool
</span><a href="#local-6989586621680650209"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650208"><span class="annot"><span class="annottext">CSPatI o
</span><a href="#local-6989586621680650208"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CSPatI o
</span><a href="#local-6989586621680650208"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-670"></span><span>         </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-type">CSPatConApp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-671"></span><span>         </span><span class="annot"><span class="annottext">CSPatI o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span id="local-6989586621680650207"><span class="annot"><a href="Agda.Auto.Convert.html#freeIn"><span class="hs-identifier hs-type">freeIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650207"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-676"></span><span id="freeIn"><span class="annot"><span class="annottext">freeIn :: Int -&gt; MExp o -&gt; Bool
</span><a href="Agda.Auto.Convert.html#freeIn"><span class="hs-identifier hs-var hs-var">freeIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
forall o. Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621680650205"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-677"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-678"></span><span>  </span><span id="local-6989586621680650204"><span class="annot"><span class="annottext">mr :: MM a blk -&gt; a
</span><a href="#local-6989586621680650204"><span class="hs-identifier hs-var hs-var">mr</span></a></span></span><span> </span><span id="local-6989586621680650203"><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621680650203"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680650202"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650202"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621680650203"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650202"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-679"></span><span>  </span><span id="local-6989586621680650205"><span class="annot"><span class="annottext">f :: Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621680650205"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680650201"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650201"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680650200"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650200"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; Exp o
forall a blk. MM a blk -&gt; a
</span><a href="#local-6989586621680650204"><span class="hs-identifier hs-var">mr</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650200"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-680"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650199"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680650199"><span class="hs-identifier hs-var">elr</span></a></span></span><span> </span><span id="local-6989586621680650198"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650198"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680650199"><span class="hs-identifier hs-var">elr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-681"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680650197"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650197"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650197"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650201"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-682"></span><span>    </span><span class="annot"><span class="annottext">Elr o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621680650196"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650201"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650198"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-683"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650195"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650195"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621680650205"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650201"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650195"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-684"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650194"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650194"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650193"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650193"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621680650205"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650201"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650194"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621680650205"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650201"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650193"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-685"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span>  </span><span id="local-6989586621680650196"><span class="annot"><span class="annottext">fs :: Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621680650196"><span class="hs-identifier hs-var hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621680650191"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650191"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680650190"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650190"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; ArgList o
forall a blk. MM a blk -&gt; a
</span><a href="#local-6989586621680650204"><span class="hs-identifier hs-var">mr</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650190"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-691"></span><span>   </span><span class="annot"><span class="annottext">ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-692"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650189"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650189"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680650188"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650188"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621680650205"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650191"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650189"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621680650196"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650191"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650188"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621680650187"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650187"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621680650196"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650191"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680650187"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-698"></span><span>
</span><span id="line-699"></span><span>
</span><span id="line-700"></span><span id="local-6989586621680650186"><span class="annot"><a href="Agda.Auto.Convert.html#negtype"><span class="hs-identifier hs-type">negtype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650186"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650186"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680650186"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-701"></span><span id="negtype"><span class="annot"><span class="annottext">negtype :: ConstRef o -&gt; MExp o -&gt; MExp o
</span><a href="Agda.Auto.Convert.html#negtype"><span class="hs-identifier hs-var hs-var">negtype</span></a></span></span><span> </span><span id="local-6989586621680650184"><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680650184"><span class="hs-identifier hs-var">ee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; MExp o
</span><a href="#local-6989586621680650183"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-703"></span><span>  </span><span id="local-6989586621680650182"><span class="annot"><span class="annottext">mr :: MM a blk -&gt; a
</span><a href="#local-6989586621680650182"><span class="hs-identifier hs-var hs-var">mr</span></a></span></span><span> </span><span id="local-6989586621680650181"><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621680650181"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680650180"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650180"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621680650181"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680650180"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-704"></span><span>  </span><span id="local-6989586621680650183"><span class="annot"><span class="annottext">f :: Int -&gt; MExp o -&gt; MExp o
</span><a href="#local-6989586621680650183"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680650179"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650179"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650178"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650178"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; Exp o
forall a blk. MM a blk -&gt; a
</span><a href="#local-6989586621680650182"><span class="hs-identifier hs-var">mr</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650178"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-705"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621680650177"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680650177"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680650176"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650176"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680650175"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650175"><span class="hs-identifier hs-var">possdep</span></a></span></span><span> </span><span id="local-6989586621680650174"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650174"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621680650173"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680650173"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621680650172"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650172"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680650177"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680650176"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680650175"><span class="hs-identifier hs-var">possdep</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650174"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680650173"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; MExp o
</span><a href="#local-6989586621680650183"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650179"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650172"><span class="hs-identifier hs-var">ot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span>   </span><span class="annot"><span class="annottext">Exp o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680650178"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp o
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Sort
</span><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-var">Set</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo o)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elr o
forall o. Int -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList o -&gt; MArgList o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo o)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef o -&gt; Elr o
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680650184"><span class="hs-identifier hs-var">ee</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList o -&gt; MArgList o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span class="hs-comment">-- ---------------------------------------</span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="annot"><a href="Agda.Auto.Convert.html#findClauseDeep"><span class="hs-identifier hs-type">findClauseDeep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">Cm.InteractionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-711"></span><span id="findClauseDeep"><span class="annot"><span class="annottext">findClauseDeep :: InteractionId -&gt; TCM (Maybe (QName, Clause, Bool))
</span><a href="Agda.Auto.Convert.html#findClauseDeep"><span class="hs-identifier hs-var hs-var">findClauseDeep</span></a></span></span><span> </span><span id="local-6989586621680650170"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621680650170"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM (Maybe (QName, Clause, Bool))
-&gt; TCM (Maybe (QName, Clause, Bool))
forall (m :: * -&gt; *) a. MonadTCEnv m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Signature.html#ignoreAbstractMode"><span class="hs-identifier hs-var">ignoreAbstractMode</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Maybe (QName, Clause, Bool))
 -&gt; TCM (Maybe (QName, Clause, Bool)))
-&gt; TCM (Maybe (QName, Clause, Bool))
-&gt; TCM (Maybe (QName, Clause, Bool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-comment">-- Andreas, 2016-09-04, issue #2162</span><span>
</span><span id="line-712"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#InteractionPoint"><span class="hs-identifier hs-type">MB.InteractionPoint</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ipClause :: InteractionPoint -&gt; IPClause
</span><a href="Agda.TypeChecking.Monad.Base.html#ipClause"><span class="hs-identifier hs-var">MB.ipClause</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650167"><span class="annot"><span class="annottext">IPClause
</span><a href="#local-6989586621680650167"><span class="hs-identifier hs-var">ipCl</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCMT IO InteractionPoint
forall (m :: * -&gt; *).
(MonadFail m, ReadTCState m, MonadError TCErr m) =&gt;
InteractionId -&gt; m InteractionPoint
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionPoint"><span class="hs-identifier hs-var">lookupInteractionPoint</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621680650170"><span class="hs-identifier hs-var">ii</span></a></span><span>
</span><span id="line-713"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IPClause
</span><a href="#local-6989586621680650167"><span class="hs-identifier hs-var">ipCl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-714"></span><span>    </span><span class="annot"><span class="annottext">IPClause
</span><a href="Agda.TypeChecking.Monad.Base.html#IPNoClause"><span class="hs-identifier hs-var">MB.IPNoClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-715"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#IPClause"><span class="hs-identifier hs-type">MB.IPClause</span></a></span><span> </span><span id="local-6989586621680650164"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650164"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680650163"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650163"><span class="hs-identifier hs-var">clauseNo</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Substitution' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SpineClause
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Closure ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Closure IPBoundary]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-716"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CaseContext
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Clause]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680650162"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650162"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Int -&gt; TCM (CaseContext, ClauseZipper)
</span><a href="Agda.Interaction.MakeCase.html#getClauseZipperForIP"><span class="hs-identifier hs-var">getClauseZipperForIP</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650164"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650163"><span class="hs-identifier hs-var">clauseNo</span></a></span><span>
</span><span id="line-717"></span><span>      </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool)))
-&gt; Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(QName, Clause, Bool) -&gt; Maybe (QName, Clause, Bool)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650164"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650162"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (Term -&gt; Bool) -&gt; Maybe Term -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Bool
</span><a href="#local-6989586621680650160"><span class="hs-identifier hs-var">toplevel</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Bool) -&gt; Maybe Term -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var hs-var">I.clauseBody</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680650162"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-718"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-719"></span><span>    </span><span id="local-6989586621680650160"><span class="annot"><span class="annottext">toplevel :: Term -&gt; Bool
</span><a href="#local-6989586621680650160"><span class="hs-identifier hs-var hs-var">toplevel</span></a></span></span><span> </span><span id="local-6989586621680650159"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650159"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-720"></span><span>     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650159"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-721"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-722"></span><span>      </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span class="hs-comment">-- ---------------------------------------</span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span class="annot"><a href="Agda.Auto.Convert.html#matchType"><span class="hs-identifier hs-type">matchType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Nat is deffreevars of const, Nat is ctx length of target type, left arg is const type, right is target type</span><span>
</span><span id="line-727"></span><span id="matchType"><span class="annot"><span class="annottext">matchType :: Int -&gt; Int -&gt; Type -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="Agda.Auto.Convert.html#matchType"><span class="hs-identifier hs-var hs-var">matchType</span></a></span></span><span> </span><span id="local-6989586621680650157"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650157"><span class="hs-identifier hs-var">cdfv</span></a></span></span><span> </span><span id="local-6989586621680650156"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650156"><span class="hs-identifier hs-var">tctx</span></a></span></span><span> </span><span id="local-6989586621680650155"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650155"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span id="local-6989586621680650154"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650154"><span class="hs-identifier hs-var">ttyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650153"><span class="hs-identifier hs-var">trmodps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650157"><span class="hs-identifier hs-var">cdfv</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650155"><span class="hs-identifier hs-var">ctyp</span></a></span><span>
</span><span id="line-728"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-729"></span><span>  </span><span id="local-6989586621680650153"><span class="annot"><span class="annottext">trmodps :: Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650153"><span class="hs-identifier hs-var hs-var">trmodps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621680650152"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650152"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650151"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650152"><span class="hs-identifier hs-var">ctyp</span></a></span><span>
</span><span id="line-730"></span><span>  </span><span class="annot"><a href="#local-6989586621680650153"><span class="hs-identifier hs-var">trmodps</span></a></span><span> </span><span id="local-6989586621680650150"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650150"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650149"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650149"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">I.unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650149"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-731"></span><span>   </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650147"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650147"><span class="hs-identifier hs-var">ot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650153"><span class="hs-identifier hs-var">trmodps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650150"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650147"><span class="hs-identifier hs-var">ot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>   </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-733"></span><span>  </span><span id="local-6989586621680650151"><span class="annot"><span class="annottext">tr :: Int -&gt; Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650151"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621680650146"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650146"><span class="hs-identifier hs-var">narg</span></a></span></span><span> </span><span id="local-6989586621680650145"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650145"><span class="hs-identifier hs-var">na</span></a></span></span><span> </span><span id="local-6989586621680650144"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650144"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-734"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Type -&gt; Type -&gt; Maybe Int
</span><a href="#local-6989586621680650143"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650144"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650154"><span class="hs-identifier hs-var">ttyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-735"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680650142"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650142"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Maybe (Int, Int)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650142"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650146"><span class="hs-identifier hs-var">narg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">I.unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650144"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-737"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650141"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650141"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650151"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650146"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650145"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650141"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-738"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">I.NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ArgName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650140"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650140"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621680650151"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650146"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650145"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650140"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-739"></span><span>     </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Int)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-740"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-741"></span><span>    </span><span id="local-6989586621680650143"><span class="annot"><span class="annottext">ft :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Type -&gt; Type -&gt; Maybe Int
</span><a href="#local-6989586621680650143"><span class="hs-identifier hs-var hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621680650139"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650139"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621680650138"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650138"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650137"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650137"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650136"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650136"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650135"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650135"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621680650134"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650139"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650138"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650137"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650136"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650135"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-742"></span><span>    </span><span id="local-6989586621680650134"><span class="annot"><span class="annottext">f :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621680650134"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680650133"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621680650132"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650131"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680650130"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650130"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621680650129"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650129"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650130"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-743"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650128"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650128"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span id="local-6989586621680650127"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650127"><span class="hs-identifier hs-var">as1</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650128"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650129"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-744"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650125"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650125"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span id="local-6989586621680650124"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650124"><span class="hs-identifier hs-var">as2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650128"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650125"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650123"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650127"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650124"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-745"></span><span>      </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-746"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650122"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650122"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650122"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650145"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- unify vars with no args?</span><span>
</span><span id="line-747"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650121"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650121"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span id="local-6989586621680650120"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650120"><span class="hs-identifier hs-var">as1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650129"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-748"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621680650119"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650119"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span id="local-6989586621680650118"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650118"><span class="hs-identifier hs-var">as2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650157"><span class="hs-identifier hs-var">cdfv</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650145"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650121"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650156"><span class="hs-identifier hs-var">tctx</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650119"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650123"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650120"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650118"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-749"></span><span>      </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-750"></span><span>     </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650130"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650129"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-751"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-752"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-753"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span id="local-6989586621680650117"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650117"><span class="hs-identifier hs-var">hid1</span></a></span></span><span> </span><span id="local-6989586621680650116"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650116"><span class="hs-identifier hs-var">b1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span id="local-6989586621680650115"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650115"><span class="hs-identifier hs-var">hid2</span></a></span></span><span> </span><span id="local-6989586621680650114"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650114"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650117"><span class="hs-identifier hs-var">hid1</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650115"><span class="hs-identifier hs-var">hid2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621680650134"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650116"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621680650114"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span> </span><span id="local-6989586621680650113"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680650113"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span> </span><span id="local-6989586621680650112"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680650112"><span class="hs-identifier hs-var">lit2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680650113"><span class="hs-identifier hs-var">lit1</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Literal -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680650112"><span class="hs-identifier hs-var">lit2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621680650111"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650111"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span id="local-6989586621680650110"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650110"><span class="hs-identifier hs-var">as1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621680650109"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650109"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span id="local-6989586621680650108"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650108"><span class="hs-identifier hs-var">as2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650111"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650109"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650123"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650110"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650108"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-756"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621680650107"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650107"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650106"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650106"><span class="hs-identifier hs-var">as1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621680650105"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650105"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650104"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650104"><span class="hs-identifier hs-var">as2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650107"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConHead -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680650105"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650103"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650106"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650104"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-757"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">I.Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650102"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650102"><span class="hs-identifier hs-var">info1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650101"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650101"><span class="hs-identifier hs-var">it1</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621680650100"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650100"><span class="hs-identifier hs-var">ot1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">I.Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650099"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650099"><span class="hs-identifier hs-var">info2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680650098"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650098"><span class="hs-identifier hs-var">it2</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621680650097"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650097"><span class="hs-identifier hs-var">ot2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650102"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650099"><span class="hs-identifier hs-var">info2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Type -&gt; Type -&gt; Maybe Int
</span><a href="#local-6989586621680650143"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650095"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650095"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Type -&gt; Type -&gt; Maybe Int
</span><a href="#local-6989586621680650143"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650133"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650095"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650100"><span class="hs-identifier hs-var">ot1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680650097"><span class="hs-identifier hs-var">ot2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650101"><span class="hs-identifier hs-var">it1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680650098"><span class="hs-identifier hs-var">it2</span></a></span><span>
</span><span id="line-758"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650131"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650132"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- sloppy</span><span>
</span><span id="line-759"></span><span>      </span><span class="annot"><span class="annottext">(Term, Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-760"></span><span>    </span><span id="local-6989586621680650103"><span class="annot"><span class="annottext">fs :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650103"><span class="hs-identifier hs-var hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621680650094"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650094"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621680650093"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650093"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650092"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650092"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680650091"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650091"><span class="hs-identifier hs-var">es1</span></a></span></span><span> </span><span id="local-6989586621680650090"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650090"><span class="hs-identifier hs-var">es2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650091"><span class="hs-identifier hs-var">es1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650090"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-761"></span><span>     </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650092"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650093"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-762"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621680650089"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650089"><span class="hs-identifier hs-var">info1</span></a></span></span><span> </span><span id="local-6989586621680650088"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650088"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650087"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650087"><span class="hs-identifier hs-var">es1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621680650086"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650086"><span class="hs-identifier hs-var">info2</span></a></span></span><span> </span><span id="local-6989586621680650085"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650085"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650084"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650084"><span class="hs-identifier hs-var">es2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650089"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650086"><span class="hs-identifier hs-var">info2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621680650134"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650094"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650093"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650083"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650083"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650103"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650094"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650083"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650092"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650087"><span class="hs-identifier hs-var">es1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650084"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650088"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650085"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-763"></span><span>     </span><span class="annot"><span class="annottext">(Elims, Elims)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-764"></span><span>    </span><span id="local-6989586621680650123"><span class="annot"><span class="annottext">fes :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650123"><span class="hs-identifier hs-var hs-var">fes</span></a></span></span><span> </span><span id="local-6989586621680650082"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650082"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621680650081"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650081"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680650080"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650080"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680650079"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650079"><span class="hs-identifier hs-var">es1</span></a></span></span><span> </span><span id="local-6989586621680650078"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650078"><span class="hs-identifier hs-var">es2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650079"><span class="hs-identifier hs-var">es1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650078"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-765"></span><span>     </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650080"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650081"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-766"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">I.Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650076"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650076"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650075"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650075"><span class="hs-identifier hs-var">es1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">I.Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680650074"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650074"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650073"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650073"><span class="hs-identifier hs-var">es2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650076"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680650074"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650123"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650082"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650081"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650080"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650075"><span class="hs-identifier hs-var">es1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650073"><span class="hs-identifier hs-var">es2</span></a></span><span>
</span><span id="line-767"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621680650072"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650072"><span class="hs-identifier hs-var">info1</span></a></span></span><span> </span><span id="local-6989586621680650071"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650071"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650070"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650070"><span class="hs-identifier hs-var">es1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621680650069"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650069"><span class="hs-identifier hs-var">info2</span></a></span></span><span> </span><span id="local-6989586621680650068"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650068"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680650067"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650067"><span class="hs-identifier hs-var">es2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650072"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680650069"><span class="hs-identifier hs-var">info2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621680650134"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650082"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650081"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680650066"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650066"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621680650123"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650082"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680650066"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621680650080"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650070"><span class="hs-identifier hs-var">es1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680650067"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650071"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680650068"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-768"></span><span>     </span><span class="annot"><span class="annottext">(Elims, Elims)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-769"></span></pre></body></html>