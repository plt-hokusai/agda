<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NondecreasingIndentation #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">{-| Coverage checking, case splitting, and splitting for refine tactics.

 -}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.TypeChecking.Coverage</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier">SplitClause</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#clauseToSplitClause"><span class="hs-identifier">clauseToSplitClause</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier">insertTrailingArgs</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier">Covering</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitClauses"><span class="hs-identifier">splitClauses</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#coverageCheck"><span class="hs-identifier">coverageCheck</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#isCovered"><span class="hs-identifier">isCovered</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitClauseWithAbsurd"><span class="hs-identifier">splitClauseWithAbsurd</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitLast"><span class="hs-identifier">splitLast</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResult"><span class="hs-identifier">splitResult</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html#normaliseProjP"><span class="hs-identifier">normaliseProjP</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(!!)</span></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- do not use partial functions like !!</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">lift</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">for_</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntSet</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntSet</span></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DataOrRecord"><span class="hs-identifier">DataOrRecord</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Pattern.html"><span class="hs-identifier">Agda.Syntax.Internal.Pattern</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.InternalToAbstract.html"><span class="hs-identifier">Agda.Syntax.Translation.InternalToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.InternalToAbstract.html#NamedClause"><span class="hs-identifier">NamedClause</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Names.html"><span class="hs-identifier">Agda.TypeChecking.Names</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.html"><span class="hs-identifier">Agda.TypeChecking.Primitive</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Primitive.html#Nat"><span class="hs-identifier">Nat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html#DataOrRecord"><span class="hs-identifier">DataOrRecord</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html#checkSortOfSplitVar"><span class="hs-identifier">checkSortOfSplitVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Problem.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Problem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Problem.html#allFlexVars"><span class="hs-identifier">allFlexVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Unify</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.Term.html"><span class="hs-identifier">Agda.TypeChecking.Rules.Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.Term.html#unquoteTactic"><span class="hs-identifier">unquoteTactic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.Match</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.SplitTree</span></a></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html"><span class="hs-identifier">Agda.TypeChecking.Conversion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#tryConversion"><span class="hs-identifier">tryConversion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#equalType"><span class="hs-identifier">equalType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html"><span class="hs-identifier">Agda.TypeChecking.Datatypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html#getConForm"><span class="hs-identifier">getConForm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html"><span class="hs-identifier">Agda.TypeChecking.Empty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html#checkEmptyTel"><span class="hs-identifier">checkEmptyTel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html#isEmptyTel"><span class="hs-identifier">isEmptyTel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html#isEmptyType"><span class="hs-identifier">isEmptyType</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html"><span class="hs-identifier">Agda.TypeChecking.Irrelevance</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html"><span class="hs-identifier">Agda.TypeChecking.Records</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.Path.html"><span class="hs-identifier">Agda.TypeChecking.Telescope.Path</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.MetaVars.html"><span class="hs-identifier">Agda.TypeChecking.MetaVars</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html"><span class="hs-identifier">Agda.TypeChecking.Warnings</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.html"><span class="hs-identifier">Agda.Interaction.Options</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html"><span class="hs-identifier">Agda.Utils.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier">prettyShow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Singleton.html"><span class="hs-identifier">Agda.Utils.Singleton</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Size.html"><span class="hs-identifier">Agda.Utils.Size</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.WithDefault.html"><span class="hs-identifier">Agda.Utils.WithDefault</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">data</span><span> </span><span id="SplitClause"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-var">SplitClause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SClause"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="scTel"><span class="annot"><span class="annottext">SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var hs-var">scTel</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-comment">-- ^ Type of variables in @scPats@.</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="scPats"><span class="annot"><span class="annottext">SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var hs-var">scPats</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-comment">-- ^ The patterns leading to the currently considered branch of</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">--   the split tree.</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="scSubst"><span class="annot"><span class="annottext">SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var hs-var">scSubst</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution%27"><span class="hs-identifier hs-type">Substitution'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">-- ^ Substitution from 'scTel' to old context.</span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-comment">--   Only needed directly after split on variable:</span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">--   * To update 'scTarget'</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-comment">--   * To rename other split variables when splitting on</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-comment">--     multiple variables.</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-comment">--   @scSubst@ is not ``transitive'', i.e., does not record</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">--   the substitution from the original context to 'scTel'</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-comment">--   over a series of splits.  It is freshly computed</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">--   after each split by 'computeNeighborhood'; also</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-comment">--   'splitResult', which does not split on a variable,</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-comment">--   should reset it to the identity 'idS', lest it be</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">--   applied to 'scTarget' again, leading to Issue 1294.</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="scCheckpoints"><span class="annot"><span class="annottext">SplitClause -&gt; Map CheckpointId Substitution
</span><a href="Agda.TypeChecking.Coverage.html#scCheckpoints"><span class="hs-identifier hs-var hs-var">scCheckpoints</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#CheckpointId"><span class="hs-identifier hs-type">CheckpointId</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-comment">-- ^ We need to keep track of the module parameter checkpoints for the</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">-- clause for the purpose of inferring missing instance clauses.</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="scTarget"><span class="annot"><span class="annottext">SplitClause -&gt; Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var hs-var">scTarget</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-comment">-- ^ The type of the rhs, living in context 'scTel'.</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-comment">--   'fixTargetType' computes the new 'scTarget' by applying</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-comment">--   substitution 'scSubst'.</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-comment">-- | A @Covering@ is the result of splitting a 'SplitClause'.</span><span>
</span><span id="line-108"></span><span class="hs-keyword">data</span><span> </span><span id="Covering"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Covering"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="covSplitArg"><span class="annot"><span class="annottext">Covering -&gt; Arg Nat
</span><a href="Agda.TypeChecking.Coverage.html#covSplitArg"><span class="hs-identifier hs-var hs-var">covSplitArg</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-110"></span><span>     </span><span class="hs-comment">-- ^ De Bruijn level (counting dot patterns) of argument we split on.</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="covSplitClauses"><span class="annot"><span class="annottext">Covering -&gt; [(SplitTag, SplitClause)]
</span><a href="Agda.TypeChecking.Coverage.html#covSplitClauses"><span class="hs-identifier hs-var hs-var">covSplitClauses</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-112"></span><span>      </span><span class="hs-comment">-- ^ Covering clauses, indexed by constructor/literal these clauses share.</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">-- | Project the split clauses out of a covering.</span><span>
</span><span id="line-116"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitClauses"><span class="hs-identifier hs-type">splitClauses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-117"></span><span id="splitClauses"><span class="annot"><span class="annottext">splitClauses :: Covering -&gt; [SplitClause]
</span><a href="Agda.TypeChecking.Coverage.html#splitClauses"><span class="hs-identifier hs-var hs-var">splitClauses</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774968"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774968"><span class="hs-identifier hs-var">qcs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; SplitClause)
-&gt; [(SplitTag, SplitClause)] -&gt; [SplitClause]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774968"><span class="hs-identifier hs-var">qcs</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-comment">-- | Create a split clause from a clause in internal syntax. Used by make-case.</span><span>
</span><span id="line-120"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#clauseToSplitClause"><span class="hs-identifier hs-type">clauseToSplitClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-121"></span><span id="clauseToSplitClause"><span class="annot"><span class="annottext">clauseToSplitClause :: Clause -&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#clauseToSplitClause"><span class="hs-identifier hs-var hs-var">clauseToSplitClause</span></a></span></span><span> </span><span id="local-6989586621680774967"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774967"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SClause :: Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var hs-var">clauseTel</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774967"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#toSplitPatterns"><span class="hs-identifier hs-var">toSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774967"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>  </span><span class="hs-comment">-- Andreas, 2014-07-15  TODO: Is this ok?</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: Map CheckpointId Substitution
</span><a href="Agda.TypeChecking.Coverage.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="hs-comment">-- #2996: not __IMPOSSIBLE__ for debug printing</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Dom Type
forall a. Arg a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#domFromArg"><span class="hs-identifier hs-var">domFromArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Type -&gt; Dom Type) -&gt; Maybe (Arg Type) -&gt; Maybe (Dom Type)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var hs-var">clauseType</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774967"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">type</span><span> </span><span id="CoverM"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-var">CoverM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- | Top-level function for checking pattern coverage.</span><span>
</span><span id="line-132"></span><span class="hs-comment">--</span><span>
</span><span id="line-133"></span><span class="hs-comment">--   Effects:</span><span>
</span><span id="line-134"></span><span class="hs-comment">--</span><span>
</span><span id="line-135"></span><span class="hs-comment">--   - Marks unreachable clauses as such in the signature.</span><span>
</span><span id="line-136"></span><span class="hs-comment">--</span><span>
</span><span id="line-137"></span><span class="hs-comment">--   - Adds missing instances clauses to the signature.</span><span>
</span><span id="line-138"></span><span class="hs-comment">--</span><span>
</span><span id="line-139"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#coverageCheck"><span class="hs-identifier hs-type">coverageCheck</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>     </span><span class="hs-comment">-- ^ Name @f@ of definition.</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>      </span><span class="hs-comment">-- ^ Absolute type (including the full parameter telescope).</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- ^ Clauses of @f@.  These are the very clauses of @f@ in the signature.</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span>
</span><span id="line-144"></span><span id="coverageCheck"><span class="annot"><span class="annottext">coverageCheck :: QName -&gt; Type -&gt; [Clause] -&gt; TCM SplitTree
</span><a href="Agda.TypeChecking.Coverage.html#coverageCheck"><span class="hs-identifier hs-var hs-var">coverageCheck</span></a></span></span><span> </span><span id="local-6989586621680774958"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680774957"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774957"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621680774956"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774956"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;entering coverageCheck for &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">75</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;  of type (raw): &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (Type -&gt; VerboseKey) -&gt; Type -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774957"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">45</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;  of type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774957"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680774948"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774948"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621680774947"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774947"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Nat -&gt; Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpTo"><span class="hs-identifier hs-var">telViewUpTo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774957"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;coverageCheck: computed telView&quot;</span></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- n             = arity</span><span>
</span><span id="line-152"></span><span>      </span><span class="hs-comment">-- xs            = variable patterns fitting lgamma</span><span>
</span><span id="line-153"></span><span>      </span><span id="local-6989586621680774945"><span class="annot"><span class="annottext">n :: Nat
</span><a href="#local-6989586621680774945"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774948"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-154"></span><span>      </span><span id="local-6989586621680774943"><span class="annot"><span class="annottext">xs :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680774943"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Origin -&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Inserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern]
forall a. DeBruijn a =&gt; Telescope -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleNamedArgs"><span class="hs-identifier hs-var">teleNamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774948"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;coverageCheck: getDefFreeVars&quot;</span></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>      </span><span class="hs-comment">-- The initial module parameter substitutions need to be weakened by the</span><span>
</span><span id="line-159"></span><span>      </span><span class="hs-comment">-- number of arguments that aren't module parameters.</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621680774939"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774939"><span class="hs-identifier hs-var">fv</span></a></span></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Nat
forall (m :: * -&gt; *).
(Functor m, Applicative m, ReadTCState m, MonadTCEnv m) =&gt;
QName -&gt; m Nat
</span><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier hs-var">getDefFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;coverageCheck: getting checkpoints&quot;</span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-comment">-- TODO: does this make sense? Why are we weakening by n - fv?</span><span>
</span><span id="line-165"></span><span>  </span><span id="local-6989586621680774937"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774937"><span class="hs-identifier hs-var">checkpoints</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Map CheckpointId Substitution))
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774945"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774939"><span class="hs-identifier hs-var">fv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Map CheckpointId Substitution -&gt; Map CheckpointId Substitution)
-&gt; TCMT IO (Map CheckpointId Substitution)
-&gt; TCMT IO (Map CheckpointId Substitution)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Lens' (Map CheckpointId Substitution) TCEnv
-&gt; TCMT IO (Map CheckpointId Substitution)
forall (m :: * -&gt; *) a. MonadTCEnv m =&gt; Lens' a TCEnv -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#viewTC"><span class="hs-identifier hs-var">viewTC</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' (Map CheckpointId Substitution) TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#eCheckpoints"><span class="hs-identifier hs-var">eCheckpoints</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span>      </span><span class="hs-comment">-- construct the initial split clause</span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774932"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680774932"><span class="hs-identifier hs-var hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774948"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774943"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774937"><span class="hs-identifier hs-var">checkpoints</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Dom Type) -&gt; SplitClause)
-&gt; Maybe (Dom Type) -&gt; SplitClause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774947"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774930"><span class="annot"><span class="annottext">prCl :: Clause -&gt; m Doc
</span><a href="#local-6989586621680774930"><span class="hs-identifier hs-var hs-var">prCl</span></a></span></span><span> </span><span id="local-6989586621680774929"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774929"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; m Doc -&gt; m Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clause -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var hs-var">clauseTel</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774929"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m Doc -&gt; m Doc) -&gt; m Doc -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-172"></span><span>                  </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; m Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; m Doc)
-&gt; [NamedArg DeBruijnPattern] -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774929"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;Coverage checking &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot; with patterns:&quot;</span></span><span>
</span><span id="line-175"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCM Doc) -&gt; [Clause] -&gt; [TCM Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; TCM Doc
forall (m :: * -&gt; *).
(PureTCM m, MonadInteractionPoints m, MonadFresh NameId m,
 MonadStConcreteNames m, IsString (m Doc), Null (m Doc),
 Semigroup (m Doc)) =&gt;
Clause -&gt; m Doc
</span><a href="#local-6989586621680774930"><span class="hs-identifier hs-var">prCl</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774956"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-comment">-- used = actually used clauses for cover</span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-comment">-- pss  = non-covered cases</span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span id="local-6989586621680774923"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774923"><span class="hs-identifier hs-var">splitTree</span></a></span></span><span> </span><span id="local-6989586621680774922"><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621680774922"><span class="hs-identifier hs-var">used</span></a></span></span><span> </span><span id="local-6989586621680774921"><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774921"><span class="hs-identifier hs-var">pss</span></a></span></span><span> </span><span id="local-6989586621680774920"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774920"><span class="hs-identifier hs-var">qss</span></a></span></span><span> </span><span id="local-6989586621680774919"><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621680774919"><span class="hs-identifier hs-var">noex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774956"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774932"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-comment">-- Andreas, 2018-11-12, issue #378:</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-comment">-- some indices in @used@ and @noex@ point outside of @cs@,</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-comment">-- since missing hcomp clauses have been added during the course of @cover@.</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-comment">-- We simply delete theses indices from @noex@.</span><span>
</span><span id="line-186"></span><span>  </span><span id="local-6989586621680774917"><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774917"><span class="hs-identifier hs-var">noex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; TCMT IO [Nat]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([Nat] -&gt; TCMT IO [Nat]) -&gt; [Nat] -&gt; TCMT IO [Nat]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; Bool) -&gt; [Nat] -&gt; [Nat]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">List.filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774956"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Nat] -&gt; [Nat]) -&gt; [Nat] -&gt; [Nat]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; [Nat]
</span><span class="hs-identifier hs-var">IntSet.toList</span></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621680774919"><span class="hs-identifier hs-var">noex</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cover computed!&quot;</span></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;used clauses: &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621680774922"><span class="hs-identifier hs-var">used</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;non-exact clauses: &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774917"><span class="hs-identifier hs-var">noex</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.splittree&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;generated split tree for&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774923"><span class="hs-identifier hs-var">splitTree</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.covering&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;covering patterns for &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCM Doc) -&gt; [Clause] -&gt; [TCM Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774912"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774912"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clause -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var hs-var">clauseTel</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774912"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; TCM Doc)
-&gt; [NamedArg DeBruijnPattern] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774912"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774920"><span class="hs-identifier hs-var">qss</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-comment">-- Storing the covering clauses so that checkIApplyConfluence_ can</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-comment">-- find them later.</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-comment">-- Andreas, 2019-03-27, only needed when --cubical</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#whenM"><span class="hs-identifier hs-var">whenM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PragmaOptions -&gt; Bool
</span><a href="Agda.Interaction.Options.Base.html#optCubical"><span class="hs-identifier hs-var hs-var">optCubical</span></a></span><span> </span><span class="annot"><span class="annottext">(PragmaOptions -&gt; Bool) -&gt; TCMT IO PragmaOptions -&gt; TCMT IO Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO PragmaOptions
forall (m :: * -&gt; *). HasOptions m =&gt; m PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-var">pragmaOptions</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">(Signature -&gt; Signature) -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadTCState m =&gt;
(Signature -&gt; Signature) -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.State.html#modifySignature"><span class="hs-identifier hs-var">modifySignature</span></a></span><span> </span><span class="annot"><span class="annottext">((Signature -&gt; Signature) -&gt; TCMT IO ())
-&gt; (Signature -&gt; Signature) -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; (Definition -&gt; Definition) -&gt; Signature -&gt; Signature
</span><a href="Agda.TypeChecking.Monad.State.html#updateDefinition"><span class="hs-identifier hs-var">updateDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Definition -&gt; Definition) -&gt; Signature -&gt; Signature)
-&gt; (Definition -&gt; Definition) -&gt; Signature -&gt; Signature
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Defn -&gt; Defn) -&gt; Definition -&gt; Definition
</span><a href="Agda.TypeChecking.Monad.State.html#updateTheDef"><span class="hs-identifier hs-var">updateTheDef</span></a></span><span> </span><span class="annot"><span class="annottext">((Defn -&gt; Defn) -&gt; Definition -&gt; Definition)
-&gt; (Defn -&gt; Defn) -&gt; Definition -&gt; Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([Clause] -&gt; [Clause]) -&gt; Defn -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.State.html#updateCovering"><span class="hs-identifier hs-var">updateCovering</span></a></span><span> </span><span class="annot"><span class="annottext">(([Clause] -&gt; [Clause]) -&gt; Defn -&gt; Defn)
-&gt; ([Clause] -&gt; [Clause]) -&gt; Defn -&gt; Defn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; [Clause] -&gt; [Clause]
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774920"><span class="hs-identifier hs-var">qss</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-comment">-- filter out the missing clauses that are absurd.</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621680774903"><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774903"><span class="hs-identifier hs-var">pss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(((Telescope, [NamedArg DeBruijnPattern]) -&gt; TCMT IO Bool)
 -&gt; [(Telescope, [NamedArg DeBruijnPattern])]
 -&gt; TCMT IO [(Telescope, [NamedArg DeBruijnPattern])])
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; ((Telescope, [NamedArg DeBruijnPattern]) -&gt; TCMT IO Bool)
-&gt; TCMT IO [(Telescope, [NamedArg DeBruijnPattern])]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((Telescope, [NamedArg DeBruijnPattern]) -&gt; TCMT IO Bool)
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; TCMT IO [(Telescope, [NamedArg DeBruijnPattern])]
forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">filterM</span></span><span> </span><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774921"><span class="hs-identifier hs-var">pss</span></a></span><span> </span><span class="annot"><span class="annottext">(((Telescope, [NamedArg DeBruijnPattern]) -&gt; TCMT IO Bool)
 -&gt; TCMT IO [(Telescope, [NamedArg DeBruijnPattern])])
-&gt; ((Telescope, [NamedArg DeBruijnPattern]) -&gt; TCMT IO Bool)
-&gt; TCMT IO [(Telescope, [NamedArg DeBruijnPattern])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680774900"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774900"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774899"><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774899"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-comment">-- Andreas, 2019-04-13, issue #3692: when adding missing absurd</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-comment">-- clauses, also put the absurd pattern in.</span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">TCMT IO (Either ErrorNonEmpty Nat)
-&gt; (ErrorNonEmpty -&gt; TCMT IO Bool)
-&gt; (Nat -&gt; TCMT IO Bool)
-&gt; TCMT IO Bool
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
m (Either a b) -&gt; (a -&gt; m c) -&gt; (b -&gt; m c) -&gt; m c
</span><a href="Agda.Utils.Either.html#caseEitherM"><span class="hs-identifier hs-var">caseEitherM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range -&gt; Telescope -&gt; TCMT IO (Either ErrorNonEmpty Nat)
</span><a href="Agda.TypeChecking.Empty.html#checkEmptyTel"><span class="hs-identifier hs-var">checkEmptyTel</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774900"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">ErrorNonEmpty
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Nat -&gt; TCMT IO Bool) -&gt; TCMT IO Bool)
-&gt; (Nat -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774896"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774896"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-comment">-- Now, @l@ is the first type in @tel@ (counting from 0=leftmost)</span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-comment">-- which is empty.  Turn it into a de Bruijn index @i@.</span><span>
</span><span id="line-216"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774895"><span class="annot"><span class="annottext">i :: Nat
</span><a href="#local-6989586621680774895"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774900"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774896"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-217"></span><span>      </span><span class="hs-comment">-- Build a substitution mapping this pattern variable to the absurd pattern.</span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774894"><span class="annot"><span class="annottext">sub :: Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774894"><span class="hs-identifier hs-var hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; DeBruijnPattern -&gt; Substitution' DeBruijnPattern
forall a. EndoSubst a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#inplaceS"><span class="hs-identifier hs-var">inplaceS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774895"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(DeBruijnPattern -&gt; Substitution' DeBruijnPattern)
-&gt; DeBruijnPattern -&gt; Substitution' DeBruijnPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; DeBruijnPattern
</span><a href="Agda.Syntax.Internal.html#absurdP"><span class="hs-identifier hs-var">absurdP</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774895"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-219"></span><span>        </span><span class="hs-comment">-- ifNotM (isEmptyTel tel) (return True) $ do</span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-comment">-- Jesper, 2018-11-28, Issue #3407: if the clause is absurd,</span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-comment">-- add the appropriate absurd clause to the definition.</span><span>
</span><span id="line-222"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774891"><span class="annot"><span class="annottext">cl :: Clause
</span><a href="#local-6989586621680774891"><span class="hs-identifier hs-var hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause :: Range
-&gt; Range
-&gt; Telescope
-&gt; [NamedArg DeBruijnPattern]
-&gt; Maybe Term
-&gt; Maybe (Arg Type)
-&gt; Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; ExpandedEllipsis
-&gt; Clause
</span><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-223"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-224"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774900"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-225"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg DeBruijnPattern])
-&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
Substitution' (SubstArg [NamedArg DeBruijnPattern])
</span><a href="#local-6989586621680774894"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774899"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-226"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-227"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-228"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>       </span><span class="hs-comment">-- absurd clauses are safe as catch-all</span><span>
</span><span id="line-229"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">clauseExact</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-230"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-231"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-232"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">NoEllipsis</span></a></span><span>
</span><span id="line-233"></span><span>                      </span><span class="hs-special">}</span><span>
</span><span id="line-234"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.missing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-235"></span><span>        </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;adding missing absurd clause&quot;</span></span><span>
</span><span id="line-236"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(QNamed Clause -&gt; TCM Doc) -&gt; QNamed Clause -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Clause -&gt; QNamed Clause
forall a. QName -&gt; a -&gt; QNamed a
</span><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-var">QNamed</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774891"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-237"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-238"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.missing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">80</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-239"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;l   = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774896"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-240"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;i   = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774895"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-241"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cl  = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Clause -&gt; QNamed Clause
forall a. QName -&gt; a -&gt; QNamed a
</span><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-var">QNamed</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774891"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; TCMT IO ()
</span><a href="Agda.TypeChecking.Monad.Signature.html#addClauses"><span class="hs-identifier hs-var">addClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774891"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-comment">-- report a warning if there are uncovered cases,</span><span>
</span><span id="line-247"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774903"><span class="hs-identifier hs-var">pss</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="annottext">Lens' (Set QName) TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stLocalPartialDefs"><span class="hs-identifier hs-var">stLocalPartialDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' (Set QName) TCState -&gt; (Set QName -&gt; Set QName) -&gt; TCMT IO ()
forall (m :: * -&gt; *) a.
MonadTCState m =&gt;
Lens' a TCState -&gt; (a -&gt; a) -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Base.html#modifyTCLens"><span class="hs-operator hs-var">`modifyTCLens`</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Set QName -&gt; Set QName
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#whenM"><span class="hs-identifier hs-var">whenM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoverageCheck
</span><a href="Agda.Syntax.Common.html#YesCoverageCheck"><span class="hs-identifier hs-var">YesCoverageCheck</span></a></span><span> </span><span class="annot"><span class="annottext">CoverageCheck -&gt; CoverageCheck -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(CoverageCheck -&gt; Bool) -&gt; TCMT IO CoverageCheck -&gt; TCMT IO Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Lens' CoverageCheck TCEnv -&gt; TCMT IO CoverageCheck
forall (m :: * -&gt; *) a. MonadTCEnv m =&gt; Lens' a TCEnv -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#viewTC"><span class="hs-identifier hs-var">viewTC</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' CoverageCheck TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#eCoverageCheck"><span class="hs-identifier hs-var">eCoverageCheck</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-250"></span><span>      </span><span class="annot"><span class="annottext">[Clause] -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774956"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [(Telescope, [NamedArg DeBruijnPattern])] -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#CoverageIssue"><span class="hs-identifier hs-var">CoverageIssue</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774903"><span class="hs-identifier hs-var">pss</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-comment">-- Andreas, 2017-08-28, issue #2723:</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-comment">-- Mark clauses as reachable or unreachable in the signature.</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-comment">-- Andreas, 2020-11-19, issue #5065</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-comment">-- Remember whether clauses are exact or not.</span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774865"><span class="annot"><span class="annottext">[Maybe Nat]
</span><a href="#local-6989586621680774865"><span class="hs-identifier hs-var">is0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774864"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774864"><span class="hs-identifier hs-var">cs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe Nat, Clause)] -&gt; ([Maybe Nat], [Clause])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">([(Maybe Nat, Clause)] -&gt; ([Maybe Nat], [Clause]))
-&gt; [(Maybe Nat, Clause)] -&gt; ([Maybe Nat], [Clause])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Nat, Clause)]
-&gt; ((Nat, Clause) -&gt; (Maybe Nat, Clause)) -&gt; [(Maybe Nat, Clause)]
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Nat] -&gt; [Clause] -&gt; [(Nat, Clause)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774956"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Nat, Clause) -&gt; (Maybe Nat, Clause)) -&gt; [(Maybe Nat, Clause)])
-&gt; ((Nat, Clause) -&gt; (Maybe Nat, Clause)) -&gt; [(Maybe Nat, Clause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774861"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774861"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774860"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774860"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-257"></span><span>          </span><span id="local-6989586621680774859"><span class="annot"><span class="annottext">unreachable :: Bool
</span><a href="#local-6989586621680774859"><span class="hs-identifier hs-var hs-var">unreachable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774861"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; IntSet -&gt; Bool
</span><span class="hs-operator hs-var">`IntSet.notMember`</span></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621680774922"><span class="hs-identifier hs-var">used</span></a></span><span>
</span><span id="line-258"></span><span>          </span><span id="local-6989586621680774857"><span class="annot"><span class="annottext">exact :: Bool
</span><a href="#local-6989586621680774857"><span class="hs-identifier hs-var hs-var">exact</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774861"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; IntSet -&gt; Bool
</span><span class="hs-operator hs-var">`IntSet.notMember`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Nat] -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.fromList</span></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774917"><span class="hs-identifier hs-var">noex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nat -&gt; Maybe Nat
forall a. Bool -&gt; a -&gt; Maybe a
</span><a href="Agda.Utils.Maybe.html#boolToMaybe"><span class="hs-identifier hs-var">boolToMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774859"><span class="hs-identifier hs-var">unreachable</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774861"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774860"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-260"></span><span>             </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774859"><span class="hs-identifier hs-var">unreachable</span></a></span><span>
</span><span id="line-261"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">clauseExact</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774857"><span class="hs-identifier hs-var">exact</span></a></span><span>
</span><span id="line-262"></span><span>             </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-comment">-- is = indices of unreachable clauses</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774854"><span class="annot"><span class="annottext">is :: [Nat]
</span><a href="#local-6989586621680774854"><span class="hs-identifier hs-var hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe Nat] -&gt; [Nat]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Nat]
</span><a href="#local-6989586621680774865"><span class="hs-identifier hs-var">is0</span></a></span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;unreachable clauses: &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774854"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;(none)&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774854"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-comment">-- Replace the first clauses by @cs1@.  There might be more</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-comment">-- added by @inferMissingClause@.</span><span>
</span><span id="line-270"></span><span>  </span><span class="annot"><span class="annottext">QName -&gt; ([Clause] -&gt; [Clause]) -&gt; TCMT IO ()
</span><a href="Agda.TypeChecking.Monad.Signature.html#modifyFunClauses"><span class="hs-identifier hs-var">modifyFunClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(([Clause] -&gt; [Clause]) -&gt; TCMT IO ())
-&gt; ([Clause] -&gt; [Clause]) -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774851"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774851"><span class="hs-identifier hs-var">cs0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774864"><span class="hs-identifier hs-var">cs1</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; [Clause] -&gt; [Clause]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [Clause] -&gt; [Clause]
forall a. Nat -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Clause] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774864"><span class="hs-identifier hs-var">cs1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774851"><span class="hs-identifier hs-var">cs0</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-comment">-- Warn if there are unreachable clauses and mark them as unreachable.</span><span>
</span><span id="line-273"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Nat] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774854"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-comment">-- Warn about unreachable clauses.</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774849"><span class="annot"><span class="annottext">unreached :: [Clause]
</span><a href="#local-6989586621680774849"><span class="hs-identifier hs-var hs-var">unreached</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; Bool) -&gt; [Clause] -&gt; [Clause]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Maybe Bool -&gt; Maybe Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Bool -&gt; Bool) -&gt; (Clause -&gt; Maybe Bool) -&gt; Clause -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var hs-var">clauseUnreachable</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774864"><span class="hs-identifier hs-var">cs1</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774848"><span class="annot"><span class="annottext">ranges :: [Range]
</span><a href="#local-6989586621680774848"><span class="hs-identifier hs-var hs-var">ranges</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; Range) -&gt; [Clause] -&gt; [Range]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var hs-var">clauseFullRange</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774849"><span class="hs-identifier hs-var">unreached</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="annottext">[Range] -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">[Range]
</span><a href="#local-6989586621680774848"><span class="hs-identifier hs-var">ranges</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Range] -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#UnreachableClauses"><span class="hs-identifier hs-var">UnreachableClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Range]
</span><a href="#local-6989586621680774848"><span class="hs-identifier hs-var">ranges</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-comment">-- report a warning if there are clauses that are not preserved as</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-comment">-- definitional equalities and --exact-split is enabled</span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Nat] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774917"><span class="hs-identifier hs-var">noex</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-282"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774846"><span class="annot"><span class="annottext">noexclauses :: [Clause]
</span><a href="#local-6989586621680774846"><span class="hs-identifier hs-var hs-var">noexclauses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; Clause) -&gt; [Nat] -&gt; [Clause]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clause -&gt; [Clause] -&gt; Nat -&gt; Clause
forall a. a -&gt; [a] -&gt; Nat -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774864"><span class="hs-identifier hs-var">cs1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774917"><span class="hs-identifier hs-var">noex</span></a></span><span>
</span><span id="line-283"></span><span>      </span><span class="annot"><span class="annottext">[Range] -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Clause -&gt; Range) -&gt; [Clause] -&gt; [Range]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var hs-var">clauseLHSRange</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774846"><span class="hs-identifier hs-var">noexclauses</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#CoverageNoExactSplit"><span class="hs-identifier hs-var">CoverageNoExactSplit</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">([Clause] -&gt; Warning) -&gt; [Clause] -&gt; Warning
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774846"><span class="hs-identifier hs-var">noexclauses</span></a></span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="annottext">SplitTree -&gt; TCM SplitTree
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774923"><span class="hs-identifier hs-var">splitTree</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-comment">-- | Top-level function for eliminating redundant clauses in the interactive</span><span>
</span><span id="line-288"></span><span class="hs-comment">--   case splitter</span><span>
</span><span id="line-289"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#isCovered"><span class="hs-identifier hs-type">isCovered</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-290"></span><span id="isCovered"><span class="annot"><span class="annottext">isCovered :: QName -&gt; [Clause] -&gt; SplitClause -&gt; TCMT IO Bool
</span><a href="Agda.TypeChecking.Coverage.html#isCovered"><span class="hs-identifier hs-var hs-var">isCovered</span></a></span></span><span> </span><span id="local-6989586621680774842"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774842"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680774841"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774841"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621680774840"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774840"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.isCovered&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;isCovered&quot;</span></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-294"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;f  = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774842"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Clause -&gt; TCM Doc) -&gt; [Clause] -&gt; [TCM Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; (Clause -&gt; TCM Doc) -&gt; Clause -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamedClause -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedClause -&gt; TCM Doc)
-&gt; (Clause -&gt; NamedClause) -&gt; Clause -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Bool -&gt; Clause -&gt; NamedClause
</span><a href="Agda.Syntax.Translation.InternalToAbstract.html#NamedClause"><span class="hs-identifier hs-var">NamedClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774842"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774841"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;sc = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774840"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-297"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-comment">-- Jesper, 2019-10: introduce trailing arguments (see #3828)</span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774838"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774838"><span class="hs-identifier hs-var">sc'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774840"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">coverMissingClauses :: CoverResult -&gt; [(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="Agda.TypeChecking.Coverage.html#coverMissingClauses"><span class="hs-identifier hs-var">coverMissingClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774836"><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774836"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774842"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774841"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774838"><span class="hs-identifier hs-var">sc'</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; TCMT IO Bool) -&gt; Bool -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="#local-6989586621680774836"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-303"></span><span> </span><span class="hs-comment">-- Andreas, 2019-08-08 and 2020-02-11</span><span>
</span><span id="line-304"></span><span> </span><span class="hs-comment">-- If there is an error (e.g. unification error), don't report it</span><span>
</span><span id="line-305"></span><span> </span><span class="hs-comment">-- to the user.  Rather, assume the clause is not already covered.</span><span>
</span><span id="line-306"></span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; (TCErr -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">TCErr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-keyword">data</span><span> </span><span id="CoverResult"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CoverResult"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="coverSplitTree"><span class="annot"><span class="annottext">CoverResult -&gt; SplitTree
</span><a href="Agda.TypeChecking.Coverage.html#coverSplitTree"><span class="hs-identifier hs-var hs-var">coverSplitTree</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="coverUsedClauses"><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverUsedClauses"><span class="hs-identifier hs-var hs-var">coverUsedClauses</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span> </span><span class="hs-comment">-- Set Nat</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="coverMissingClauses"><span class="annot"><span class="annottext">CoverResult -&gt; [(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="Agda.TypeChecking.Coverage.html#coverMissingClauses"><span class="hs-identifier hs-var hs-var">coverMissingClauses</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DeBruijnPattern"><span class="hs-identifier hs-type">DeBruijnPattern</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="coverPatterns"><span class="annot"><span class="annottext">CoverResult -&gt; [Clause]
</span><a href="Agda.TypeChecking.Coverage.html#coverPatterns"><span class="hs-identifier hs-var hs-var">coverPatterns</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-comment">-- ^ The set of patterns used as cover.</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="coverNoExactClauses"><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverNoExactClauses"><span class="hs-identifier hs-var hs-var">coverNoExactClauses</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span> </span><span class="hs-comment">-- Set Nat</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-comment">-- | @cover f cs (SClause _ _ ps _) = return (splitTree, used, pss)@.</span><span>
</span><span id="line-318"></span><span class="hs-comment">--   checks that the list of clauses @cs@ covers the given split clause.</span><span>
</span><span id="line-319"></span><span class="hs-comment">--   Returns the @splitTree@, the @used@ clauses, and missing cases @pss@.</span><span>
</span><span id="line-320"></span><span class="hs-comment">--</span><span>
</span><span id="line-321"></span><span class="hs-comment">--   Effect: adds missing instance clauses for @f@ to signature.</span><span>
</span><span id="line-322"></span><span class="hs-comment">--</span><span>
</span><span id="line-323"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-type">cover</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-324"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-325"></span><span id="cover"><span class="annot"><span class="annottext">cover :: QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var hs-var">cover</span></a></span></span><span> </span><span id="local-6989586621680774830"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680774829"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621680774828"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680774827"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774826"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774826"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774825"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774825"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult -&gt; TCM CoverResult
forall a. TCM a -&gt; TCM a
</span><a href="#local-6989586621680774824"><span class="hs-identifier hs-var">updateRelevance</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM CoverResult -&gt; TCM CoverResult)
-&gt; TCM CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-326"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;checking coverage of pattern:&quot;</span></span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;target sort =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; (Dom Type -&gt; TCM Doc) -&gt; Maybe (Dom Type) -&gt; TCM Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;&lt;none&gt;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; TCM Doc) -&gt; (Dom Type -&gt; Sort) -&gt; Dom Type -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Sort
forall a. LensSort a =&gt; a -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#getSort"><span class="hs-identifier hs-var">getSort</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Sort) -&gt; (Dom Type -&gt; Type) -&gt; Dom Type -&gt; Sort
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774825"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-331"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">80</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;raw target =\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774825"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-332"></span><span>  </span><span class="annot"><span class="annottext">[Clause]
-&gt; [NamedArg SplitPattern]
-&gt; TCMT IO (Match (Nat, SplitInstantiation))
forall (m :: * -&gt; *).
PureTCM m =&gt;
[Clause]
-&gt; [NamedArg SplitPattern] -&gt; m (Match (Nat, SplitInstantiation))
</span><a href="Agda.TypeChecking.Coverage.Match.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774826"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Match (Nat, SplitInstantiation))
-&gt; (Match (Nat, SplitInstantiation) -&gt; TCM CoverResult)
-&gt; TCM CoverResult
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-333"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Yes"><span class="hs-identifier hs-type">Yes</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774818"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774818"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774817"><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774817"><span class="hs-identifier hs-var">mps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-334"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;pattern covered by clause &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774818"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-335"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;with mps = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774817"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-336"></span><span>      </span><span id="local-6989586621680774816"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774816"><span class="hs-identifier hs-var">exact</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SplitInstantiation
-&gt; ((Nat, SplitPattern) -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Functor f, Foldable f, Monad m) =&gt;
f a -&gt; (a -&gt; m Bool) -&gt; m Bool
</span><a href="Agda.Utils.Monad.html#allM"><span class="hs-identifier hs-var">allM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774817"><span class="hs-identifier hs-var">mps</span></a></span><span> </span><span class="annot"><span class="annottext">(((Nat, SplitPattern) -&gt; TCMT IO Bool) -&gt; TCMT IO Bool)
-&gt; ((Nat, SplitPattern) -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. HasConstInfo m =&gt; Pattern' a -&gt; m Bool
</span><a href="Agda.TypeChecking.Coverage.Match.html#isTrivialPattern"><span class="hs-identifier hs-var">isTrivialPattern</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; TCMT IO Bool)
-&gt; ((Nat, SplitPattern) -&gt; SplitPattern)
-&gt; (Nat, SplitPattern)
-&gt; TCMT IO Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Nat, SplitPattern) -&gt; SplitPattern
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span>
</span><span id="line-337"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774813"><span class="annot"><span class="annottext">cl0 :: Clause
</span><a href="#local-6989586621680774813"><span class="hs-identifier hs-var hs-var">cl0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Clause] -&gt; Nat -&gt; Clause
forall a. a -&gt; [a] -&gt; Nat -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774818"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-338"></span><span>      </span><span id="local-6989586621680774812"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774812"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Clause -&gt; SplitInstantiation -&gt; TCM Clause
</span><a href="#local-6989586621680774811"><span class="hs-identifier hs-var">applyCl</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774813"><span class="hs-identifier hs-var">cl0</span></a></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774817"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CoverResult :: SplitTree
-&gt; IntSet
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-340"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">coverSplitTree :: SplitTree
</span><a href="Agda.TypeChecking.Coverage.html#coverSplitTree"><span class="hs-identifier hs-var">coverSplitTree</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; SplitTree
forall a. Nat -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-var">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">coverUsedClauses :: IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverUsedClauses"><span class="hs-identifier hs-var">coverUsedClauses</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; IntSet
forall el coll. Singleton el coll =&gt; el -&gt; coll
</span><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-var">singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774818"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-342"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">coverMissingClauses :: [(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="Agda.TypeChecking.Coverage.html#coverMissingClauses"><span class="hs-identifier hs-var">coverMissingClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-343"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">coverPatterns :: [Clause]
</span><a href="Agda.TypeChecking.Coverage.html#coverPatterns"><span class="hs-identifier hs-var">coverPatterns</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774812"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-344"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">coverNoExactClauses :: IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverNoExactClauses"><span class="hs-identifier hs-var">coverNoExactClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.fromList</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774818"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774816"><span class="hs-identifier hs-var">exact</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var hs-var">clauseCatchall</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774813"><span class="hs-identifier hs-var">cl0</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="annottext">Match (Nat, SplitInstantiation)
</span><a href="Agda.TypeChecking.Coverage.Match.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-keyword">do</span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;pattern is not covered&quot;</span></span><span>
</span><span id="line-349"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774805"><span class="annot"><span class="annottext">infer :: Dom' a e -&gt; Bool
</span><a href="#local-6989586621680774805"><span class="hs-identifier hs-var hs-var">infer</span></a></span></span><span> </span><span id="local-6989586621680774804"><span class="annot"><span class="annottext">Dom' a e
</span><a href="#local-6989586621680774804"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom' a e -&gt; Bool
forall a. LensHiding a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isInstance"><span class="hs-identifier hs-var">isInstance</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' a e
</span><a href="#local-6989586621680774804"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom' a e -&gt; Maybe a
forall t e. Dom' t e -&gt; Maybe t
</span><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var hs-var">domTactic</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' a e
</span><a href="#local-6989586621680774804"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (Dom Type -&gt; Bool) -&gt; Maybe (Dom Type) -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Bool
forall a e. Dom' a e -&gt; Bool
</span><a href="#local-6989586621680774805"><span class="hs-identifier hs-var">infer</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774825"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-351"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-352"></span><span>          </span><span class="hs-comment">-- Ulf, 2016-10-31: For now we only infer instance clauses. It would</span><span>
</span><span id="line-353"></span><span>          </span><span class="hs-comment">-- make sense to do it also for hidden, but since the value of a</span><span>
</span><span id="line-354"></span><span>          </span><span class="hs-comment">-- hidden clause is expected to be forced by later clauses, it's too</span><span>
</span><span id="line-355"></span><span>          </span><span class="hs-comment">-- late to add it now. If it was inferrable we would have gotten a</span><span>
</span><span id="line-356"></span><span>          </span><span class="hs-comment">-- type error before getting to this point.</span><span>
</span><span id="line-357"></span><span>          </span><span class="hs-comment">-- Ulf, 2019-11-21: Also @tactic clauses.</span><span>
</span><span id="line-358"></span><span>          </span><span id="local-6989586621680774800"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774800"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCM Clause
</span><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-var">inferMissingClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-359"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; SplitTree
forall a. Nat -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-var">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774800"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-360"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-361"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774797"><span class="annot"><span class="annottext">ps' :: [NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774797"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774826"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-362"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; SplitTree
forall a. Nat -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-var">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774797"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-comment">-- We need to split!</span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-comment">-- If all clauses have an unsplit copattern, we try that first.</span><span>
</span><span id="line-366"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span id="local-6989586621680774794"><span class="annot"><span class="annottext">BlockedOnResult
</span><a href="#local-6989586621680774794"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621680774793"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774793"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockedOnResult
-&gt; Bool
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
-&gt; TCM CoverResult
</span><a href="#local-6989586621680774792"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="annot"><span class="annottext">BlockedOnResult
</span><a href="#local-6989586621680774794"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockingVars -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774793"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
forall a. SplitError -&gt; TCM a
</span><a href="#local-6989586621680774791"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM CoverResult -&gt; TCM CoverResult)
-&gt; TCM CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-367"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockingVars -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774793"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-368"></span><span>      </span><span class="hs-comment">-- Otherwise, if there are variables to split, we try them</span><span>
</span><span id="line-369"></span><span>      </span><span class="hs-comment">-- in the order determined by a split strategy.</span><span>
</span><span id="line-370"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.strategy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;blocking vars = &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774793"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-371"></span><span>      </span><span class="hs-comment">-- xs is a non-empty lists of blocking variables</span><span>
</span><span id="line-372"></span><span>      </span><span class="hs-comment">-- try splitting on one of them</span><span>
</span><span id="line-373"></span><span>      </span><span id="local-6989586621680774789"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774789"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; Telescope -&gt; TCM BlockingVars
</span><a href="Agda.TypeChecking.Coverage.html#splitStrategy"><span class="hs-identifier hs-var">splitStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774793"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-374"></span><span>      </span><span class="hs-comment">-- Andreas, 2017-10-08, issue #2594</span><span>
</span><span id="line-375"></span><span>      </span><span class="hs-comment">-- First, try to find split order for complete coverage.</span><span>
</span><span id="line-376"></span><span>      </span><span class="hs-comment">-- If this fails, try to at least carry out the splitting to the end.</span><span>
</span><span id="line-377"></span><span>      </span><span class="annot"><span class="annottext">BlockingVars
-&gt; AllowPartialCover
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
</span><a href="#local-6989586621680774787"><span class="hs-identifier hs-var">continue</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774789"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitError -&gt; TCM CoverResult) -&gt; TCM CoverResult)
-&gt; (SplitError -&gt; TCM CoverResult) -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774785"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774785"><span class="hs-identifier hs-var">_err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-378"></span><span>        </span><span class="annot"><span class="annottext">BlockingVars
-&gt; AllowPartialCover
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
</span><a href="#local-6989586621680774787"><span class="hs-identifier hs-var">continue</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774789"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#YesAllowPartialCover"><span class="hs-identifier hs-var">YesAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitError -&gt; TCM CoverResult) -&gt; TCM CoverResult)
-&gt; (SplitError -&gt; TCM CoverResult) -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774783"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774783"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-379"></span><span>          </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
forall a. SplitError -&gt; TCM a
</span><a href="#local-6989586621680774791"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774783"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-comment">-- Andreas, 2019-08-07, issue #3966</span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-comment">-- | When we get a SplitError, tighten the error Range to the clauses</span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-comment">-- that are still candidates for covering the SplitClause.</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621680775352"><span class="annot"><a href="#local-6989586621680774791"><span class="hs-identifier hs-type">splitError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775352"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-385"></span><span>    </span><span id="local-6989586621680774791"><span class="annot"><span class="annottext">splitError :: SplitError -&gt; TCM a
</span><a href="#local-6989586621680774791"><span class="hs-identifier hs-var hs-var">splitError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM a -&gt; TCM a
forall a. TCM a -&gt; TCM a
</span><a href="#local-6989586621680774782"><span class="hs-identifier hs-var">withRangeOfCandidateClauses</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM a -&gt; TCM a) -&gt; (SplitError -&gt; TCM a) -&gt; SplitError -&gt; TCM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCM a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCM a)
-&gt; (SplitError -&gt; TypeError) -&gt; SplitError -&gt; TCM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-var">SplitError</span></a></span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-comment">-- | This repeats the matching, but since we are crashing anyway,</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-comment">-- the extra work just to compute a better Range does not matter.</span><span>
</span><span id="line-389"></span><span>    </span><span id="local-6989586621680774779"><span class="annot"><a href="#local-6989586621680774782"><span class="hs-identifier hs-type">withRangeOfCandidateClauses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680774779"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680774779"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-390"></span><span>    </span><span id="local-6989586621680774782"><span class="annot"><span class="annottext">withRangeOfCandidateClauses :: TCM a -&gt; TCM a
</span><a href="#local-6989586621680774782"><span class="hs-identifier hs-var hs-var">withRangeOfCandidateClauses</span></a></span></span><span> </span><span id="local-6989586621680774778"><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621680774778"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-391"></span><span>      </span><span id="local-6989586621680774777"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774777"><span class="hs-identifier hs-var">cands</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Clause, Match SplitInstantiation) -&gt; Maybe Clause)
-&gt; [(Clause, Match SplitInstantiation)] -&gt; [Clause]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Clause -&gt; Match SplitInstantiation -&gt; Maybe Clause)
-&gt; (Clause, Match SplitInstantiation) -&gt; Maybe Clause
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Match SplitInstantiation -&gt; Maybe Clause
forall a. Clause -&gt; Match a -&gt; Maybe Clause
</span><a href="#local-6989586621680774774"><span class="hs-identifier hs-var">notNo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Clause, Match SplitInstantiation)] -&gt; [Clause])
-&gt; ([Match SplitInstantiation]
    -&gt; [(Clause, Match SplitInstantiation)])
-&gt; [Match SplitInstantiation]
-&gt; [Clause]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
-&gt; [Match SplitInstantiation]
-&gt; [(Clause, Match SplitInstantiation)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">([Match SplitInstantiation] -&gt; [Clause])
-&gt; TCMT IO [Match SplitInstantiation] -&gt; TCMT IO [Clause]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCMT IO (Match SplitInstantiation))
-&gt; [Clause] -&gt; TCMT IO [Match SplitInstantiation]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; Clause -&gt; TCMT IO (Match SplitInstantiation)
forall (m :: * -&gt; *).
PureTCM m =&gt;
[NamedArg SplitPattern] -&gt; Clause -&gt; m (Match SplitInstantiation)
</span><a href="Agda.TypeChecking.Coverage.Match.html#matchClause"><span class="hs-identifier hs-var">matchClause</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774826"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-392"></span><span>      </span><span class="annot"><span class="annottext">[Clause] -&gt; TCM a -&gt; TCM a
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774777"><span class="hs-identifier hs-var">cands</span></a></span><span> </span><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621680774778"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-393"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-394"></span><span>        </span><span id="local-6989586621680775339"><span class="annot"><a href="#local-6989586621680774774"><span class="hs-identifier hs-type">notNo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775339"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span></span><span>
</span><span id="line-395"></span><span>        </span><span id="local-6989586621680774774"><span class="annot"><span class="annottext">notNo :: Clause -&gt; Match a -&gt; Maybe Clause
</span><a href="#local-6989586621680774774"><span class="hs-identifier hs-var hs-var">notNo</span></a></span></span><span> </span><span id="local-6989586621680774771"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774771"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-396"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Yes"><span class="hs-identifier hs-type">Yes</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Clause
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774771"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-397"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Clause
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774771"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-398"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#No"><span class="hs-identifier hs-type">No</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Clause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><a href="#local-6989586621680774811"><span class="hs-identifier hs-type">applyCl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621680774811"><span class="annot"><span class="annottext">applyCl :: SplitClause -&gt; Clause -&gt; SplitInstantiation -&gt; TCM Clause
</span><a href="#local-6989586621680774811"><span class="hs-identifier hs-var hs-var">applyCl</span></a></span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774770"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774770"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774769"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774769"><span class="hs-identifier hs-var">sps</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680774768"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621680774767"><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774767"><span class="hs-identifier hs-var">mps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Clause -&gt; TCM Clause
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774770"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Clause -&gt; TCM Clause) -&gt; TCM Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-402"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774766"><span class="annot"><span class="annottext">ps :: [NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774766"><span class="hs-identifier hs-var hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-403"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;applyCl&quot;</span></span><span>
</span><span id="line-404"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;tel    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774770"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-405"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774766"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;mps    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774767"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-407"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;s      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774765"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-408"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps[s]  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
Substitution' (SubstArg [NamedArg DeBruijnPattern])
</span><a href="#local-6989586621680774765"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg DeBruijnPattern])
-&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774766"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span>        </span><span class="hs-comment">-- If a matching clause has fewer patterns than the split</span><span>
</span><span id="line-411"></span><span>        </span><span class="hs-comment">-- clause we ought to copy over the extra ones.</span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-comment">-- e.g. if the user wrote:</span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-414"></span><span>        </span><span class="hs-comment">--   bar : Bool -&gt; Bool</span><span>
</span><span id="line-415"></span><span>        </span><span class="hs-comment">--   bar false = false</span><span>
</span><span id="line-416"></span><span>        </span><span class="hs-comment">--   bar = \ _ -&gt; true</span><span>
</span><span id="line-417"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-418"></span><span>        </span><span class="hs-comment">-- then for the second clause the @extra@ patterns will be @[true]@.</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774764"><span class="annot"><span class="annottext">extra :: [NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774764"><span class="hs-identifier hs-var hs-var">extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern]
forall a. Nat -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774766"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern])
-&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774769"><span class="hs-identifier hs-var">sps</span></a></span><span>
</span><span id="line-421"></span><span>            </span><span id="local-6989586621680774763"><span class="annot"><span class="annottext">n_extra :: Nat
</span><a href="#local-6989586621680774763"><span class="hs-identifier hs-var hs-var">n_extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774764"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;extra  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774764"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span>        </span><span class="hs-comment">-- When we add the extra patterns we also update the type</span><span>
</span><span id="line-426"></span><span>        </span><span class="hs-comment">-- and the body of the clause.</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span>        </span><span id="local-6989586621680774762"><span class="annot"><span class="annottext">Maybe (Arg (TelV Type))
</span><a href="#local-6989586621680774762"><span class="hs-identifier hs-var">mtv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Type -&gt; TCMT IO (Arg (TelV Type)))
-&gt; Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Arg Type -&gt; TCMT IO (Arg (TelV Type)))
 -&gt; Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type))))
-&gt; ((Type -&gt; TCMT IO (TelV Type))
    -&gt; Arg Type -&gt; TCMT IO (Arg (TelV Type)))
-&gt; (Type -&gt; TCMT IO (TelV Type))
-&gt; Maybe (Arg Type)
-&gt; TCMT IO (Maybe (Arg (TelV Type)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO (TelV Type))
-&gt; Arg Type -&gt; TCMT IO (Arg (TelV Type))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *). PureTCM m =&gt; Nat -&gt; Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpToPath"><span class="hs-identifier hs-var">telViewUpToPath</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774763"><span class="hs-identifier hs-var">n_extra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type))))
-&gt; Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var hs-var">clauseType</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-429"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774759"><span class="annot"><span class="annottext">ty :: Maybe (Arg Type)
</span><a href="#local-6989586621680774759"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg (TelV Type) -&gt; Arg Type)
-&gt; Maybe (Arg (TelV Type)) -&gt; Maybe (Arg Type)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Arg (TelV Type) -&gt; Arg Type)
 -&gt; Maybe (Arg (TelV Type)) -&gt; Maybe (Arg Type))
-&gt; ((TelV Type -&gt; Type) -&gt; Arg (TelV Type) -&gt; Arg Type)
-&gt; (TelV Type -&gt; Type)
-&gt; Maybe (Arg (TelV Type))
-&gt; Maybe (Arg Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TelV Type -&gt; Type) -&gt; Arg (TelV Type) -&gt; Arg Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; Substitution' DeBruijnPattern
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([DeBruijnPattern] -&gt; [DeBruijnPattern])
-&gt; [DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NamedArg DeBruijnPattern -&gt; DeBruijnPattern)
-&gt; [NamedArg DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">NamedArg DeBruijnPattern -&gt; DeBruijnPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774764"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
-&gt; Substitution' DeBruijnPattern -&gt; Substitution' DeBruijnPattern
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; Substitution' DeBruijnPattern -&gt; Substitution' DeBruijnPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774763"><span class="hs-identifier hs-var">n_extra</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774765"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern -&gt; Type -&gt; Type
forall a. TermSubst a =&gt; Substitution' DeBruijnPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#applyPatSubst"><span class="hs-operator hs-var">`applyPatSubst`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; (TelV Type -&gt; Type) -&gt; TelV Type -&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TelV Type -&gt; Type
forall a. TelV a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#theCore"><span class="hs-identifier hs-var hs-var">theCore</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg (TelV Type))
</span><a href="#local-6989586621680774762"><span class="hs-identifier hs-var">mtv</span></a></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;new ty =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type) -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type)
</span><a href="#local-6989586621680774759"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span>        </span><span class="annot"><span class="annottext">Clause -&gt; TCM Clause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCM Clause) -&gt; Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-434"></span><span>             </span><span class="annot"><span class="annottext">Clause :: Range
-&gt; Range
-&gt; Telescope
-&gt; [NamedArg DeBruijnPattern]
-&gt; Maybe Term
-&gt; Maybe (Arg Type)
-&gt; Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; ExpandedEllipsis
-&gt; Clause
</span><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var hs-var">clauseLHSRange</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-435"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var hs-var">clauseFullRange</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-436"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774770"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-437"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
Substitution' (SubstArg [NamedArg DeBruijnPattern])
</span><a href="#local-6989586621680774765"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg DeBruijnPattern])
-&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774766"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
-&gt; [NamedArg DeBruijnPattern] -&gt; [NamedArg DeBruijnPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774764"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-438"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Elims
</span><a href="Agda.Syntax.Internal.Pattern.html#patternsToElims"><span class="hs-identifier hs-var">patternsToElims</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774764"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; (Term -&gt; Term) -&gt; Term -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774765"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern -&gt; Term -&gt; Term
forall a. TermSubst a =&gt; Substitution' DeBruijnPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#applyPatSubst"><span class="hs-operator hs-var">`applyPatSubst`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Maybe Term -&gt; Maybe Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var hs-var">clauseBody</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-439"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type)
</span><a href="#local-6989586621680774759"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-440"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var hs-var">clauseCatchall</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-441"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">clauseExact</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var hs-var">clauseExact</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-442"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var hs-var">clauseRecursive</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-443"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var hs-var">clauseUnreachable</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-444"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var hs-var">clauseEllipsis</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774768"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-445"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-446"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-447"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680774749"><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774749"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774748"><span class="annot"><span class="annottext">[SplitPattern]
</span><a href="#local-6989586621680774748"><span class="hs-identifier hs-var">qs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitInstantiation -&gt; ([Nat], [SplitPattern])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">SplitInstantiation
</span><a href="#local-6989586621680774767"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-448"></span><span>        </span><span id="local-6989586621680774747"><span class="annot"><span class="annottext">mps' :: [(Nat, DeBruijnPattern)]
</span><a href="#local-6989586621680774747"><span class="hs-identifier hs-var hs-var">mps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; [DeBruijnPattern] -&gt; [(Nat, DeBruijnPattern)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774749"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">([DeBruijnPattern] -&gt; [(Nat, DeBruijnPattern)])
-&gt; [DeBruijnPattern] -&gt; [(Nat, DeBruijnPattern)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NamedArg DeBruijnPattern -&gt; DeBruijnPattern)
-&gt; [NamedArg DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">NamedArg DeBruijnPattern -&gt; DeBruijnPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; [DeBruijnPattern])
-&gt; [NamedArg DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; NamedArg SplitPattern
forall a. a -&gt; NamedArg a
</span><a href="Agda.Syntax.Common.html#defaultNamedArg"><span class="hs-identifier hs-var">defaultNamedArg</span></a></span><span> </span><span class="annot"><span class="annottext">[SplitPattern]
</span><a href="#local-6989586621680774748"><span class="hs-identifier hs-var">qs</span></a></span><span>
</span><span id="line-449"></span><span>        </span><span id="local-6989586621680774765"><span class="annot"><span class="annottext">s :: Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774765"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; Substitution' DeBruijnPattern
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Nat] -&gt; (Nat -&gt; DeBruijnPattern) -&gt; [DeBruijnPattern]
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">[Nat] -&gt; Nat
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">maximum</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="annot"><span class="annottext">Nat -&gt; [Nat] -&gt; [Nat]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774749"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">((Nat -&gt; DeBruijnPattern) -&gt; [DeBruijnPattern])
-&gt; (Nat -&gt; DeBruijnPattern) -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774744"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774744"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeBruijnPattern -&gt; Maybe DeBruijnPattern -&gt; DeBruijnPattern
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; DeBruijnPattern
forall a. DeBruijn a =&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnVar"><span class="hs-identifier hs-var">deBruijnVar</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774744"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; [(Nat, DeBruijnPattern)] -&gt; Maybe DeBruijnPattern
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">List.lookup</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774744"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[(Nat, DeBruijnPattern)]
</span><a href="#local-6989586621680774747"><span class="hs-identifier hs-var">mps'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span>    </span><span id="local-6989586621680775386"><span class="annot"><a href="#local-6989586621680774824"><span class="hs-identifier hs-type">updateRelevance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775386"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775386"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-452"></span><span>    </span><span id="local-6989586621680774824"><span class="annot"><span class="annottext">updateRelevance :: TCM a -&gt; TCM a
</span><a href="#local-6989586621680774824"><span class="hs-identifier hs-var hs-var">updateRelevance</span></a></span></span><span> </span><span id="local-6989586621680774740"><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621680774740"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-453"></span><span>      </span><span class="hs-comment">-- Don't do anything if there is no target type info.</span><span>
</span><span id="line-454"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; TCM a -&gt; (Dom Type -&gt; TCM a) -&gt; TCM a
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774825"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621680774740"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCM a) -&gt; TCM a) -&gt; (Dom Type -&gt; TCM a) -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774738"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774738"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>        </span><span class="hs-comment">-- TODO (2018-10-16): if proofs get erased in the compiler, also wake erased vars!</span><span>
</span><span id="line-456"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774737"><span class="annot"><span class="annottext">m :: Modality
</span><a href="#local-6989586621680774737"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Modality
forall a. LensModality a =&gt; a -&gt; Modality
</span><a href="Agda.Syntax.Common.html#getModality"><span class="hs-identifier hs-var">getModality</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774738"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-457"></span><span>        </span><span class="annot"><span class="annottext">Modality -&gt; TCM a -&gt; TCM a
forall (tcm :: * -&gt; *) m a.
(MonadTCEnv tcm, LensModality m) =&gt;
m -&gt; tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Irrelevance.html#applyModalityToContext"><span class="hs-identifier hs-var">applyModalityToContext</span></a></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621680774737"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621680774740"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span>    </span><span class="annot"><a href="#local-6989586621680774787"><span class="hs-identifier hs-type">continue</span></a></span><span>
</span><span id="line-460"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-461"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-type">AllowPartialCover</span></a></span><span>
</span><span id="line-462"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-464"></span><span>    </span><span id="local-6989586621680774787"><span class="annot"><span class="annottext">continue :: BlockingVars
-&gt; AllowPartialCover
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
</span><a href="#local-6989586621680774787"><span class="hs-identifier hs-var hs-var">continue</span></a></span></span><span> </span><span id="local-6989586621680774734"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774734"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621680774733"><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621680774733"><span class="hs-identifier hs-var">allowPartialCover</span></a></span></span><span> </span><span id="local-6989586621680774732"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774732"><span class="hs-identifier hs-var">handle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>      </span><span id="local-6989586621680774731"><span class="annot"><span class="annottext">Either SplitError (Covering, BlockingVar)
</span><a href="#local-6989586621680774731"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(BlockingVar
 -&gt; TCMT IO (Either SplitError (Covering, BlockingVar)))
-&gt; BlockingVars
-&gt; TCMT IO (Either SplitError (Covering, BlockingVar))
forall (m :: * -&gt; *) a err b.
Monad m =&gt;
(a -&gt; m (Either err b)) -&gt; [a] -&gt; m (Either err b)
</span><a href="Agda.Utils.Monad.html#altM1"><span class="hs-identifier hs-var">altM1</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774729"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774729"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; (Covering, BlockingVar))
-&gt; Either SplitError Covering
-&gt; Either SplitError (Covering, BlockingVar)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774729"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either SplitError Covering
 -&gt; Either SplitError (Covering, BlockingVar))
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCMT IO (Either SplitError (Covering, BlockingVar))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Induction
-&gt; AllowPartialCover
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#Inductive"><span class="hs-identifier hs-var">Inductive</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621680774733"><span class="hs-identifier hs-var">allowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774729"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774734"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-466"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either SplitError (Covering, BlockingVar)
</span><a href="#local-6989586621680774731"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-467"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680774726"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774726"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774732"><span class="hs-identifier hs-var">handle</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774726"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-468"></span><span>        </span><span class="hs-comment">-- If we get the empty covering, we have reached an impossible case</span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-comment">-- and are done.</span><span>
</span><span id="line-470"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span id="local-6989586621680774725"><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774725"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-471"></span><span>         </span><span class="hs-keyword">do</span><span>
</span><span id="line-472"></span><span>          </span><span class="hs-comment">-- TODO Andrea: I guess an empty pattern is not part of the cover?</span><span>
</span><span id="line-473"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774724"><span class="annot"><span class="annottext">qs :: [a]
</span><a href="#local-6989586621680774724"><span class="hs-identifier hs-var hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-474"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; SplitTree
forall a. Nat -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-var">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774827"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Clause]
forall a. [a]
</span><a href="#local-6989586621680774724"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-475"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span id="local-6989586621680774723"><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774723"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774722"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774722"><span class="hs-identifier hs-var">scs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774721"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774721"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-476"></span><span>          </span><span id="local-6989586621680774720"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774720"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-477"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774719"><span class="annot"><span class="annottext">fallback :: TCMT IO [Clause]
</span><a href="#local-6989586621680774719"><span class="hs-identifier hs-var hs-var">fallback</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; TCMT IO [Clause]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-478"></span><span>            </span><span class="annot"><span class="annottext">TCMT IO (Maybe QName)
-&gt; TCMT IO [Clause]
-&gt; (QName -&gt; TCMT IO [Clause])
-&gt; TCMT IO [Clause]
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCMT IO (Maybe QName)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
VerboseKey -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getPrimitiveName%27"><span class="hs-identifier hs-var">getPrimitiveName'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-var">builtinHComp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Clause]
</span><a href="#local-6989586621680774719"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="annot"><span class="annottext">((QName -&gt; TCMT IO [Clause]) -&gt; TCMT IO [Clause])
-&gt; (QName -&gt; TCMT IO [Clause]) -&gt; TCMT IO [Clause]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774715"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774715"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-479"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774714"><span class="annot"><span class="annottext">isComp :: SplitTag -&gt; Bool
</span><a href="#local-6989586621680774714"><span class="hs-identifier hs-var hs-var">isComp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-480"></span><span>                  </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-type">SplitCon</span></a></span><span> </span><span id="local-6989586621680774712"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774712"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774715"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774712"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-481"></span><span>                  </span><span class="annot"><span class="annottext">SplitTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-482"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
-&gt; TCMT IO [Clause]
-&gt; ((SplitTag, SplitClause) -&gt; TCMT IO [Clause])
-&gt; TCMT IO [Clause]
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; Bool)
-&gt; [(SplitTag, SplitClause)] -&gt; Maybe (SplitTag, SplitClause)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">List.find</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag -&gt; Bool
</span><a href="#local-6989586621680774714"><span class="hs-identifier hs-var">isComp</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitTag -&gt; Bool)
-&gt; ((SplitTag, SplitClause) -&gt; SplitTag)
-&gt; (SplitTag, SplitClause)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; SplitTag
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774722"><span class="hs-identifier hs-var">scs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Clause]
</span><a href="#local-6989586621680774719"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause) -&gt; TCMT IO [Clause]) -&gt; TCMT IO [Clause])
-&gt; ((SplitTag, SplitClause) -&gt; TCMT IO [Clause])
-&gt; TCMT IO [Clause]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774710"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774710"><span class="hs-identifier hs-var">newSc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-483"></span><span>            </span><span class="annot"><span class="annottext">[Clause] -&gt; Clause -&gt; [Clause]
forall a. [a] -&gt; a -&gt; [a]
</span><a href="Agda.Utils.List.html#snoc"><span class="hs-identifier hs-var">snoc</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; [Clause]) -&gt; TCM Clause -&gt; TCMT IO [Clause]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Arg Nat
-&gt; BlockingVar
-&gt; SplitClause
-&gt; SplitClause
-&gt; TCM Clause
</span><a href="Agda.TypeChecking.Coverage.html#createMissingHCompClause"><span class="hs-identifier hs-var">createMissingHCompClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774723"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774721"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774710"><span class="hs-identifier hs-var">newSc</span></a></span><span>
</span><span id="line-484"></span><span>          </span><span id="local-6989586621680774707"><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774707"><span class="hs-identifier hs-var">results</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; TCM CoverResult)
-&gt; [(SplitTag, SplitClause)] -&gt; TCMT IO [CoverResult]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774720"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; ((SplitTag, SplitClause) -&gt; SplitClause)
-&gt; (SplitTag, SplitClause)
-&gt; TCM CoverResult
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774722"><span class="hs-identifier hs-var">scs</span></a></span><span>
</span><span id="line-485"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774706"><span class="annot"><span class="annottext">trees :: [SplitTree]
</span><a href="#local-6989586621680774706"><span class="hs-identifier hs-var hs-var">trees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; SplitTree) -&gt; [CoverResult] -&gt; [SplitTree]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; SplitTree
</span><a href="Agda.TypeChecking.Coverage.html#coverSplitTree"><span class="hs-identifier hs-var hs-var">coverSplitTree</span></a></span><span>      </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774707"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-486"></span><span>              </span><span id="local-6989586621680774705"><span class="annot"><span class="annottext">useds :: [IntSet]
</span><a href="#local-6989586621680774705"><span class="hs-identifier hs-var hs-var">useds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverUsedClauses"><span class="hs-identifier hs-var hs-var">coverUsedClauses</span></a></span><span>    </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774707"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-487"></span><span>              </span><span id="local-6989586621680774704"><span class="annot"><span class="annottext">psss :: [[(Telescope, [NamedArg DeBruijnPattern])]]
</span><a href="#local-6989586621680774704"><span class="hs-identifier hs-var hs-var">psss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [(Telescope, [NamedArg DeBruijnPattern])])
-&gt; [CoverResult] -&gt; [[(Telescope, [NamedArg DeBruijnPattern])]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="Agda.TypeChecking.Coverage.html#coverMissingClauses"><span class="hs-identifier hs-var hs-var">coverMissingClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774707"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-488"></span><span>              </span><span id="local-6989586621680774703"><span class="annot"><span class="annottext">qsss :: [[Clause]]
</span><a href="#local-6989586621680774703"><span class="hs-identifier hs-var hs-var">qsss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [Clause]) -&gt; [CoverResult] -&gt; [[Clause]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [Clause]
</span><a href="Agda.TypeChecking.Coverage.html#coverPatterns"><span class="hs-identifier hs-var hs-var">coverPatterns</span></a></span><span>       </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774707"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-489"></span><span>              </span><span id="local-6989586621680774702"><span class="annot"><span class="annottext">noex :: [IntSet]
</span><a href="#local-6989586621680774702"><span class="hs-identifier hs-var hs-var">noex</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverNoExactClauses"><span class="hs-identifier hs-var hs-var">coverNoExactClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774707"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-490"></span><span>          </span><span class="hs-comment">-- Jesper, 2016-03-10  We need to remember which variables were</span><span>
</span><span id="line-491"></span><span>          </span><span class="hs-comment">-- eta-expanded by the unifier in order to generate a correct split</span><span>
</span><span id="line-492"></span><span>          </span><span class="hs-comment">-- tree (see Issue 1872).</span><span>
</span><span id="line-493"></span><span>          </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.eta&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-494"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;etaRecordSplits&quot;</span></span><span>
</span><span id="line-495"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-496"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;n   = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Nat -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774723"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;scs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)] -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774722"><span class="hs-identifier hs-var">scs</span></a></span><span>
</span><span id="line-498"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps  = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774826"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-500"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-501"></span><span>          </span><span class="hs-comment">-- TODO Andrea: do something with etaRecordSplits and qsss?</span><span>
</span><span id="line-502"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774701"><span class="annot"><span class="annottext">trees' :: [(SplitTag, SplitTree)]
</span><a href="#local-6989586621680774701"><span class="hs-identifier hs-var hs-var">trees'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; SplitTree -&gt; (SplitTag, SplitTree))
-&gt; [(SplitTag, SplitClause)]
-&gt; [SplitTree]
-&gt; [(SplitTag, SplitTree)]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
-&gt; [NamedArg SplitPattern]
-&gt; (SplitTag, SplitClause)
-&gt; SplitTree
-&gt; (SplitTag, SplitTree)
</span><a href="#local-6989586621680774699"><span class="hs-identifier hs-var">etaRecordSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Nat -&gt; Nat
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774723"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774826"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774722"><span class="hs-identifier hs-var">scs</span></a></span><span> </span><span class="annot"><span class="annottext">[SplitTree]
</span><a href="#local-6989586621680774706"><span class="hs-identifier hs-var">trees</span></a></span><span>
</span><span id="line-503"></span><span>              </span><span id="local-6989586621680774697"><span class="annot"><span class="annottext">tree :: SplitTree
</span><a href="#local-6989586621680774697"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Nat -&gt; LazySplit -&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a. Arg Nat -&gt; LazySplit -&gt; SplitTrees' a -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitAt"><span class="hs-identifier hs-var">SplitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774723"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">LazySplit
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#StrictSplit"><span class="hs-identifier hs-var">StrictSplit</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitTree)]
</span><a href="#local-6989586621680774701"><span class="hs-identifier hs-var">trees'</span></a></span><span>   </span><span class="hs-comment">-- TODO: Lazy?</span><span>
</span><span id="line-504"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774697"><span class="hs-identifier hs-var">tree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IntSet] -&gt; IntSet
forall (f :: * -&gt; *). Foldable f =&gt; f IntSet -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.unions</span></span><span> </span><span class="annot"><span class="annottext">[IntSet]
</span><a href="#local-6989586621680774705"><span class="hs-identifier hs-var">useds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[(Telescope, [NamedArg DeBruijnPattern])]]
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[(Telescope, [NamedArg DeBruijnPattern])]]
</span><a href="#local-6989586621680774704"><span class="hs-identifier hs-var">psss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Clause]] -&gt; [Clause]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[Clause]]
</span><a href="#local-6989586621680774703"><span class="hs-identifier hs-var">qsss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IntSet] -&gt; IntSet
forall (f :: * -&gt; *). Foldable f =&gt; f IntSet -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.unions</span></span><span> </span><span class="annot"><span class="annottext">[IntSet]
</span><a href="#local-6989586621680774702"><span class="hs-identifier hs-var">noex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-comment">-- Try to split result</span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><a href="#local-6989586621680774792"><span class="hs-identifier hs-type">trySplitRes</span></a></span><span>
</span><span id="line-508"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnResult"><span class="hs-identifier hs-type">BlockedOnResult</span></a></span><span> </span><span class="hs-comment">-- ^ Are we blocked on the result?</span><span>
</span><span id="line-509"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>            </span><span class="hs-comment">-- ^ Is this the last thing we try?</span><span>
</span><span id="line-510"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Handler for 'SplitError'</span><span>
</span><span id="line-511"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span class="hs-comment">-- ^ Continuation</span><span>
</span><span id="line-512"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-comment">-- not blocked on result: try regular splits</span><span>
</span><span id="line-514"></span><span>    </span><span id="local-6989586621680774792"><span class="annot"><span class="annottext">trySplitRes :: BlockedOnResult
-&gt; Bool
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
-&gt; TCM CoverResult
</span><a href="#local-6989586621680774792"><span class="hs-identifier hs-var hs-var">trySplitRes</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockedOnResult
</span><a href="Agda.TypeChecking.Coverage.Match.html#NotBlockedOnResult"><span class="hs-identifier hs-var">NotBlockedOnResult</span></a></span><span> </span><span id="local-6989586621680774691"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774691"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621680774690"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774690"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621680774689"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774689"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-515"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774691"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- there must be *some* reason we are blocked</span><span>
</span><span id="line-516"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774689"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-comment">-- blocked on arguments that are not yet introduced:</span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-comment">-- we must split on a variable so that the target type becomes a pi type</span><span>
</span><span id="line-520"></span><span>    </span><span class="annot"><a href="#local-6989586621680774792"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnApply"><span class="hs-identifier hs-type">BlockedOnApply</span></a></span><span> </span><span class="annot"><span class="annottext">ApplyOrIApply
</span><a href="Agda.TypeChecking.Coverage.Match.html#IsApply"><span class="hs-identifier hs-var">IsApply</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774686"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774686"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621680774685"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774685"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621680774684"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774684"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-521"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774686"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- already ruled out by lhs checker</span><span>
</span><span id="line-522"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774684"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-523"></span><span>    </span><span class="hs-comment">-- ...or it was an IApply pattern, so we might just need to introduce the variable now.</span><span>
</span><span id="line-524"></span><span>    </span><span class="annot"><a href="#local-6989586621680774792"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnApply"><span class="hs-identifier hs-type">BlockedOnApply</span></a></span><span> </span><span class="annot"><span class="annottext">ApplyOrIApply
</span><a href="Agda.TypeChecking.Coverage.Match.html#IsIApply"><span class="hs-identifier hs-var">IsIApply</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774682"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774682"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621680774681"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774681"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621680774680"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774680"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-525"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-526"></span><span>         </span><span class="annot"><span class="annottext">TCMT IO (Maybe SplitClause)
-&gt; TCM CoverResult
-&gt; (SplitClause -&gt; TCM CoverResult)
-&gt; TCM CoverResult
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-var">splitResultPath</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774678"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitClause -&gt; TCM CoverResult) -&gt; TCM CoverResult)
-&gt; (SplitClause -&gt; TCM CoverResult) -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; ((Telescope, SplitClause) -&gt; SplitClause)
-&gt; (Telescope, SplitClause)
-&gt; TCM CoverResult
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; TCM CoverResult)
-&gt; (SplitClause -&gt; TCM (Telescope, SplitClause))
-&gt; SplitClause
-&gt; TCM CoverResult
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span>
</span><span id="line-527"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-528"></span><span>        </span><span id="local-6989586621680774678"><span class="annot"><span class="annottext">fallback :: TCM CoverResult
</span><a href="#local-6989586621680774678"><span class="hs-identifier hs-var hs-var">fallback</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774682"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- already ruled out by lhs checker?</span><span>
</span><span id="line-529"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774680"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-comment">-- blocked on result but there are catchalls:</span><span>
</span><span id="line-531"></span><span>    </span><span class="hs-comment">-- try regular splits if there are any, or else throw an error,</span><span>
</span><span id="line-532"></span><span>    </span><span class="hs-comment">-- this is nicer than continuing and reporting unreachable clauses</span><span>
</span><span id="line-533"></span><span>    </span><span class="hs-comment">-- (see issue #2833)</span><span>
</span><span id="line-534"></span><span>    </span><span class="annot"><a href="#local-6989586621680774792"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnProj"><span class="hs-identifier hs-type">BlockedOnProj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774675"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774675"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621680774674"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774674"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621680774673"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774673"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-535"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774675"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774674"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CosplitCatchall"><span class="hs-identifier hs-var">CosplitCatchall</span></a></span><span>
</span><span id="line-536"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774673"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-537"></span><span>    </span><span class="hs-comment">-- all clauses have an unsplit copattern: try to split</span><span>
</span><span id="line-538"></span><span>    </span><span class="annot"><a href="#local-6989586621680774792"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnProj"><span class="hs-identifier hs-type">BlockedOnProj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774671"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774671"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621680774670"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774670"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621680774669"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774669"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-539"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCMT IO ()) -&gt; VerboseKey -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;blocked by projection pattern&quot;</span></span><span>
</span><span id="line-540"></span><span>      </span><span class="hs-comment">-- forM is a monadic map over a Maybe here</span><span>
</span><span id="line-541"></span><span>      </span><span id="local-6989586621680774668"><span class="annot"><span class="annottext">Either SplitError Covering
</span><a href="#local-6989586621680774668"><span class="hs-identifier hs-var">mcov</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-var">splitResultRecord</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774828"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-542"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either SplitError Covering
</span><a href="#local-6989586621680774668"><span class="hs-identifier hs-var">mcov</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-543"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680774666"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774666"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-544"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774671"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621680774670"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621680774666"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-545"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621680774669"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-546"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span id="local-6989586621680774665"><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774665"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774664"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774664"><span class="hs-identifier hs-var">scs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-547"></span><span>          </span><span class="hs-comment">-- If result splitting was successful, continue coverage checking.</span><span>
</span><span id="line-548"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680774663"><span class="annot"><span class="annottext">[SplitTag]
</span><a href="#local-6989586621680774663"><span class="hs-identifier hs-var">projs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774662"><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774662"><span class="hs-identifier hs-var">results</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)] -&gt; ([SplitTag], [CoverResult])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">([(SplitTag, CoverResult)] -&gt; ([SplitTag], [CoverResult]))
-&gt; TCMT IO [(SplitTag, CoverResult)]
-&gt; TCMT IO ([SplitTag], [CoverResult])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-549"></span><span>            </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, CoverResult))
-&gt; [(SplitTag, SplitClause)] -&gt; TCMT IO [(SplitTag, CoverResult)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; (SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, CoverResult)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Decoration t, Functor m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="Agda.Utils.Functor.html#traverseF"><span class="hs-identifier hs-var">traverseF</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitClause -&gt; TCM CoverResult)
 -&gt; (SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, CoverResult))
-&gt; (SplitClause -&gt; TCM CoverResult)
-&gt; (SplitTag, SplitClause)
-&gt; TCMT IO (SplitTag, CoverResult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774830"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621680774829"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; (SplitClause -&gt; TCMT IO SplitClause)
-&gt; SplitClause
-&gt; TCM CoverResult
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; SplitClause)
-&gt; (SplitClause -&gt; TCM (Telescope, SplitClause))
-&gt; SplitClause
-&gt; TCMT IO SplitClause
forall (m :: * -&gt; *) b c a.
Functor m =&gt;
(b -&gt; c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><a href="Agda.Utils.Functor.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774664"><span class="hs-identifier hs-var">scs</span></a></span><span>
</span><span id="line-550"></span><span>            </span><span class="hs-comment">-- OR:</span><span>
</span><span id="line-551"></span><span>            </span><span class="hs-comment">-- forM scs $ \ (proj, sc') -&gt; (proj,) &lt;$&gt; do</span><span>
</span><span id="line-552"></span><span>            </span><span class="hs-comment">--   cover f cs =&lt;&lt; do</span><span>
</span><span id="line-553"></span><span>            </span><span class="hs-comment">--     snd &lt;$&gt; fixTarget sc'</span><span>
</span><span id="line-554"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774659"><span class="annot"><span class="annottext">trees :: [SplitTree]
</span><a href="#local-6989586621680774659"><span class="hs-identifier hs-var hs-var">trees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; SplitTree) -&gt; [CoverResult] -&gt; [SplitTree]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; SplitTree
</span><a href="Agda.TypeChecking.Coverage.html#coverSplitTree"><span class="hs-identifier hs-var hs-var">coverSplitTree</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774662"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-555"></span><span>              </span><span id="local-6989586621680774658"><span class="annot"><span class="annottext">useds :: [IntSet]
</span><a href="#local-6989586621680774658"><span class="hs-identifier hs-var hs-var">useds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverUsedClauses"><span class="hs-identifier hs-var hs-var">coverUsedClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774662"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-556"></span><span>              </span><span id="local-6989586621680774657"><span class="annot"><span class="annottext">psss :: [[(Telescope, [NamedArg DeBruijnPattern])]]
</span><a href="#local-6989586621680774657"><span class="hs-identifier hs-var hs-var">psss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [(Telescope, [NamedArg DeBruijnPattern])])
-&gt; [CoverResult] -&gt; [[(Telescope, [NamedArg DeBruijnPattern])]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [(Telescope, [NamedArg DeBruijnPattern])]
</span><a href="Agda.TypeChecking.Coverage.html#coverMissingClauses"><span class="hs-identifier hs-var hs-var">coverMissingClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774662"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-557"></span><span>              </span><span id="local-6989586621680774656"><span class="annot"><span class="annottext">qsss :: [[Clause]]
</span><a href="#local-6989586621680774656"><span class="hs-identifier hs-var hs-var">qsss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [Clause]) -&gt; [CoverResult] -&gt; [[Clause]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [Clause]
</span><a href="Agda.TypeChecking.Coverage.html#coverPatterns"><span class="hs-identifier hs-var hs-var">coverPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774662"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-558"></span><span>              </span><span id="local-6989586621680774655"><span class="annot"><span class="annottext">noex :: [IntSet]
</span><a href="#local-6989586621680774655"><span class="hs-identifier hs-var hs-var">noex</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.html#coverNoExactClauses"><span class="hs-identifier hs-var hs-var">coverNoExactClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621680774662"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-559"></span><span>              </span><span id="local-6989586621680774654"><span class="annot"><span class="annottext">tree :: SplitTree
</span><a href="#local-6989586621680774654"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Nat -&gt; LazySplit -&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a. Arg Nat -&gt; LazySplit -&gt; SplitTrees' a -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitAt"><span class="hs-identifier hs-var">SplitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774665"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">LazySplit
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#StrictSplit"><span class="hs-identifier hs-var">StrictSplit</span></a></span><span> </span><span class="annot"><span class="annottext">([(SplitTag, SplitTree)] -&gt; SplitTree)
-&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SplitTag] -&gt; [SplitTree] -&gt; [(SplitTag, SplitTree)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[SplitTag]
</span><a href="#local-6989586621680774663"><span class="hs-identifier hs-var">projs</span></a></span><span> </span><span class="annot"><span class="annottext">[SplitTree]
</span><a href="#local-6989586621680774659"><span class="hs-identifier hs-var">trees</span></a></span><span>   </span><span class="hs-comment">-- TODO: Lazy?</span><span>
</span><span id="line-560"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774654"><span class="hs-identifier hs-var">tree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IntSet] -&gt; IntSet
forall (f :: * -&gt; *). Foldable f =&gt; f IntSet -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.unions</span></span><span> </span><span class="annot"><span class="annottext">[IntSet]
</span><a href="#local-6989586621680774658"><span class="hs-identifier hs-var">useds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[(Telescope, [NamedArg DeBruijnPattern])]]
-&gt; [(Telescope, [NamedArg DeBruijnPattern])]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[(Telescope, [NamedArg DeBruijnPattern])]]
</span><a href="#local-6989586621680774657"><span class="hs-identifier hs-var">psss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Clause]] -&gt; [Clause]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[Clause]]
</span><a href="#local-6989586621680774656"><span class="hs-identifier hs-var">qsss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IntSet] -&gt; IntSet
forall (f :: * -&gt; *). Foldable f =&gt; f IntSet -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.unions</span></span><span> </span><span class="annot"><span class="annottext">[IntSet]
</span><a href="#local-6989586621680774655"><span class="hs-identifier hs-var">noex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span>    </span><span class="annot"><a href="#local-6989586621680774653"><span class="hs-identifier hs-type">gatherEtaSplits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-563"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-564"></span><span>    </span><span id="local-6989586621680774653"><span class="annot"><span class="annottext">gatherEtaSplits :: Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var hs-var">gatherEtaSplits</span></a></span></span><span> </span><span id="local-6989586621680774652"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774652"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774651"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774651"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-565"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774652"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- we should have encountered the main</span><span>
</span><span id="line-566"></span><span>                                    </span><span class="hs-comment">-- split by now already</span><span>
</span><span id="line-567"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-568"></span><span>    </span><span class="annot"><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span id="local-6989586621680774650"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774649"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774648"><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774648"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621680774647"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774648"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-569"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774645"><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621680774645"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-570"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621680774644"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- this is the main split</span><span>
</span><span id="line-571"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774648"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-572"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">DotP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-573"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">ConP</span></a></span><span>  </span><span class="annot"><span class="annottext">ConHead
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774641"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774641"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774641"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-574"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-575"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-576"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-577"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">DefP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774636"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774636"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774636"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-comment">-- __IMPOSSIBLE__ -- Andrea: maybe?</span><span>
</span><span id="line-578"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-579"></span><span>           </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; NamedArg a -&gt; NamedArg b
</span><a href="Agda.Syntax.Common.html#updateNamedArg"><span class="hs-identifier hs-var">updateNamedArg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621680774644"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774648"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-580"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680774644"><span class="annot"><span class="annottext">p' :: SplitPattern
</span><a href="#local-6989586621680774644"><span class="hs-identifier hs-var hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Nat -&gt; SplitPattern
forall a. EndoSubst a =&gt; Substitution' a -&gt; Nat -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var hs-var">scSubst</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; SplitPattern) -&gt; Nat -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar -&gt; Nat
</span><a href="Agda.TypeChecking.Coverage.Match.html#splitPatVarIndex"><span class="hs-identifier hs-var hs-var">splitPatVarIndex</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621680774645"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-581"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-582"></span><span>           </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; NamedArg a -&gt; NamedArg b
</span><a href="Agda.Syntax.Common.html#updateNamedArg"><span class="hs-identifier hs-var">updateNamedArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' (SubstArg SplitPattern)
-&gt; SplitPattern -&gt; SplitPattern
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var hs-var">scSubst</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774648"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-583"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">DotP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774648"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-comment">-- count dot patterns</span><span>
</span><span id="line-584"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">ConP</span></a></span><span>  </span><span class="annot"><span class="annottext">ConHead
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774632"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774632"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774632"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">DefP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774631"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774631"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774631"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-587"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774650"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774649"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774647"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span>    </span><span class="annot"><a href="#local-6989586621680774630"><span class="hs-identifier hs-type">addEtaSplits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span>
</span><span id="line-590"></span><span>    </span><span id="local-6989586621680774630"><span class="annot"><span class="annottext">addEtaSplits :: Nat -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621680774630"><span class="hs-identifier hs-var hs-var">addEtaSplits</span></a></span></span><span> </span><span id="local-6989586621680774629"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774629"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span id="local-6989586621680774628"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774628"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774628"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-591"></span><span>    </span><span class="annot"><a href="#local-6989586621680774630"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span id="local-6989586621680774627"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774627"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774626"><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774626"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621680774625"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774625"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774624"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774624"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774626"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-592"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621680774630"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774627"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774625"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774624"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-593"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">DotP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621680774630"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774627"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774625"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774624"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-594"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">ConP</span></a></span><span> </span><span id="local-6989586621680774622"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774622"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680774621"><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="#local-6989586621680774621"><span class="hs-identifier hs-var">cpi</span></a></span></span><span> </span><span id="local-6989586621680774620"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774620"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arg Nat -&gt; LazySplit -&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a. Arg Nat -&gt; LazySplit -&gt; SplitTrees' a -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitAt"><span class="hs-identifier hs-var">SplitAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680774626"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; Nat -&gt; Arg Nat
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774627"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LazySplit
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#LazySplit"><span class="hs-identifier hs-var">LazySplit</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774622"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621680774630"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774627"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774620"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774625"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774624"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-595"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitTree
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-596"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitTree
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-597"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">DefP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitTree
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- Andrea: maybe?</span><span>
</span><span id="line-598"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621680774630"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774627"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774625"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774624"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="#local-6989586621680774699"><span class="hs-identifier hs-type">etaRecordSplits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>    </span><span id="local-6989586621680774699"><span class="annot"><span class="annottext">etaRecordSplits :: Nat
-&gt; [NamedArg SplitPattern]
-&gt; (SplitTag, SplitClause)
-&gt; SplitTree
-&gt; (SplitTag, SplitTree)
</span><a href="#local-6989586621680774699"><span class="hs-identifier hs-var hs-var">etaRecordSplits</span></a></span></span><span> </span><span id="local-6989586621680774616"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774616"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774615"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774615"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774614"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680774614"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774613"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774613"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774612"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774612"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-603"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680774614"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621680774630"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621680774653"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774616"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774613"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774615"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621680774612"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-604"></span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="hs-comment">-- | Append an hcomp clause to the clauses of a function.</span><span>
</span><span id="line-609"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#createMissingHCompClause"><span class="hs-identifier hs-type">createMissingHCompClause</span></a></span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>
</span><span id="line-611"></span><span>       </span><span class="hs-comment">-- ^ Function name.</span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-comment">-- ^ index of hcomp pattern</span><span>
</span><span id="line-613"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span> </span><span class="hs-comment">-- ^ Blocking var that lead to hcomp split.</span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-comment">-- ^ Clause before the hcomp split</span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-616"></span><span>       </span><span class="hs-comment">-- ^ Clause to add.</span><span>
</span><span id="line-617"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span>
</span><span id="line-618"></span><span id="createMissingHCompClause"><span class="annot"><span class="annottext">createMissingHCompClause :: QName
-&gt; Arg Nat
-&gt; BlockingVar
-&gt; SplitClause
-&gt; SplitClause
-&gt; TCM Clause
</span><a href="Agda.TypeChecking.Coverage.html#createMissingHCompClause"><span class="hs-identifier hs-var hs-var">createMissingHCompClause</span></a></span></span><span> </span><span id="local-6989586621680774611"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774611"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680774610"><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774610"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774609"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774609"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680774608"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774608"><span class="hs-identifier hs-var">old_sc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680774607"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774606"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774606"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680774605"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774605"><span class="hs-identifier hs-var">_sigma'</span></a></span></span><span> </span><span id="local-6989586621680774604"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774604"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680774603"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774603"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Clause -&gt; TCM Clause
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774611"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Clause -&gt; TCM Clause) -&gt; TCM Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-619"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;Trying to create right-hand side of type&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774603"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-620"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;ps = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774606"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tel = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span>  </span><span id="local-6989586621680774602"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774602"><span class="hs-identifier hs-var">io</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; TCM (Maybe Term) -&gt; TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinIOne"><span class="hs-identifier hs-var">builtinIOne</span></a></span><span>
</span><span id="line-624"></span><span>  </span><span id="local-6989586621680774599"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; TCM (Maybe Term) -&gt; TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinIZero"><span class="hs-identifier hs-var">builtinIZero</span></a></span><span>
</span><span id="line-625"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-626"></span><span>    </span><span class="annot"><a href="#local-6989586621680774597"><span class="hs-identifier hs-type">cannotCreate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680775208"><span class="annot"><a href="#local-6989586621680775208"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680775207"><span class="annot"><a href="#local-6989586621680775207"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-type">MonadTCEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775208"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775208"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775208"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Closure"><span class="hs-identifier hs-type">Closure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680775208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775207"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-627"></span><span>    </span><span id="local-6989586621680774597"><span class="annot"><span class="annottext">cannotCreate :: Doc -&gt; Closure (Abs Type) -&gt; m a
</span><a href="#local-6989586621680774597"><span class="hs-identifier hs-var hs-var">cannotCreate</span></a></span></span><span> </span><span id="local-6989586621680774595"><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621680774595"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621680774594"><span class="annot"><span class="annottext">Closure (Abs Type)
</span><a href="#local-6989586621680774594"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-628"></span><span>      </span><span class="annot"><span class="annottext">TypeError -&gt; m a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; m a)
-&gt; (SplitError -&gt; TypeError) -&gt; SplitError -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-var">SplitError</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitError -&gt; m a) -&gt; SplitError -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName
-&gt; (Telescope, [NamedArg DeBruijnPattern])
-&gt; Doc
-&gt; Closure (Abs Type)
-&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CannotCreateMissingClause"><span class="hs-identifier hs-var">CannotCreateMissingClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774611"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774606"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621680774595"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Closure (Abs Type)
</span><a href="#local-6989586621680774594"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774592"><span class="annot"><span class="annottext">old_ps :: Elims
</span><a href="#local-6989586621680774592"><span class="hs-identifier hs-var hs-var">old_ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Elims
</span><a href="Agda.Syntax.Internal.Pattern.html#patternsToElims"><span class="hs-identifier hs-var">patternsToElims</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; Elims)
-&gt; [NamedArg DeBruijnPattern] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var hs-var">scPats</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774608"><span class="hs-identifier hs-var">old_sc</span></a></span><span>
</span><span id="line-630"></span><span>      </span><span id="local-6989586621680774591"><span class="annot"><span class="annottext">old_t :: Dom Type
</span><a href="#local-6989586621680774591"><span class="hs-identifier hs-var hs-var">old_t</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; Dom Type
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Dom Type) -&gt; Dom Type) -&gt; Maybe (Dom Type) -&gt; Dom Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var hs-var">scTarget</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774608"><span class="hs-identifier hs-var">old_sc</span></a></span><span>
</span><span id="line-631"></span><span>      </span><span id="local-6989586621680774589"><span class="annot"><span class="annottext">old_tel :: Telescope
</span><a href="#local-6989586621680774589"><span class="hs-identifier hs-var hs-var">old_tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var hs-var">scTel</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774608"><span class="hs-identifier hs-var">old_sc</span></a></span><span>
</span><span id="line-632"></span><span>      </span><span class="hs-comment">-- old_tel = &#915;(x:H)&#916;</span><span>
</span><span id="line-633"></span><span>      </span><span class="hs-comment">-- &#915;(x:H)&#916; &#8866; old_t</span><span>
</span><span id="line-634"></span><span>      </span><span class="hs-comment">-- vs = iApplyVars old_ps</span><span>
</span><span id="line-635"></span><span>      </span><span class="hs-comment">-- [ &#945; &#8658; b ] = [(i,f old_ps (i=0),f old_ps (i=1)) | i &lt;- vs]</span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span>      </span><span class="hs-comment">-- &#915;(x:H)(&#948; : &#916;) &#8866; [ &#945; &#8658; b ]</span><span>
</span><span id="line-638"></span><span>      </span><span class="hs-comment">-- &#915;(x:H)&#916; &#8866; f old_ps : old_t [ &#945; &#8658; b ]</span><span>
</span><span id="line-639"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp &#966; u u0) &#8866; rhs_we_define : (old_t[ &#945; &#8658; b ])(x = hcomp &#966; u u0)</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span>      </span><span class="hs-comment">-- Extra assumption:</span><span>
</span><span id="line-642"></span><span>      </span><span class="hs-comment">-- tel = &#915;,&#966;,u,u0,&#916;(x = hcomp &#966; u u0),&#916;'</span><span>
</span><span id="line-643"></span><span>      </span><span class="hs-comment">-- ps = old_ps[x = hcomp &#966; u u0],ps'</span><span>
</span><span id="line-644"></span><span>      </span><span class="hs-comment">-- with &#916;' and ps' introduced by fixTarget.</span><span>
</span><span id="line-645"></span><span>      </span><span class="hs-comment">-- So final clause will be:</span><span>
</span><span id="line-646"></span><span>      </span><span class="hs-comment">-- tel &#8866; ps &#8614; rhs_we_define{wkS ..} ps'</span><span>
</span><span id="line-647"></span><span>      </span><span id="local-6989586621680774588"><span class="annot"><span class="annottext">getLevel :: a -&gt; m Term
</span><a href="#local-6989586621680774588"><span class="hs-identifier hs-var hs-var">getLevel</span></a></span></span><span> </span><span id="local-6989586621680774587"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774587"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-648"></span><span>        </span><span id="local-6989586621680774586"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774586"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; m Sort
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; m Sort) -&gt; Sort -&gt; m Sort
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Sort
forall a. LensSort a =&gt; a -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#getSort"><span class="hs-identifier hs-var">getSort</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774587"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-649"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774586"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-650"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621680774583"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621680774583"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; m Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Level' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-var">Level</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621680774583"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-651"></span><span>          </span><span id="local-6989586621680774581"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774581"><span class="hs-identifier hs-var">s</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-652"></span><span>            </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; m ()) -&gt; TCM Doc -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;getLevel, s = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774581"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-653"></span><span>            </span><span class="annot"><span class="annottext">TypeError -&gt; m Term
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; m Term) -&gt; (Doc -&gt; TypeError) -&gt; Doc -&gt; m Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#GenericDocError"><span class="hs-identifier hs-var">GenericDocError</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; m Term) -&gt; m Doc -&gt; m Term
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-654"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;The sort of&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774587"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;should be of the form \&quot;Set l\&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span>      </span><span class="hs-comment">-- &#915; &#8866; hdelta = (x : H)(&#948; : &#916;)</span><span>
</span><span id="line-657"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621680774578"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774578"><span class="hs-identifier hs-var">gamma</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774577"><span class="annot"><span class="annottext">hdelta :: Telescope
</span><a href="#local-6989586621680774577"><span class="hs-identifier hs-var">hdelta</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-type">ExtendTel</span></a></span><span> </span><span id="local-6989586621680774575"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774575"><span class="hs-identifier hs-var">hdom</span></a></span></span><span> </span><span id="local-6989586621680774574"><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Telescope -&gt; (Telescope, Telescope)
</span><a href="Agda.TypeChecking.Telescope.html#splitTelescopeAt"><span class="hs-identifier hs-var">splitTelescopeAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774589"><span class="hs-identifier hs-var">old_tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockingVar -&gt; Nat
</span><a href="Agda.TypeChecking.Coverage.Match.html#blockingVarNo"><span class="hs-identifier hs-var hs-var">blockingVarNo</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774609"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774589"><span class="hs-identifier hs-var">old_tel</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp &#966; u u0) &#8866;</span><span>
</span><span id="line-660"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621680774571"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774571"><span class="hs-identifier hs-var">working_tel</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774570"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774570"><span class="hs-identifier hs-var">_deltaEx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Telescope -&gt; (Telescope, Telescope)
</span><a href="Agda.TypeChecking.Telescope.html#splitTelescopeAt"><span class="hs-identifier hs-var">splitTelescopeAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774578"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0,(x:H)(&#948; : &#916;) &#8866; rhoS : &#915;(x:H)(&#948; : &#916;)</span><span>
</span><span id="line-663"></span><span>      </span><span class="hs-comment">{- rhoS = liftS (size hdelta) $ raiseS 3 -}</span><span>
</span><span id="line-664"></span><span>      </span><span id="local-6989586621680774569"><span class="annot"><span class="annottext">vs :: [Nat]
</span><a href="#local-6989586621680774569"><span class="hs-identifier hs-var hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [Nat]
forall a. DeBruijn a =&gt; [NamedArg (Pattern' a)] -&gt; [Nat]
</span><a href="Agda.TypeChecking.Telescope.Path.html#iApplyVars"><span class="hs-identifier hs-var">iApplyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var hs-var">scPats</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774608"><span class="hs-identifier hs-var">old_sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>
</span><span id="line-666"></span><span>  </span><span class="hs-comment">-- &#915;(x:H)(&#948; : &#916;) &#8866; [ &#945; &#8658; b ] = [(i,f old_ps (i=0),f old_ps (i=1)) | i &lt;- vs]</span><span>
</span><span id="line-667"></span><span>  </span><span id="local-6989586621680774567"><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774567"><span class="hs-identifier hs-var">alphab</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Nat]
-&gt; (Nat -&gt; TCM (Term, (Term, Term))) -&gt; TCM [(Term, (Term, Term))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[Nat]
</span><a href="#local-6989586621680774569"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">((Nat -&gt; TCM (Term, (Term, Term))) -&gt; TCM [(Term, (Term, Term))])
-&gt; (Nat -&gt; TCM (Term, (Term, Term))) -&gt; TCM [(Term, (Term, Term))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774565"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774565"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-668"></span><span>               </span><span class="hs-keyword">let</span><span>
</span><span id="line-669"></span><span>                 </span><span class="hs-comment">-- &#915;(x:H)(&#948; : &#916;) &#8866;</span><span>
</span><span id="line-670"></span><span>                 </span><span id="local-6989586621680774564"><span class="annot"><span class="annottext">tm :: Term
</span><a href="#local-6989586621680774564"><span class="hs-identifier hs-var hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774611"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774592"><span class="hs-identifier hs-var">old_ps</span></a></span><span>
</span><span id="line-671"></span><span>               </span><span class="hs-comment">-- TODO only reduce IApply _ _ (0/1), as to avoid termination problems</span><span>
</span><span id="line-672"></span><span>               </span><span class="hs-special">(</span><span id="local-6989586621680774562"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774562"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774561"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774561"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Term, Term) -&gt; TCM (Term, Term)
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Substitution
forall a. EndoSubst a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#inplaceS"><span class="hs-identifier hs-var">inplaceS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774565"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774564"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Substitution
forall a. EndoSubst a =&gt; Nat -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#inplaceS"><span class="hs-identifier hs-var">inplaceS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774565"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774602"><span class="hs-identifier hs-var">io</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774564"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>               </span><span class="annot"><span class="annottext">(Term, (Term, Term)) -&gt; TCM (Term, (Term, Term))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Term, (Term, Term)) -&gt; TCM (Term, (Term, Term)))
-&gt; (Term, (Term, Term)) -&gt; TCM (Term, (Term, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774565"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774562"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774561"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span>
</span><span id="line-677"></span><span>  </span><span id="local-6989586621680774559"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774559"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-678"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680774558"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774558"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774557"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774557"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM (Type, Term) -&gt; TCM (Type, Term)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774571"><span class="hs-identifier hs-var">working_tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Type, Term) -&gt; TCM (Type, Term))
-&gt; TCM (Type, Term) -&gt; TCM (Type, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-679"></span><span>      </span><span class="hs-comment">-- &#915;(x:H)&#916; &#8866; g = f old_ps : old_t [ &#945; &#8658; b ]</span><span>
</span><span id="line-680"></span><span>      </span><span class="hs-comment">-- &#915;(x:H)(&#948; : &#916;) &#8866; [ &#945; &#8658; b ]</span><span>
</span><span id="line-681"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0 &#8866; &#916;f = i.&#916;[x = hfill &#966; u u0 i]</span><span>
</span><span id="line-682"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#948; : &#916;(x = hcomp &#966; u u0) &#8866; &#948;_fill     = i.tFillTel (i. &#916;f[~i]) &#948; (~ i) : i.&#916;f[i]</span><span>
</span><span id="line-683"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#948; : &#916;(x = hcomp &#966; u u0) &#8866; old_t_fill = i.old_t[x = hfill &#966; u u0 i, &#948;_fill[i]]</span><span>
</span><span id="line-684"></span><span>      </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#948; : &#916;(x = hcomp &#966; u u0) &#8866; comp (\ i. old_t_fill[i])</span><span>
</span><span id="line-685"></span><span>      </span><span class="hs-comment">--                 (\ i. [ &#966; &#8614; g[x = hfill &#966; u u0 i,&#948;_fill[i]] = g[u i,&#948;_fill[i]]</span><span>
</span><span id="line-686"></span><span>      </span><span class="hs-comment">--                         &#945; &#8614; b[x = hfill &#966; u u0 i,&#948;_fill[i]]</span><span>
</span><span id="line-687"></span><span>      </span><span class="hs-comment">--                        ])</span><span>
</span><span id="line-688"></span><span>      </span><span class="hs-comment">--                 (g[x = u0,&#948;_fill[0]]) : old_t[x = hcomp &#966; u u0,&#948;]</span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span>      </span><span class="annot"><span class="annottext">Names -&gt; NamesT TCM (Type, Term) -&gt; TCM (Type, Term)
forall (m :: * -&gt; *) a. Names -&gt; NamesT m a -&gt; m a
</span><a href="Agda.TypeChecking.Names.html#runNamesT"><span class="hs-identifier hs-var">runNamesT</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(NamesT TCM (Type, Term) -&gt; TCM (Type, Term))
-&gt; NamesT TCM (Type, Term) -&gt; TCM (Type, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-691"></span><span>          </span><span id="local-6989586621680774555"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774555"><span class="hs-identifier hs-var">tPOr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; NamesT TCM (Maybe Term) -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinPOr"><span class="hs-identifier hs-var">builtinPOr</span></a></span><span>
</span><span id="line-692"></span><span>          </span><span id="local-6989586621680774553"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774553"><span class="hs-identifier hs-var">tIMax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; NamesT TCM (Maybe Term) -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinIMax"><span class="hs-identifier hs-var">builtinIMax</span></a></span><span>
</span><span id="line-693"></span><span>          </span><span id="local-6989586621680774551"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774551"><span class="hs-identifier hs-var">tIMin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; NamesT TCM (Maybe Term) -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinIMin"><span class="hs-identifier hs-var">builtinIMin</span></a></span><span>
</span><span id="line-694"></span><span>          </span><span id="local-6989586621680774549"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774549"><span class="hs-identifier hs-var">tINeg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; NamesT TCM (Maybe Term) -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinINeg"><span class="hs-identifier hs-var">builtinINeg</span></a></span><span>
</span><span id="line-695"></span><span>          </span><span id="local-6989586621680774547"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774547"><span class="hs-identifier hs-var">tHComp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; NamesT TCM (Maybe Term) -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-var">builtinHComp</span></a></span><span>
</span><span id="line-696"></span><span>          </span><span id="local-6989586621680774546"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774546"><span class="hs-identifier hs-var">tTrans</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Term) -&gt; NamesT TCM (Maybe Term) -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; VerboseKey -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getTerm%27"><span class="hs-identifier hs-var">getTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinTrans"><span class="hs-identifier hs-var">builtinTrans</span></a></span><span>
</span><span id="line-697"></span><span>          </span><span id="local-6989586621680774544"><span class="annot"><span class="annottext">NamesT TCM Elims
</span><a href="#local-6989586621680774544"><span class="hs-identifier hs-var">extra_ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; NamesT TCM (NamesT TCM Elims)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; NamesT TCM (NamesT TCM Elims))
-&gt; Elims -&gt; NamesT TCM (NamesT TCM Elims)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Elims
</span><a href="Agda.Syntax.Internal.Pattern.html#patternsToElims"><span class="hs-identifier hs-var">patternsToElims</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; Elims)
-&gt; [NamedArg DeBruijnPattern] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Nat -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774592"><span class="hs-identifier hs-var">old_ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774606"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-698"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-699"></span><span>            </span><span id="local-6989586621680774542"><span class="annot"><span class="annottext">ineg :: NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774542"><span class="hs-identifier hs-var hs-var">ineg</span></a></span></span><span> </span><span id="local-6989586621680774541"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774541"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774549"><span class="hs-identifier hs-var">tINeg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774541"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-700"></span><span>            </span><span id="local-6989586621680774539"><span class="annot"><span class="annottext">imax :: NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-identifier hs-var hs-var">imax</span></a></span></span><span> </span><span id="local-6989586621680774538"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774538"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680774537"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774537"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774553"><span class="hs-identifier hs-var">tIMax</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774538"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774537"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-701"></span><span>            </span><span id="local-6989586621680774536"><span class="annot"><span class="annottext">trFillTel' :: t TCM (Abs Telescope)
-&gt; t TCM Term -&gt; t TCM Args -&gt; t TCM Term -&gt; t TCM Args
</span><a href="#local-6989586621680774536"><span class="hs-identifier hs-var hs-var">trFillTel'</span></a></span></span><span> </span><span id="local-6989586621680774535"><span class="annot"><span class="annottext">t TCM (Abs Telescope)
</span><a href="#local-6989586621680774535"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680774534"><span class="annot"><span class="annottext">t TCM Term
</span><a href="#local-6989586621680774534"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680774533"><span class="annot"><span class="annottext">t TCM Args
</span><a href="#local-6989586621680774533"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680774532"><span class="annot"><span class="annottext">t TCM Term
</span><a href="#local-6989586621680774532"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-702"></span><span>              </span><span id="local-6989586621680774531"><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) TCM Args
</span><a href="#local-6989586621680774531"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Telescope
-&gt; Term -&gt; Args -&gt; Term -&gt; ExceptT (Closure (Abs Type)) TCM Args
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#trFillTel"><span class="hs-identifier hs-var">trFillTel</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope
 -&gt; Term -&gt; Args -&gt; Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
-&gt; t TCM (Abs Telescope)
-&gt; t TCM
     (Term -&gt; Args -&gt; Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t TCM (Abs Telescope)
</span><a href="#local-6989586621680774535"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">t TCM
  (Term -&gt; Args -&gt; Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
-&gt; t TCM Term
-&gt; t TCM (Args -&gt; Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">t TCM Term
</span><a href="#local-6989586621680774534"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">t TCM (Args -&gt; Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
-&gt; t TCM Args
-&gt; t TCM (Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">t TCM Args
</span><a href="#local-6989586621680774533"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">t TCM (Term -&gt; ExceptT (Closure (Abs Type)) TCM Args)
-&gt; t TCM Term -&gt; t TCM (ExceptT (Closure (Abs Type)) TCM Args)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">t TCM Term
</span><a href="#local-6989586621680774532"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-703"></span><span>              </span><span id="local-6989586621680774529"><span class="annot"><span class="annottext">Either (Closure (Abs Type)) Args
</span><a href="#local-6989586621680774529"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (Either (Closure (Abs Type)) Args)
-&gt; t TCM (Either (Closure (Abs Type)) Args)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (Either (Closure (Abs Type)) Args)
 -&gt; t TCM (Either (Closure (Abs Type)) Args))
-&gt; TCM (Either (Closure (Abs Type)) Args)
-&gt; t TCM (Either (Closure (Abs Type)) Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) TCM Args
-&gt; TCM (Either (Closure (Abs Type)) Args)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">ExceptT (Closure (Abs Type)) TCM Args
</span><a href="#local-6989586621680774531"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-704"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (Closure (Abs Type)) Args
</span><a href="#local-6989586621680774529"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-705"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621680774527"><span class="annot"><span class="annottext">Closure (Abs Type)
</span><a href="#local-6989586621680774527"><span class="hs-identifier hs-var">bad_t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Closure (Abs Type) -&gt; t TCM Args
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadError TCErr m) =&gt;
Doc -&gt; Closure (Abs Type) -&gt; m a
</span><a href="#local-6989586621680774597"><span class="hs-identifier hs-var">cannotCreate</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Cannot transport with type family:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Closure (Abs Type)
</span><a href="#local-6989586621680774527"><span class="hs-identifier hs-var">bad_t</span></a></span><span>
</span><span id="line-706"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621680774526"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774526"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Args -&gt; t TCM Args
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774526"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-707"></span><span>          </span><span id="local-6989586621680774525"><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774525"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-708"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774524"><span class="annot"><span class="annottext">forward :: NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774524"><span class="hs-identifier hs-var hs-var">forward</span></a></span></span><span> </span><span id="local-6989586621680774523"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774523"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span id="local-6989586621680774522"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774522"><span class="hs-identifier hs-var">bA</span></a></span></span><span> </span><span id="local-6989586621680774521"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774521"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621680774520"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774520"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774546"><span class="hs-identifier hs-var">tTrans</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774517"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774517"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774523"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774517"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-operator hs-var">`imax`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774521"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>                                              </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774516"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774516"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774522"><span class="hs-identifier hs-var">bA</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774516"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-operator hs-var">`imax`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774521"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>                                              </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774521"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-711"></span><span>                                              </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774520"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-712"></span><span>            </span><span class="annot"><span class="annottext">(NamesT TCM Term
 -&gt; NamesT TCM Term
 -&gt; NamesT TCM Term
 -&gt; NamesT TCM Term
 -&gt; NamesT TCM Term
 -&gt; NamesT TCM Term)
-&gt; NamesT
     TCM
     (NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term
  -&gt; NamesT TCM Term
  -&gt; NamesT TCM Term
  -&gt; NamesT TCM Term
  -&gt; NamesT TCM Term
  -&gt; NamesT TCM Term)
 -&gt; NamesT
      TCM
      (NamesT TCM Term
       -&gt; NamesT TCM Term
       -&gt; NamesT TCM Term
       -&gt; NamesT TCM Term
       -&gt; NamesT TCM Term
       -&gt; NamesT TCM Term))
-&gt; (NamesT TCM Term
    -&gt; NamesT TCM Term
    -&gt; NamesT TCM Term
    -&gt; NamesT TCM Term
    -&gt; NamesT TCM Term
    -&gt; NamesT TCM Term)
-&gt; NamesT
     TCM
     (NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term
      -&gt; NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774515"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774515"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span id="local-6989586621680774514"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774514"><span class="hs-identifier hs-var">bA</span></a></span></span><span> </span><span id="local-6989586621680774513"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774513"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621680774512"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774512"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621680774511"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774511"><span class="hs-identifier hs-var">u0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-713"></span><span>              </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774547"><span class="hs-identifier hs-var">tHComp</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774515"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774602"><span class="hs-identifier hs-var">io</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774514"><span class="hs-identifier hs-var">bA</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774602"><span class="hs-identifier hs-var">io</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774513"><span class="hs-identifier hs-var">phi</span></a></span><span>
</span><span id="line-714"></span><span>                        </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774510"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774510"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774508"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774508"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-715"></span><span>                                </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774524"><span class="hs-identifier hs-var">forward</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774515"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774514"><span class="hs-identifier hs-var">bA</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774510"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774512"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774510"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C..%3E"><span class="hs-operator hs-var">&lt;..&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774508"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span>                        </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774524"><span class="hs-identifier hs-var">forward</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774515"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774514"><span class="hs-identifier hs-var">bA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774511"><span class="hs-identifier hs-var">u0</span></a></span><span>
</span><span id="line-717"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-718"></span><span>            </span><span id="local-6989586621680774506"><span class="annot"><span class="annottext">hcomp :: NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774506"><span class="hs-identifier hs-var hs-var">hcomp</span></a></span></span><span> </span><span id="local-6989586621680774505"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774505"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span id="local-6989586621680774504"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774504"><span class="hs-identifier hs-var">bA</span></a></span></span><span> </span><span id="local-6989586621680774503"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774503"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621680774502"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774502"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621680774501"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774501"><span class="hs-identifier hs-var">u0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774547"><span class="hs-identifier hs-var">tHComp</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774505"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774504"><span class="hs-identifier hs-var">bA</span></a></span><span>
</span><span id="line-719"></span><span>                                               </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774503"><span class="hs-identifier hs-var">phi</span></a></span><span>
</span><span id="line-720"></span><span>                                               </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774502"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-721"></span><span>                                               </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774501"><span class="hs-identifier hs-var">u0</span></a></span><span>
</span><span id="line-722"></span><span>
</span><span id="line-723"></span><span>            </span><span id="local-6989586621680774500"><span class="annot"><span class="annottext">hfill :: NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774500"><span class="hs-identifier hs-var hs-var">hfill</span></a></span></span><span> </span><span id="local-6989586621680774499"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774499"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span id="local-6989586621680774498"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774498"><span class="hs-identifier hs-var">bA</span></a></span></span><span> </span><span id="local-6989586621680774497"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774497"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621680774496"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774496"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621680774495"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774495"><span class="hs-identifier hs-var">u0</span></a></span></span><span> </span><span id="local-6989586621680774494"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774494"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774506"><span class="hs-identifier hs-var">hcomp</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774499"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774498"><span class="hs-identifier hs-var">bA</span></a></span><span>
</span><span id="line-724"></span><span>                                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774553"><span class="hs-identifier hs-var">tIMax</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774497"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774549"><span class="hs-identifier hs-var">tINeg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774494"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>                                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;j&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774493"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774493"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774555"><span class="hs-identifier hs-var">tPOr</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774499"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774497"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774549"><span class="hs-identifier hs-var">tINeg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774494"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774498"><span class="hs-identifier hs-var">bA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>                                                     </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774492"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774492"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774496"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774551"><span class="hs-identifier hs-var">tIMin</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774494"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774493"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C..%3E"><span class="hs-operator hs-var">&lt;..&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774492"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>                                                     </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774495"><span class="hs-identifier hs-var">u0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span>                                                   </span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>                                               </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774495"><span class="hs-identifier hs-var">u0</span></a></span><span>
</span><span id="line-730"></span><span>          </span><span class="hs-comment">-- &#915;,&#966;,u,u0,(&#948; : &#916;(x = hcomp &#966; u u0)) &#8866; hcompS : &#915;(x:H)(&#948; : &#916;)</span><span>
</span><span id="line-731"></span><span>          </span><span id="local-6989586621680774491"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621680774491"><span class="hs-identifier hs-var">hcompS</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Substitution -&gt; NamesT TCM Substitution
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Substitution -&gt; NamesT TCM Substitution)
-&gt; TCM Substitution -&gt; NamesT TCM Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-732"></span><span>            </span><span id="local-6989586621680774490"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774490"><span class="hs-identifier hs-var">hdom</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM (Dom Type)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; TCM (Dom Type)) -&gt; Dom Type -&gt; TCM (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Dom Type -&gt; Dom Type
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774575"><span class="hs-identifier hs-var">hdom</span></a></span><span>
</span><span id="line-733"></span><span>            </span><span class="hs-keyword">let</span><span>
</span><span id="line-734"></span><span>              </span><span class="hs-special">[</span><span id="local-6989586621680774488"><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774488"><span class="hs-identifier hs-var">phi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774487"><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774487"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774486"><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774486"><span class="hs-identifier hs-var">u0</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; TCM Term) -&gt; [Nat] -&gt; [TCM Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCM Term) -&gt; (Nat -&gt; Term) -&gt; Nat -&gt; TCM Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span>
</span><span id="line-735"></span><span>              </span><span id="local-6989586621680774485"><span class="annot"><span class="annottext">htype :: TCM Term
</span><a href="#local-6989586621680774485"><span class="hs-identifier hs-var hs-var">htype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCM Term) -&gt; Term -&gt; TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term) -&gt; (Dom Type -&gt; Type) -&gt; Dom Type -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Term) -&gt; Dom Type -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774490"><span class="hs-identifier hs-var">hdom</span></a></span><span>
</span><span id="line-736"></span><span>              </span><span id="local-6989586621680774483"><span class="annot"><span class="annottext">lvl :: TCM Term
</span><a href="#local-6989586621680774483"><span class="hs-identifier hs-var hs-var">lvl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Term
forall (m :: * -&gt; *) a.
(LensSort a, MonadError TCErr m, PrettyTCM a, PureTCM m,
 MonadInteractionPoints m, MonadFresh NameId m,
 MonadStConcreteNames m, IsString (m Doc), Null (m Doc),
 Semigroup (m Doc)) =&gt;
a -&gt; m Term
</span><a href="#local-6989586621680774588"><span class="hs-identifier hs-var">getLevel</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCM Term) -&gt; Type -&gt; TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774490"><span class="hs-identifier hs-var">hdom</span></a></span><span>
</span><span id="line-737"></span><span>            </span><span id="local-6989586621680774482"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774482"><span class="hs-identifier hs-var">hc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774547"><span class="hs-identifier hs-var">tHComp</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term -&gt; TCM Term -&gt; TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774483"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term -&gt; TCM Term -&gt; TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774485"><span class="hs-identifier hs-var">htype</span></a></span><span>
</span><span id="line-738"></span><span>                                      </span><span class="annot"><span class="annottext">TCM Term -&gt; TCM Term -&gt; TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774488"><span class="hs-identifier hs-var">phi</span></a></span><span>
</span><span id="line-739"></span><span>                                      </span><span class="annot"><span class="annottext">TCM Term -&gt; TCM Term -&gt; TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774487"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-740"></span><span>                                      </span><span class="annot"><span class="annottext">TCM Term -&gt; TCM Term -&gt; TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Term
</span><a href="#local-6989586621680774486"><span class="hs-identifier hs-var">u0</span></a></span><span>
</span><span id="line-741"></span><span>            </span><span class="annot"><span class="annottext">Substitution -&gt; TCM Substitution
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Substitution -&gt; TCM Substitution)
-&gt; Substitution -&gt; TCM Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution -&gt; Substitution
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Substitution -&gt; Substitution) -&gt; Substitution -&gt; Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774482"><span class="hs-identifier hs-var">hc</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Substitution -&gt; Substitution
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-operator hs-var">`consS`</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span>
</span><span id="line-742"></span><span>          </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp phi u u0) &#8866; raise 3+|&#916;| hdom</span><span>
</span><span id="line-743"></span><span>          </span><span id="local-6989586621680774480"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774480"><span class="hs-identifier hs-var">hdom</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; NamesT TCM (Dom Type)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; NamesT TCM (Dom Type))
-&gt; Dom Type -&gt; NamesT TCM (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Dom Type -&gt; Dom Type
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774575"><span class="hs-identifier hs-var">hdom</span></a></span><span>
</span><span id="line-744"></span><span>          </span><span id="local-6989586621680774479"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774479"><span class="hs-identifier hs-var">htype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; Term -&gt; NamesT TCM (NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term) -&gt; (Dom Type -&gt; Type) -&gt; Dom Type -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Term) -&gt; Dom Type -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774480"><span class="hs-identifier hs-var">hdom</span></a></span><span>
</span><span id="line-745"></span><span>          </span><span id="local-6989586621680774478"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774478"><span class="hs-identifier hs-var">lvl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; NamesT TCM Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCM Term -&gt; NamesT TCM Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Term -&gt; NamesT TCM Term)
-&gt; (Type -&gt; TCM Term) -&gt; Type -&gt; NamesT TCM Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Term
forall (m :: * -&gt; *) a.
(LensSort a, MonadError TCErr m, PrettyTCM a, PureTCM m,
 MonadInteractionPoints m, MonadFresh NameId m,
 MonadStConcreteNames m, IsString (m Doc), Null (m Doc),
 Semigroup (m Doc)) =&gt;
a -&gt; m Term
</span><a href="#local-6989586621680774588"><span class="hs-identifier hs-var">getLevel</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; NamesT TCM Term) -&gt; Type -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774480"><span class="hs-identifier hs-var">hdom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>
</span><span id="line-747"></span><span>          </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp phi u u0) &#8866;</span><span>
</span><span id="line-748"></span><span>          </span><span class="hs-special">[</span><span id="local-6989586621680774477"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774476"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774476"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774475"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774475"><span class="hs-identifier hs-var">u0</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; NamesT TCM (NamesT TCM Term))
-&gt; [Nat] -&gt; NamesT TCM [NamesT TCM Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; (Nat -&gt; Term) -&gt; Nat -&gt; NamesT TCM (NamesT TCM Term)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; (Nat -&gt; Term) -&gt; Nat -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span>
</span><span id="line-749"></span><span>          </span><span class="hs-comment">-- &#915;,x,&#916; &#8866; f old_ps</span><span>
</span><span id="line-750"></span><span>          </span><span class="hs-comment">-- &#915; &#8866; abstract hdelta (f old_ps)</span><span>
</span><span id="line-751"></span><span>          </span><span id="local-6989586621680774474"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774474"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; Term -&gt; NamesT TCM (NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Term
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774577"><span class="hs-identifier hs-var">hdelta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774611"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774592"><span class="hs-identifier hs-var">old_ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-752"></span><span>          </span><span id="local-6989586621680774472"><span class="annot"><span class="annottext">NamesT TCM Type
</span><a href="#local-6989586621680774472"><span class="hs-identifier hs-var">old_t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; NamesT TCM (NamesT TCM Type)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; NamesT TCM (NamesT TCM Type))
-&gt; Type -&gt; NamesT TCM (NamesT TCM Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; Type
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Type -&gt; Type
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774577"><span class="hs-identifier hs-var">hdelta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774591"><span class="hs-identifier hs-var">old_t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774471"><span class="annot"><span class="annottext">bapp :: f (Abs b) -&gt; f (SubstArg b) -&gt; f b
</span><a href="#local-6989586621680774471"><span class="hs-identifier hs-var hs-var">bapp</span></a></span></span><span> </span><span id="local-6989586621680774470"><span class="annot"><span class="annottext">f (Abs b)
</span><a href="#local-6989586621680774470"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680774469"><span class="annot"><span class="annottext">f (SubstArg b)
</span><a href="#local-6989586621680774469"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs b -&gt; SubstArg b -&gt; b
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs b -&gt; SubstArg b -&gt; b) -&gt; f (Abs b) -&gt; f (SubstArg b -&gt; b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f (Abs b)
</span><a href="#local-6989586621680774470"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">f (SubstArg b -&gt; b) -&gt; f (SubstArg b) -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">f (SubstArg b)
</span><a href="#local-6989586621680774469"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-754"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680774467"><span class="annot"><span class="annottext">NamesT TCM (Abs Args)
</span><a href="#local-6989586621680774467"><span class="hs-identifier hs-var">delta_fill</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Names.html#NamesT"><span class="hs-identifier hs-type">NamesT</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Args -&gt; NamesT TCM (NamesT TCM (Abs Args))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Args -&gt; NamesT TCM (NamesT TCM (Abs Args)))
-&gt; NamesT TCM (Abs Args) -&gt; NamesT TCM (NamesT TCM (Abs Args))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NamesT TCM (Abs Args) -&gt; NamesT TCM (NamesT TCM (Abs Args)))
-&gt; NamesT TCM (Abs Args) -&gt; NamesT TCM (NamesT TCM (Abs Args))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-755"></span><span>            </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp phi u u0) &#8866; x.&#916;</span><span>
</span><span id="line-756"></span><span>            </span><span id="local-6989586621680774466"><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
</span><a href="#local-6989586621680774466"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Telescope -&gt; NamesT TCM (NamesT TCM (Abs Telescope))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope -&gt; NamesT TCM (NamesT TCM (Abs Telescope)))
-&gt; Abs Telescope -&gt; NamesT TCM (NamesT TCM (Abs Telescope))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Abs Telescope -&gt; Abs Telescope
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span>
</span><span id="line-757"></span><span>            </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp phi u u0) &#8866; i.&#916;(x = hfill phi u u0 (~ i))</span><span>
</span><span id="line-758"></span><span>            </span><span id="local-6989586621680774465"><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
</span><a href="#local-6989586621680774465"><span class="hs-identifier hs-var">deltaf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Abs Telescope -&gt; NamesT TCM (NamesT TCM (Abs Telescope))
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope -&gt; NamesT TCM (NamesT TCM (Abs Telescope)))
-&gt; NamesT TCM (Abs Telescope)
-&gt; NamesT TCM (NamesT TCM (Abs Telescope))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Telescope)
-&gt; NamesT TCM (Abs Telescope)
forall (m :: * -&gt; *) b a.
(MonadFail m, Subst b, DeBruijn b, Subst a, Free a) =&gt;
VerboseKey -&gt; (NamesT m b -&gt; NamesT m a) -&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774463"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774463"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-759"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
</span><a href="#local-6989586621680774466"><span class="hs-identifier hs-var">delta</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
-&gt; NamesT TCM (SubstArg Telescope) -&gt; NamesT TCM Telescope
forall (f :: * -&gt; *) b.
(Applicative f, Subst b) =&gt;
f (Abs b) -&gt; f (SubstArg b) -&gt; f b
</span><a href="#local-6989586621680774471"><span class="hs-operator hs-var">`bapp`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774500"><span class="hs-identifier hs-var">hfill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774478"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774479"><span class="hs-identifier hs-var">htype</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774476"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774475"><span class="hs-identifier hs-var">u0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774542"><span class="hs-identifier hs-var">ineg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774463"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>            </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp phi u u0) &#8866; &#916;(x = hcomp phi u u0) = &#916;f[0]</span><span>
</span><span id="line-761"></span><span>            </span><span id="local-6989586621680774462"><span class="annot"><span class="annottext">NamesT TCM Args
</span><a href="#local-6989586621680774462"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; NamesT TCM (NamesT TCM Args)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Args -&gt; NamesT TCM (NamesT TCM Args))
-&gt; NamesT TCM Args -&gt; NamesT TCM (NamesT TCM Args)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Args -&gt; NamesT TCM (NamesT TCM Args))
-&gt; NamesT TCM Args -&gt; NamesT TCM (NamesT TCM Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Args
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [Arg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleArgs"><span class="hs-identifier hs-var">teleArgs</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Args) -&gt; NamesT TCM Telescope -&gt; NamesT TCM Args
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Telescope -&gt; Term -&gt; Telescope
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lazyAbsApp"><span class="hs-identifier hs-var">lazyAbsApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Telescope -&gt; Term -&gt; Telescope)
-&gt; NamesT TCM (Abs Telescope) -&gt; NamesT TCM (Term -&gt; Telescope)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
</span><a href="#local-6989586621680774465"><span class="hs-identifier hs-var">deltaf</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Term -&gt; Telescope)
-&gt; NamesT TCM Term -&gt; NamesT TCM Telescope
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>            </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Args) -&gt; NamesT TCM (Abs Args)
forall (m :: * -&gt; *) b a.
(MonadFail m, Subst b, DeBruijn b, Subst a, Free a) =&gt;
VerboseKey -&gt; (NamesT m b -&gt; NamesT m a) -&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Args) -&gt; NamesT TCM (Abs Args))
-&gt; (NamesT TCM Term -&gt; NamesT TCM Args) -&gt; NamesT TCM (Abs Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774460"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774460"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; NamesT TCM Args -&gt; NamesT TCM Args
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Args -&gt; NamesT TCM Args)
-&gt; NamesT TCM Args -&gt; NamesT TCM Args
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- for error messages.</span><span>
</span><span id="line-763"></span><span>              </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp phi u u0),(i:I) &#8866; ... : &#916;(x = hfill phi u u0 i)</span><span>
</span><span id="line-764"></span><span>              </span><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
-&gt; NamesT TCM Term
-&gt; NamesT TCM Args
-&gt; NamesT TCM Term
-&gt; NamesT TCM Args
forall (t :: (* -&gt; *) -&gt; * -&gt; *).
(MonadTrans t, MonadTCEnv (t TCM), ReadTCState (t TCM),
 MonadError TCErr (t TCM)) =&gt;
t TCM (Abs Telescope)
-&gt; t TCM Term -&gt; t TCM Args -&gt; t TCM Term -&gt; t TCM Args
</span><a href="#local-6989586621680774536"><span class="hs-identifier hs-var">trFillTel'</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Abs Telescope)
</span><a href="#local-6989586621680774465"><span class="hs-identifier hs-var">deltaf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Args
</span><a href="#local-6989586621680774462"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774542"><span class="hs-identifier hs-var">ineg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774460"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-766"></span><span>            </span><span id="local-6989586621680774458"><span class="annot"><span class="annottext">apply_delta_fill :: NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774458"><span class="hs-identifier hs-var hs-var">apply_delta_fill</span></a></span></span><span> </span><span id="local-6989586621680774457"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774457"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680774456"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774456"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Args -&gt; Term)
-&gt; NamesT TCM Term -&gt; NamesT TCM (Args -&gt; Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774456"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Args -&gt; Term) -&gt; NamesT TCM Args -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM (Abs Args)
</span><a href="#local-6989586621680774467"><span class="hs-identifier hs-var">delta_fill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Abs Args)
-&gt; NamesT TCM (SubstArg Args) -&gt; NamesT TCM Args
forall (f :: * -&gt; *) b.
(Applicative f, Subst b) =&gt;
f (Abs b) -&gt; f (SubstArg b) -&gt; f b
</span><a href="#local-6989586621680774471"><span class="hs-operator hs-var">`bapp`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
NamesT TCM (SubstArg Args)
</span><a href="#local-6989586621680774457"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>            </span><span id="local-6989586621680774454"><span class="annot"><span class="annottext">call :: NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774454"><span class="hs-identifier hs-var hs-var">call</span></a></span></span><span> </span><span id="local-6989586621680774453"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774453"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680774452"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774452"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774458"><span class="hs-identifier hs-var">apply_delta_fill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774452"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774474"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774453"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-768"></span><span>          </span><span id="local-6989586621680774451"><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Type
</span><a href="#local-6989586621680774451"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-769"></span><span>                </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Type)
-&gt; NamesT TCM (NamesT TCM Term -&gt; NamesT TCM Type)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Type)
 -&gt; NamesT TCM (NamesT TCM Term -&gt; NamesT TCM Type))
-&gt; (NamesT TCM Term -&gt; NamesT TCM Type)
-&gt; NamesT TCM (NamesT TCM Term -&gt; NamesT TCM Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774450"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774450"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-770"></span><span>                    </span><span id="local-6989586621680774449"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774449"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774500"><span class="hs-identifier hs-var">hfill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774478"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774479"><span class="hs-identifier hs-var">htype</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774476"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774475"><span class="hs-identifier hs-var">u0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774450"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-771"></span><span>                    </span><span id="local-6989586621680774448"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774448"><span class="hs-identifier hs-var">hd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Type
</span><a href="#local-6989586621680774472"><span class="hs-identifier hs-var">old_t</span></a></span><span>
</span><span id="line-772"></span><span>                    </span><span id="local-6989586621680774447"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774447"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Abs Args)
</span><a href="#local-6989586621680774467"><span class="hs-identifier hs-var">delta_fill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Abs Args)
-&gt; NamesT TCM (SubstArg Args) -&gt; NamesT TCM Args
forall (f :: * -&gt; *) b.
(Applicative f, Subst b) =&gt;
f (Abs b) -&gt; f (SubstArg b) -&gt; f b
</span><a href="#local-6989586621680774471"><span class="hs-operator hs-var">`bapp`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
NamesT TCM (SubstArg Args)
</span><a href="#local-6989586621680774450"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-773"></span><span>                    </span><span class="annot"><span class="annottext">TCM Type -&gt; NamesT TCM Type
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; NamesT TCM Type) -&gt; TCM Type -&gt; NamesT TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; TCM Type
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; a -&gt; m Type
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-identifier hs-var">piApplyM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774448"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="annot"><span class="annottext">(Args -&gt; TCM Type) -&gt; Args -&gt; TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774480"><span class="hs-identifier hs-var">hdom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774449"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Args -&gt; Args
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774447"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-774"></span><span>          </span><span id="local-6989586621680774443"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774443"><span class="hs-identifier hs-var">ty_level</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-775"></span><span>            </span><span id="local-6989586621680774442"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680774442"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Type) -&gt; NamesT TCM (Abs Type)
forall (m :: * -&gt; *) b a.
(MonadFail m, Subst b, DeBruijn b, Subst a, Free a) =&gt;
VerboseKey -&gt; (NamesT m b -&gt; NamesT m a) -&gt; NamesT m (Abs a)
</span><a href="Agda.TypeChecking.Names.html#bind"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Type
</span><a href="#local-6989586621680774451"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-776"></span><span>            </span><span id="local-6989586621680774441"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774441"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; NamesT TCM Sort
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; NamesT TCM Sort) -&gt; Sort -&gt; NamesT TCM Sort
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Sort
forall a. LensSort a =&gt; a -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#getSort"><span class="hs-identifier hs-var">getSort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680774442"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>            </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; NamesT TCM ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; NamesT TCM ()) -&gt; TCM Doc -&gt; NamesT TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;ty_level, s = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774441"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-778"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774441"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-779"></span><span>              </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621680774439"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621680774439"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; NamesT TCM Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM Term) -&gt; Term -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Level' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-var">Level</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621680774439"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>              </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Closure (Abs Type) -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadError TCErr m) =&gt;
Doc -&gt; Closure (Abs Type) -&gt; m a
</span><a href="#local-6989586621680774597"><span class="hs-identifier hs-var">cannotCreate</span></a></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Cannot compose with type family:&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Closure (Abs Type) -&gt; NamesT TCM (NamesT TCM Term))
-&gt; NamesT TCM (Closure (Abs Type)) -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCM (Closure (Abs Type)) -&gt; NamesT TCM (Closure (Abs Type))
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; TCM (Closure (Abs Type))
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621680774442"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-783"></span><span>            </span><span id="local-6989586621680774436"><span class="annot"><span class="annottext">pOr_ty :: NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774436"><span class="hs-identifier hs-var hs-var">pOr_ty</span></a></span></span><span> </span><span id="local-6989586621680774435"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774435"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680774434"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774434"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span id="local-6989586621680774433"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774433"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span id="local-6989586621680774432"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774432"><span class="hs-identifier hs-var">u0</span></a></span></span><span> </span><span id="local-6989586621680774431"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774431"><span class="hs-identifier hs-var">u1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774555"><span class="hs-identifier hs-var">tPOr</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774443"><span class="hs-identifier hs-var">ty_level</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774435"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-784"></span><span>                                               </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774434"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774433"><span class="hs-identifier hs-var">psi</span></a></span><span>
</span><span id="line-785"></span><span>                                               </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%23%3E"><span class="hs-operator hs-var">&lt;#&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term) -&gt; NamesT TCM Type -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Type
</span><a href="#local-6989586621680774451"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774435"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774432"><span class="hs-identifier hs-var">u0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774431"><span class="hs-identifier hs-var">u1</span></a></span><span>
</span><span id="line-786"></span><span>          </span><span id="local-6989586621680774430"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774430"><span class="hs-identifier hs-var">alpha</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-787"></span><span>            </span><span id="local-6989586621680774429"><span class="annot"><span class="annottext">[NamesT TCM Term]
</span><a href="#local-6989586621680774429"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Term, (Term, Term)) -&gt; NamesT TCM (NamesT TCM Term))
-&gt; [(Term, (Term, Term))] -&gt; NamesT TCM [NamesT TCM Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; ((Term, (Term, Term)) -&gt; Term)
-&gt; (Term, (Term, Term))
-&gt; NamesT TCM (NamesT TCM Term)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
Substitution' (SubstArg Term)
</span><a href="#local-6989586621680774491"><span class="hs-identifier hs-var">hcompS</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term)
-&gt; ((Term, (Term, Term)) -&gt; Term) -&gt; (Term, (Term, Term)) -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Term, (Term, Term)) -&gt; Term
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774567"><span class="hs-identifier hs-var">alphab</span></a></span><span>
</span><span id="line-788"></span><span>            </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; NamesT TCM Term -&gt; NamesT TCM (NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term -&gt; [NamesT TCM Term] -&gt; NamesT TCM Term
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-identifier hs-var">imax</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774427"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774427"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774427"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-operator hs-var">`imax`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774542"><span class="hs-identifier hs-var">ineg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774427"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamesT TCM Term]
</span><a href="#local-6989586621680774429"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span>          </span><span class="hs-comment">-- &#915;,&#966;,u,u0,&#916;(x = hcomp &#966; u u0) &#8866; b : (i : I) &#8594; [&#945;] -&gt; old_t[x = hfill &#966; u u0 i,&#948;_fill[i]]</span><span>
</span><span id="line-791"></span><span>          </span><span id="local-6989586621680774426"><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774426"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-792"></span><span>             </span><span id="local-6989586621680774425"><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
</span><a href="#local-6989586621680774425"><span class="hs-identifier hs-var">sides</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
-&gt; ((Term, (Term, Term))
    -&gt; NamesT
         TCM (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term))
-&gt; NamesT
     TCM [(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774567"><span class="hs-identifier hs-var">alphab</span></a></span><span> </span><span class="annot"><span class="annottext">(((Term, (Term, Term))
  -&gt; NamesT
       TCM (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term))
 -&gt; NamesT
      TCM [(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)])
-&gt; ((Term, (Term, Term))
    -&gt; NamesT
         TCM (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term))
-&gt; NamesT
     TCM [(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774424"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774424"><span class="hs-identifier hs-var">psi</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621680774423"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774423"><span class="hs-identifier hs-var">side0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774422"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774422"><span class="hs-identifier hs-var">side1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-793"></span><span>                </span><span id="local-6989586621680774421"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774421"><span class="hs-identifier hs-var">psi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; Term -&gt; NamesT TCM (NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution
Substitution' (SubstArg Term)
</span><a href="#local-6989586621680774491"><span class="hs-identifier hs-var">hcompS</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774424"><span class="hs-identifier hs-var">psi</span></a></span><span>
</span><span id="line-794"></span><span>
</span><span id="line-795"></span><span>                </span><span class="hs-special">[</span><span id="local-6989586621680774420"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774420"><span class="hs-identifier hs-var">side0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774419"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774419"><span class="hs-identifier hs-var">side1</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; [Term] -&gt; NamesT TCM [NamesT TCM Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM (NamesT TCM Term)
forall (m :: * -&gt; *) a.
(MonadFail m, Subst a) =&gt;
a -&gt; NamesT m (NamesT m a)
</span><a href="Agda.TypeChecking.Names.html#open"><span class="hs-identifier hs-var">open</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NamesT TCM (NamesT TCM Term))
-&gt; (Term -&gt; Term) -&gt; Term -&gt; NamesT TCM (NamesT TCM Term)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; (Term -&gt; Term) -&gt; Term -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Term
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774577"><span class="hs-identifier hs-var">hdelta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774423"><span class="hs-identifier hs-var">side0</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774422"><span class="hs-identifier hs-var">side1</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-796"></span><span>                </span><span class="annot"><span class="annottext">(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
 -&gt; NamesT
      TCM (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term))
-&gt; (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774542"><span class="hs-identifier hs-var">ineg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774421"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-operator hs-var">`imax`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774421"><span class="hs-identifier hs-var">psi</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774418"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774418"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774436"><span class="hs-identifier hs-var">pOr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774418"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774542"><span class="hs-identifier hs-var">ineg</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774421"><span class="hs-identifier hs-var">psi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774421"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774458"><span class="hs-identifier hs-var">apply_delta_fill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774418"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774420"><span class="hs-identifier hs-var">side0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774500"><span class="hs-identifier hs-var">hfill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774478"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774479"><span class="hs-identifier hs-var">htype</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774476"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774475"><span class="hs-identifier hs-var">u0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774418"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>                                                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774458"><span class="hs-identifier hs-var">apply_delta_fill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774418"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774419"><span class="hs-identifier hs-var">side1</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774500"><span class="hs-identifier hs-var">hfill</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774478"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774479"><span class="hs-identifier hs-var">htype</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774476"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774475"><span class="hs-identifier hs-var">u0</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774418"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774417"><span class="annot"><span class="annottext">recurse :: [(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
-&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774417"><span class="hs-identifier hs-var hs-var">recurse</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>           </span><span id="local-6989586621680774416"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774416"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-799"></span><span>                 </span><span class="annot"><a href="#local-6989586621680774417"><span class="hs-identifier hs-var">recurse</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621680774415"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774415"><span class="hs-identifier hs-var">psi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774414"><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774414"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>    </span><span id="local-6989586621680774413"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774413"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774414"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774413"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-800"></span><span>                 </span><span class="annot"><a href="#local-6989586621680774417"><span class="hs-identifier hs-var">recurse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621680774412"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774412"><span class="hs-identifier hs-var">psi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774411"><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774411"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621680774410"><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
</span><a href="#local-6989586621680774410"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680774409"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774409"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774436"><span class="hs-identifier hs-var">pOr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774409"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774412"><span class="hs-identifier hs-var">psi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
 -&gt; NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term
-&gt; [(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
-&gt; NamesT TCM Term
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-identifier hs-var">imax</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; ((NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
    -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM Term
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
</span><a href="#local-6989586621680774410"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774411"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774409"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
-&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774417"><span class="hs-identifier hs-var">recurse</span></a></span><span> </span><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
</span><a href="#local-6989586621680774410"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774409"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>             </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM (NamesT TCM Term -&gt; NamesT TCM Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term)
 -&gt; NamesT TCM (NamesT TCM Term -&gt; NamesT TCM Term))
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term)
-&gt; NamesT TCM (NamesT TCM Term -&gt; NamesT TCM Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
-&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774417"><span class="hs-identifier hs-var">recurse</span></a></span><span> </span><span class="annot"><span class="annottext">[(NamesT TCM Term, NamesT TCM Term -&gt; NamesT TCM Term)]
</span><a href="#local-6989586621680774425"><span class="hs-identifier hs-var">sides</span></a></span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term -&gt; (Type, Term))
-&gt; NamesT TCM Type -&gt; NamesT TCM (Term -&gt; (Type, Term))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Type
</span><a href="#local-6989586621680774451"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774602"><span class="hs-identifier hs-var">io</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM (Term -&gt; (Type, Term))
-&gt; NamesT TCM Term -&gt; NamesT TCM (Type, Term)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Term -&gt; NamesT TCM (Type, Term))
-&gt; NamesT TCM Term -&gt; NamesT TCM (Type, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-804"></span><span>            </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774525"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774443"><span class="hs-identifier hs-var">ty_level</span></a></span><span>
</span><span id="line-805"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term) -&gt; NamesT TCM Type -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">(NamesT TCM Type -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Type)
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Type
</span><a href="#local-6989586621680774451"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774539"><span class="hs-operator hs-var">`imax`</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774430"><span class="hs-identifier hs-var">alpha</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#lam"><span class="hs-identifier hs-var">lam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774408"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774408"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-808"></span><span>                               </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774407"><span class="annot"><span class="annottext">rhs :: NamesT TCM Term
</span><a href="#local-6989586621680774407"><span class="hs-identifier hs-var hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall (m :: * -&gt; *).
MonadFail m =&gt;
VerboseKey -&gt; (NamesT m Term -&gt; NamesT m Term) -&gt; NamesT m Term
</span><a href="Agda.TypeChecking.Names.html#ilam"><span class="hs-identifier hs-var">ilam</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="annot"><span class="annottext">((NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term)
-&gt; (NamesT TCM Term -&gt; NamesT TCM Term) -&gt; NamesT TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774406"><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774406"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774454"><span class="hs-identifier hs-var">call</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774476"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774408"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
forall (m :: * -&gt; *). Applicative m =&gt; m Term -&gt; m Term -&gt; m Term
</span><a href="Agda.TypeChecking.Primitive.Base.html#%3C..%3E"><span class="hs-operator hs-var">&lt;..&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774406"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774408"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>                               </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774567"><span class="hs-identifier hs-var">alphab</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774407"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-keyword">else</span><span>
</span><span id="line-810"></span><span>                                   </span><span class="annot"><span class="annottext">NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
-&gt; NamesT TCM Term
</span><a href="#local-6989586621680774436"><span class="hs-identifier hs-var">pOr_ty</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774408"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774477"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774430"><span class="hs-identifier hs-var">alpha</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774407"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774426"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774408"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>                           </span><span class="hs-special">)</span><span>
</span><span id="line-812"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamesT TCM Term -&gt; NamesT TCM Term -&gt; NamesT TCM Term
</span><a href="#local-6989586621680774454"><span class="hs-identifier hs-var">call</span></a></span><span> </span><span class="annot"><span class="annottext">NamesT TCM Term
</span><a href="#local-6989586621680774475"><span class="hs-identifier hs-var">u0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; NamesT TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774599"><span class="hs-identifier hs-var">iz</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-813"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;old_tel =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-814"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774405"><span class="annot"><span class="annottext">n :: Nat
</span><a href="#local-6989586621680774405"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774578"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Abs Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Telescope
</span><a href="#local-6989586621680774574"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-815"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;n =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774405"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-816"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680774404"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774404"><span class="hs-identifier hs-var">deltaEx</span></a></span></span><span> </span><span id="local-6989586621680774403"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774403"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774402"><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774402"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; TCM (TelV Type, [(Term, (Term, Term))])
forall (m :: * -&gt; *).
PureTCM m =&gt;
Nat -&gt; Type -&gt; m (TelV Type, [(Term, (Term, Term))])
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpToPathBoundary%27"><span class="hs-identifier hs-var">telViewUpToPathBoundary'</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774405"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774558"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-817"></span><span>    </span><span id="local-6989586621680774400"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774400"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM Term
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCM Term) -&gt; Term -&gt; TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774405"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774557"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [(Term, (Term, Term))] -&gt; Elims
forall a. DeBruijn a =&gt; Telescope -&gt; Boundary' (a, a) -&gt; [Elim' a]
</span><a href="Agda.TypeChecking.Telescope.html#teleElims"><span class="hs-identifier hs-var">teleElims</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774404"><span class="hs-identifier hs-var">deltaEx</span></a></span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774402"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span>    </span><span id="local-6989586621680774398"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774398"><span class="hs-identifier hs-var">cxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Telescope
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span>
</span><span id="line-820"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;cxt = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774398"><span class="hs-identifier hs-var">cxt</span></a></span><span>
</span><span id="line-821"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tel = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-822"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;t = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774403"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-823"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.hcomp&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;rhs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774400"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span>    </span><span class="annot"><span class="annottext">Clause -&gt; TCM Clause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCM Clause) -&gt; Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause :: Range
-&gt; Range
-&gt; Telescope
-&gt; [NamedArg DeBruijnPattern]
-&gt; Maybe Term
-&gt; Maybe (Arg Type)
-&gt; Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; ExpandedEllipsis
-&gt; Clause
</span><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-826"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-827"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774607"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-828"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774606"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-829"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Maybe Term) -&gt; Term -&gt; Maybe Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774400"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-830"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Maybe (Arg Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Arg Type -&gt; Maybe (Arg Type)) -&gt; Arg Type -&gt; Maybe (Arg Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Arg Type
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774403"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-831"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-832"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">clauseExact</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-833"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>     </span><span class="hs-comment">-- TODO: can it be recursive?</span><span>
</span><span id="line-834"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>  </span><span class="hs-comment">-- missing, thus, not unreachable</span><span>
</span><span id="line-835"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">NoEllipsis</span></a></span><span>
</span><span id="line-836"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-837"></span><span>  </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; TCMT IO ()
</span><a href="Agda.TypeChecking.Monad.Signature.html#addClauses"><span class="hs-identifier hs-var">addClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774611"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774559"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Important: add at the end.</span><span>
</span><span id="line-838"></span><span>  </span><span class="annot"><span class="annottext">Clause -&gt; TCM Clause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774559"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-839"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#createMissingHCompClause"><span class="hs-identifier hs-var">createMissingHCompClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM Clause
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="hs-comment">-- | Append a instance clause to the clauses of a function.</span><span>
</span><span id="line-842"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-type">inferMissingClause</span></a></span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>
</span><span id="line-844"></span><span>       </span><span class="hs-comment">-- ^ Function name.</span><span>
</span><span id="line-845"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-846"></span><span>       </span><span class="hs-comment">-- ^ Clause to add.  Clause hiding (in 'clauseType') must be 'Instance'.</span><span>
</span><span id="line-847"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span>
</span><span id="line-848"></span><span id="inferMissingClause"><span class="annot"><span class="annottext">inferMissingClause :: QName -&gt; SplitClause -&gt; TCM Clause
</span><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-var hs-var">inferMissingClause</span></a></span></span><span> </span><span id="local-6989586621680774395"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774395"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680774394"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774394"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774393"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774393"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774392"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774392"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680774391"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Clause -&gt; TCM Clause
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774395"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Clause -&gt; TCM Clause) -&gt; TCM Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-849"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.infer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774394"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;Trying to infer right-hand side of type&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-850"></span><span>  </span><span id="local-6989586621680774390"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774390"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-851"></span><span>    </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Term -&gt; TCM Term
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774394"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-852"></span><span>    </span><span class="annot"><span class="annottext">(TCM Term -&gt; TCM Term) -&gt; TCM Term -&gt; TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Lens' (Map CheckpointId Substitution) TCEnv
-&gt; (Map CheckpointId Substitution -&gt; Map CheckpointId Substitution)
-&gt; TCM Term
-&gt; TCM Term
forall (m :: * -&gt; *) a b.
MonadTCEnv m =&gt;
Lens' a TCEnv -&gt; (a -&gt; a) -&gt; m b -&gt; m b
</span><a href="Agda.TypeChecking.Monad.Base.html#locallyTC"><span class="hs-identifier hs-var">locallyTC</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' (Map CheckpointId Substitution) TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#eCheckpoints"><span class="hs-identifier hs-var">eCheckpoints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map CheckpointId Substitution
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774392"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>    </span><span class="annot"><span class="annottext">(TCM Term -&gt; TCM Term) -&gt; TCM Term -&gt; TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCM Term -&gt; TCM Term
forall (tcm :: * -&gt; *) a.
(MonadDebug tcm, MonadTCM tcm, MonadFresh CheckpointId tcm,
 ReadTCState tcm) =&gt;
Substitution -&gt; tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#checkpoint"><span class="hs-identifier hs-var">checkpoint</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>    </span><span class="hs-comment">-- introduce a fresh checkpoint</span><span>
</span><span id="line-854"></span><span>    </span><span class="annot"><span class="annottext">(TCM Term -&gt; TCM Term) -&gt; TCM Term -&gt; TCM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-855"></span><span>        </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680774385"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774385"><span class="hs-identifier hs-var">tac</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe Term
forall t e. Dom' t e -&gt; Maybe t
</span><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var hs-var">domTactic</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-856"></span><span>          </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.infer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-857"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;@tactic rhs&quot;</span></span><span>
</span><span id="line-858"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;target =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-859"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774384"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774384"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RunMetaOccursCheck -&gt; Comparison -&gt; Type -&gt; TCMT IO (MetaId, Term)
forall (m :: * -&gt; *).
MonadMetaSolver m =&gt;
RunMetaOccursCheck -&gt; Comparison -&gt; Type -&gt; m (MetaId, Term)
</span><a href="Agda.TypeChecking.MetaVars.html#newValueMeta"><span class="hs-identifier hs-var">newValueMeta</span></a></span><span> </span><span class="annot"><span class="annottext">RunMetaOccursCheck
</span><a href="Agda.TypeChecking.Monad.Base.html#DontRunMetaOccursCheck"><span class="hs-identifier hs-var">DontRunMetaOccursCheck</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="Agda.TypeChecking.Monad.Base.html#CmpLeq"><span class="hs-identifier hs-var">CmpLeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-860"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774384"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO () -&gt; TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Type -&gt; TCMT IO ()
</span><a href="Agda.TypeChecking.Rules.Term.html#unquoteTactic"><span class="hs-identifier hs-var">unquoteTactic</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774385"><span class="hs-identifier hs-var">tac</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774384"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Common.html#Instance"><span class="hs-identifier hs-type">Instance</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MetaId, Term) -&gt; Term
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((MetaId, Term) -&gt; Term) -&gt; TCMT IO (MetaId, Term) -&gt; TCM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Type -&gt; TCMT IO (MetaId, Term)
forall (m :: * -&gt; *).
MonadMetaSolver m =&gt;
VerboseKey -&gt; Type -&gt; m (MetaId, Term)
</span><a href="Agda.TypeChecking.MetaVars.html#newInstanceMeta"><span class="hs-identifier hs-var">newInstanceMeta</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>        </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-863"></span><span>        </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-864"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774375"><span class="annot"><span class="annottext">cl :: Clause
</span><a href="#local-6989586621680774375"><span class="hs-identifier hs-var hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause :: Range
-&gt; Range
-&gt; Telescope
-&gt; [NamedArg DeBruijnPattern]
-&gt; Maybe Term
-&gt; Maybe (Arg Type)
-&gt; Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; ExpandedEllipsis
-&gt; Clause
</span><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-865"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-866"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774394"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-867"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: [NamedArg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774393"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-868"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774390"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-869"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Maybe (Arg Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Arg Type
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774391"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-871"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">clauseExact</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-872"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>     </span><span class="hs-comment">-- could be recursive</span><span>
</span><span id="line-873"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>  </span><span class="hs-comment">-- missing, thus, not unreachable</span><span>
</span><span id="line-874"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">NoEllipsis</span></a></span><span>
</span><span id="line-875"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-876"></span><span>  </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; TCMT IO ()
</span><a href="Agda.TypeChecking.Monad.Signature.html#addClauses"><span class="hs-identifier hs-var">addClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774395"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774375"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Important: add at the end.</span><span>
</span><span id="line-877"></span><span>  </span><span class="annot"><span class="annottext">Clause -&gt; TCM Clause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621680774375"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-878"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-var">inferMissingClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM Clause
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-879"></span><span>
</span><span id="line-880"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitStrategy"><span class="hs-identifier hs-type">splitStrategy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVars"><span class="hs-identifier hs-type">BlockingVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVars"><span class="hs-identifier hs-type">BlockingVars</span></a></span><span>
</span><span id="line-881"></span><span id="splitStrategy"><span class="annot"><span class="annottext">splitStrategy :: BlockingVars -&gt; Telescope -&gt; TCM BlockingVars
</span><a href="Agda.TypeChecking.Coverage.html#splitStrategy"><span class="hs-identifier hs-var hs-var">splitStrategy</span></a></span></span><span> </span><span id="local-6989586621680774373"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774373"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621680774372"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774372"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; TCM BlockingVars
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(BlockingVars -&gt; TCM BlockingVars)
-&gt; BlockingVars -&gt; TCM BlockingVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(BlockingVar -&gt; BlockingVar) -&gt; BlockingVars -&gt; BlockingVars
forall a. (a -&gt; a) -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.List.html#updateLast"><span class="hs-identifier hs-var">updateLast</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar -&gt; BlockingVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#setBlockingVarOverlap"><span class="hs-identifier hs-var">setBlockingVarOverlap</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774369"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-comment">-- Make sure we do not insists on precomputed coverage when</span><span>
</span><span id="line-883"></span><span>  </span><span class="hs-comment">-- we make our last try to split.</span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-comment">-- Otherwise, we will not get a nice error message.</span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-886"></span><span>    </span><span id="local-6989586621680774369"><span class="annot"><span class="annottext">xs :: BlockingVars
</span><a href="#local-6989586621680774369"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774368"><span class="hs-identifier hs-var">strict</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; BlockingVars -&gt; BlockingVars
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774367"><span class="hs-identifier hs-var">lazy</span></a></span><span>
</span><span id="line-887"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680774367"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774367"><span class="hs-identifier hs-var">lazy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774368"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774368"><span class="hs-identifier hs-var">strict</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(BlockingVar -&gt; Bool)
-&gt; BlockingVars -&gt; (BlockingVars, BlockingVars)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">List.partition</span></span><span> </span><span class="annot"><span class="annottext">BlockingVar -&gt; Bool
</span><a href="Agda.TypeChecking.Coverage.Match.html#blockingVarLazy"><span class="hs-identifier hs-var hs-var">blockingVarLazy</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621680774373"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-888"></span><span class="hs-comment">{- KEEP!
--  Andreas, 2012-10-13
--  The following split strategy which prefers all-constructor columns
--  fails on test/fail/CoverStrategy
    xs       = ys ++ zs
    (ys, zs) = partition allConstructors bs
    allConstructors :: BlockingVar -&gt; Bool
    allConstructors = isJust . snd
-}</span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="hs-comment">-- | Check that a type is a non-irrelevant datatype or a record with</span><span>
</span><span id="line-900"></span><span class="hs-comment">-- named constructor. Unless the 'Induction' argument is 'CoInductive'</span><span>
</span><span id="line-901"></span><span class="hs-comment">-- the data type must be inductive.</span><span>
</span><span id="line-902"></span><span id="local-6989586621680775064"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#isDatatype"><span class="hs-identifier hs-type">isDatatype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-type">MonadTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775064"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775064"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-903"></span><span>              </span><span class="annot"><a href="Agda.Syntax.Common.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-904"></span><span>              </span><span class="annot"><a href="#local-6989586621680775064"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html#DataOrRecord"><span class="hs-identifier hs-type">DataOrRecord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-905"></span><span id="isDatatype"><span class="annot"><span class="annottext">isDatatype :: Induction
-&gt; Dom Type -&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="Agda.TypeChecking.Coverage.html#isDatatype"><span class="hs-identifier hs-var hs-var">isDatatype</span></a></span></span><span> </span><span id="local-6989586621680774363"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774363"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621680774362"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774362"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-906"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774361"><span class="annot"><span class="annottext">t :: Type
</span><a href="#local-6989586621680774361"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774362"><span class="hs-identifier hs-var">at</span></a></span><span>
</span><span id="line-907"></span><span>      </span><span id="local-6989586621680774360"><span class="annot"><span class="annottext">throw :: (Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="#local-6989586621680774360"><span class="hs-identifier hs-var hs-var">throw</span></a></span></span><span> </span><span id="local-6989586621680774359"><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="#local-6989586621680774359"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError
 -&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool))
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="#local-6989586621680774359"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Type
 -&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool))
-&gt; tcm (Closure Type)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; tcm (Closure Type)
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; tcm (Closure Type))
-&gt; TCM (Closure Type) -&gt; tcm (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774361"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-908"></span><span>  </span><span id="local-6989586621680774357"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774357"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Type -&gt; tcm Type
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; tcm Type) -&gt; TCM Type -&gt; tcm Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774361"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-909"></span><span>  </span><span id="local-6989586621680774356"><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680774356"><span class="hs-identifier hs-var">mInterval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Maybe QName) -&gt; tcm (Maybe QName)
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Maybe QName) -&gt; tcm (Maybe QName))
-&gt; TCMT IO (Maybe QName) -&gt; tcm (Maybe QName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCMT IO (Maybe QName)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
VerboseKey -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-var">getBuiltinName'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinInterval"><span class="hs-identifier hs-var">builtinInterval</span></a></span><span>
</span><span id="line-910"></span><span>  </span><span id="local-6989586621680774353"><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680774353"><span class="hs-identifier hs-var">mIsOne</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Maybe QName) -&gt; tcm (Maybe QName)
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Maybe QName) -&gt; tcm (Maybe QName))
-&gt; TCMT IO (Maybe QName) -&gt; tcm (Maybe QName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCMT IO (Maybe QName)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
VerboseKey -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-var">getBuiltinName'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinIsOne"><span class="hs-identifier hs-var">builtinIsOne</span></a></span><span>
</span><span id="line-911"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774357"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-912"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621680774351"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774351"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774351"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QName -&gt; Maybe QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680774356"><span class="hs-identifier hs-var">mInterval</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="#local-6989586621680774360"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-913"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621680774349"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774349"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621680774347"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680774347"><span class="hs-identifier hs-var">phi</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774349"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QName -&gt; Maybe QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680774353"><span class="hs-identifier hs-var">mIsOne</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-914"></span><span>                </span><span id="local-6989586621680774346"><span class="annot"><span class="annottext">[(Map Nat Bool, [Term])]
</span><a href="#local-6989586621680774346"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM [(Map Nat Bool, [Term])] -&gt; tcm [(Map Nat Bool, [Term])]
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM [(Map Nat Bool, [Term])] -&gt; tcm [(Map Nat Bool, [Term])])
-&gt; TCM [(Map Nat Bool, [Term])] -&gt; tcm [(Map Nat Bool, [Term])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM [(Map Nat Bool, [Term])]
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
Term -&gt; m [(Map Nat Bool, [Term])]
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#decomposeInterval"><span class="hs-identifier hs-var">decomposeInterval</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCM [(Map Nat Bool, [Term])])
-&gt; TCM Term -&gt; TCM [(Map Nat Bool, [Term])]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM Term
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680774347"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-915"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(Map Nat Bool, [Term])] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Map Nat Bool, [Term])]
</span><a href="#local-6989586621680774346"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-916"></span><span>                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(DataOrRecord, QName, Args, Args, [QName], Bool)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((DataOrRecord, QName, Args, Args, [QName], Bool)
 -&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool))
-&gt; (DataOrRecord, QName, Args, Args, [QName], Bool)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.TypeChecking.Rules.LHS.html#IsData"><span class="hs-identifier hs-var">IsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774349"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680774347"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="#local-6989586621680774360"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-918"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621680774343"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774343"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680774342"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774342"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-919"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680774341"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774341"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe Args
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774342"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-920"></span><span>      </span><span id="local-6989586621680774339"><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621680774339"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Defn -&gt; tcm Defn
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Defn -&gt; tcm Defn) -&gt; TCM Defn -&gt; tcm Defn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Defn) -&gt; TCMT IO Definition -&gt; TCM Defn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774343"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-921"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621680774339"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-922"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">dataPars :: Defn -&gt; Nat
</span><a href="Agda.TypeChecking.Monad.Base.html#dataPars"><span class="hs-identifier hs-var">dataPars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774334"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774334"><span class="hs-identifier hs-var">np</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dataCons :: Defn -&gt; [QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#dataCons"><span class="hs-identifier hs-var">dataCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774332"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774332"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-923"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-924"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774331"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774331"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774330"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774330"><span class="hs-identifier hs-var">is</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Args -&gt; (Args, Args)
forall a. Nat -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774334"><span class="hs-identifier hs-var">np</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774341"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-925"></span><span>              </span><span class="annot"><span class="annottext">(DataOrRecord, QName, Args, Args, [QName], Bool)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.TypeChecking.Rules.LHS.html#IsData"><span class="hs-identifier hs-var">IsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774343"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774331"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774330"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774332"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Defn -&gt; [QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#dataPathCons"><span class="hs-identifier hs-var hs-var">dataPathCons</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621680774339"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">recPars :: Defn -&gt; Nat
</span><a href="Agda.TypeChecking.Monad.Base.html#recPars"><span class="hs-identifier hs-var">recPars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774325"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774325"><span class="hs-identifier hs-var">np</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recConHead :: Defn -&gt; ConHead
</span><a href="Agda.TypeChecking.Monad.Base.html#recConHead"><span class="hs-identifier hs-var">recConHead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774323"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774323"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recInduction :: Defn -&gt; Maybe Induction
</span><a href="Agda.TypeChecking.Monad.Base.html#recInduction"><span class="hs-identifier hs-var">recInduction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774321"><span class="annot"><span class="annottext">Maybe Induction
</span><a href="#local-6989586621680774321"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774320"><span class="annot"><span class="annottext">EtaEquality
recEtaEquality' :: Defn -&gt; EtaEquality
recEtaEquality' :: EtaEquality
</span><a href="Agda.TypeChecking.Monad.Base.html#recEtaEquality%27"><span class="hs-identifier hs-var hs-var">recEtaEquality'</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-927"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Maybe Induction
</span><a href="#local-6989586621680774321"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Induction -&gt; Maybe Induction -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Induction -&gt; Maybe Induction
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#CoInductive"><span class="hs-identifier hs-var">CoInductive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774363"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">Induction -&gt; Induction -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#CoInductive"><span class="hs-identifier hs-var">CoInductive</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-928"></span><span>              </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="#local-6989586621680774360"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CoinductiveDatatype"><span class="hs-identifier hs-var">CoinductiveDatatype</span></a></span><span>
</span><span id="line-929"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-930"></span><span>              </span><span class="annot"><span class="annottext">(DataOrRecord, QName, Args, Args, [QName], Bool)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Induction -&gt; EtaEquality -&gt; DataOrRecord
</span><a href="Agda.TypeChecking.Rules.LHS.html#IsRecord"><span class="hs-identifier hs-var">IsRecord</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Induction
</span><a href="#local-6989586621680774321"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">EtaEquality
</span><a href="#local-6989586621680774320"><span class="hs-identifier hs-var">recEtaEquality'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774343"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774341"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774323"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>        </span><span class="annot"><span class="annottext">Defn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="#local-6989586621680774360"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-932"></span><span>    </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="#local-6989586621680774360"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span class="hs-comment">-- | Update the target type of the split clause after a case split.</span><span>
</span><span id="line-935"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#fixTargetType"><span class="hs-identifier hs-type">fixTargetType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-936"></span><span id="fixTargetType"><span class="annot"><span class="annottext">fixTargetType :: SplitTag -&gt; SplitClause -&gt; Dom Type -&gt; TCMT IO SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#fixTargetType"><span class="hs-identifier hs-var hs-var">fixTargetType</span></a></span></span><span> </span><span id="local-6989586621680774312"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680774312"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621680774311"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680774311"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774310"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774310"><span class="hs-identifier hs-var">sctel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774309"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774309"><span class="hs-identifier hs-var">sigma</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621680774308"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774308"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-937"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-938"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;split clause telescope: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774310"><span class="hs-identifier hs-var">sctel</span></a></span><span>
</span><span id="line-939"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-940"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-941"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;substitution          : &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774309"><span class="hs-identifier hs-var">sigma</span></a></span><span>
</span><span id="line-942"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-943"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-944"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;target type before substitution:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774308"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-945"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;             after substitution:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Dom Type -&gt; Dom Type
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774309"><span class="hs-identifier hs-var">sigma</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774308"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-947"></span><span>
</span><span id="line-948"></span><span>    </span><span class="hs-comment">-- We update the target quantity to 0 for erased constructors.</span><span>
</span><span id="line-949"></span><span>    </span><span id="local-6989586621680774306"><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
</span><a href="#local-6989586621680774306"><span class="hs-identifier hs-var">updQuant</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-950"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680774312"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-951"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-type">SplitCon</span></a></span><span> </span><span id="local-6989586621680774305"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774305"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-952"></span><span>          </span><span id="local-6989586621680774304"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680774304"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Quantity
forall a. LensQuantity a =&gt; a -&gt; Quantity
</span><a href="Agda.Syntax.Common.html#getQuantity"><span class="hs-identifier hs-var">getQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Quantity) -&gt; TCMT IO Definition -&gt; TCMT IO Quantity
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774305"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-953"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680774304"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-954"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity0"><span class="hs-identifier hs-type">Quantity0</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type))
-&gt; (Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Quantity -&gt; Quantity) -&gt; Dom Type -&gt; Dom Type
forall a. LensQuantity a =&gt; (Quantity -&gt; Quantity) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapQuantity"><span class="hs-identifier hs-var">mapQuantity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Quantity -&gt; Quantity -&gt; Quantity
</span><a href="Agda.Syntax.Common.html#composeQuantity"><span class="hs-identifier hs-var">composeQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621680774304"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity1"><span class="hs-identifier hs-type">Quantity1</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-956"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity%3C9"><span class="hs-identifier hs-type">Quantity&#969;</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-957"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-type">SplitLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-958"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCatchall"><span class="hs-identifier hs-type">SplitCatchall</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-959"></span><span>
</span><span id="line-960"></span><span>    </span><span class="annot"><span class="annottext">SplitClause -&gt; TCMT IO SplitClause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCMT IO SplitClause)
-&gt; SplitClause -&gt; TCMT IO SplitClause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774311"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
</span><a href="#local-6989586621680774306"><span class="hs-identifier hs-var">updQuant</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; Dom Type -&gt; Dom Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Dom Type -&gt; Dom Type
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774309"><span class="hs-identifier hs-var">sigma</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774308"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span>
</span><span id="line-963"></span><span class="hs-comment">-- | Add more patterns to split clause if the target type is a function type.</span><span>
</span><span id="line-964"></span><span class="hs-comment">--   Returns the domains of the function type (if any).</span><span>
</span><span id="line-965"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-type">insertTrailingArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-966"></span><span id="insertTrailingArgs"><span class="annot"><span class="annottext">insertTrailingArgs :: SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var hs-var">insertTrailingArgs</span></a></span></span><span> </span><span id="local-6989586621680774294"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680774294"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774293"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774293"><span class="hs-identifier hs-var">sctel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774292"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774292"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774291"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774291"><span class="hs-identifier hs-var">sigma</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: SplitClause -&gt; Map CheckpointId Substitution
</span><a href="Agda.TypeChecking.Coverage.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774290"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774290"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: SplitClause -&gt; Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774289"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774289"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-967"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Dom Type)
-&gt; TCM (Telescope, SplitClause)
-&gt; (Dom Type -&gt; TCM (Telescope, SplitClause))
-&gt; TCM (Telescope, SplitClause)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774289"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; TCM (Telescope, SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774294"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCM (Telescope, SplitClause))
 -&gt; TCM (Telescope, SplitClause))
-&gt; (Dom Type -&gt; TCM (Telescope, SplitClause))
-&gt; TCM (Telescope, SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774288"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774288"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-968"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680774287"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774286"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774286"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Nat -&gt; Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpTo"><span class="hs-identifier hs-var">telViewUpTo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO (TelV Type)) -&gt; Type -&gt; TCMT IO (TelV Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774288"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-969"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">15</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-970"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;target type telescope: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-971"></span><span>          </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774293"><span class="hs-identifier hs-var">sctel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-972"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;target type core     : &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-973"></span><span>          </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774293"><span class="hs-identifier hs-var">sctel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774286"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-974"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-975"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774285"><span class="annot"><span class="annottext">n :: Nat
</span><a href="#local-6989586621680774285"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-976"></span><span>        </span><span class="hs-comment">-- Andreas, 2016-10-04 issue #2236</span><span>
</span><span id="line-977"></span><span>        </span><span class="hs-comment">-- Need to set origin to &quot;Inserted&quot; to avoid printing of hidden patterns.</span><span>
</span><span id="line-978"></span><span>        </span><span id="local-6989586621680774284"><span class="annot"><span class="annottext">xs :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680774284"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensArgInfo a =&gt; (ArgInfo -&gt; ArgInfo) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapArgInfo"><span class="hs-identifier hs-var">mapArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo
</span><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-var">hiddenInserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern]
forall a. DeBruijn a =&gt; Telescope -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleNamedArgs"><span class="hs-identifier hs-var">teleNamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-979"></span><span>        </span><span class="hs-comment">-- Compute new split clause</span><span>
</span><span id="line-980"></span><span>        </span><span id="local-6989586621680774281"><span class="annot"><span class="annottext">sctel' :: Telescope
</span><a href="#local-6989586621680774281"><span class="hs-identifier hs-var hs-var">sctel'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope) -&gt; ListTel -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (VerboseKey, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774285"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774293"><span class="hs-identifier hs-var">sctel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; ListTel -&gt; ListTel
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (VerboseKey, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-981"></span><span>        </span><span class="hs-comment">-- Dot patterns in @ps@ need to be raised!  (Issue 1298)</span><span>
</span><span id="line-982"></span><span>        </span><span id="local-6989586621680774278"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680774278"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774285"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774292"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774284"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-983"></span><span>        </span><span id="local-6989586621680774277"><span class="annot"><span class="annottext">newTarget :: Maybe (Dom Type)
</span><a href="#local-6989586621680774277"><span class="hs-identifier hs-var hs-var">newTarget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774288"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774286"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-984"></span><span>        </span><span id="local-6989586621680774276"><span class="annot"><span class="annottext">sc' :: SplitClause
</span><a href="#local-6989586621680774276"><span class="hs-identifier hs-var hs-var">sc'</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SClause :: Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span>
</span><span id="line-985"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774281"><span class="hs-identifier hs-var">sctel'</span></a></span><span>
</span><span id="line-986"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774278"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-987"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774285"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774291"><span class="hs-identifier hs-var">sigma</span></a></span><span> </span><span class="hs-comment">-- Should be wkS instead of liftS since</span><span>
</span><span id="line-988"></span><span>                                     </span><span class="hs-comment">-- variables are only added to new tel.</span><span>
</span><span id="line-989"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: Map CheckpointId Substitution
</span><a href="Agda.TypeChecking.Coverage.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Map CheckpointId Substitution))
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774285"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774290"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-990"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774277"><span class="hs-identifier hs-var">newTarget</span></a></span><span>
</span><span id="line-991"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-992"></span><span>    </span><span class="hs-comment">-- Separate debug printing to find cause of crash (Issue 1374)</span><span>
</span><span id="line-993"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-994"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;new split clause telescope   : &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774281"><span class="hs-identifier hs-var">sctel'</span></a></span><span>
</span><span id="line-995"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-996"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-997"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;new split clause patterns    : &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-998"></span><span>          </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774281"><span class="hs-identifier hs-var">sctel'</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; TCM Doc)
-&gt; [NamedArg DeBruijnPattern] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774278"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-999"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1000"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1001"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;new split clause substitution: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var hs-var">scSubst</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774276"><span class="hs-identifier hs-var">sc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1002"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1003"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1004"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;new split clause target      : &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1005"></span><span>          </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774281"><span class="hs-identifier hs-var">sctel'</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; TCM Doc) -&gt; Dom Type -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; Dom Type
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774277"><span class="hs-identifier hs-var">newTarget</span></a></span><span>
</span><span id="line-1006"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1007"></span><span>    </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1008"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;new split clause&quot;</span></span><span>
</span><span id="line-1009"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774276"><span class="hs-identifier hs-var">sc'</span></a></span><span>
</span><span id="line-1010"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1011"></span><span>    </span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; TCM (Telescope, SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; TCM (Telescope, SplitClause))
-&gt; (Telescope, SplitClause) -&gt; TCM (Telescope, SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774285"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774294"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774277"><span class="hs-identifier hs-var">newTarget</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774287"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774276"><span class="hs-identifier hs-var">sc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1012"></span><span>
</span><span id="line-1013"></span><span class="hs-comment">-- Andreas, 2017-01-18, issue #819, set visible arguments to UserWritten.</span><span>
</span><span id="line-1014"></span><span class="hs-comment">-- Otherwise, they will be printed as _.</span><span>
</span><span id="line-1015"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-type">hiddenInserted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span>
</span><span id="line-1016"></span><span id="hiddenInserted"><span class="annot"><span class="annottext">hiddenInserted :: ArgInfo -&gt; ArgInfo
</span><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-var hs-var">hiddenInserted</span></a></span></span><span> </span><span id="local-6989586621680774274"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774274"><span class="hs-identifier hs-var">ai</span></a></span></span><span>
</span><span id="line-1017"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Bool
forall a. LensHiding a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#visible"><span class="hs-identifier hs-var">visible</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774274"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#UserWritten"><span class="hs-identifier hs-var">UserWritten</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774274"><span class="hs-identifier hs-var">ai</span></a></span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Inserted</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774274"><span class="hs-identifier hs-var">ai</span></a></span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#computeHCompSplit"><span class="hs-identifier hs-type">computeHCompSplit</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>   </span><span class="hs-comment">-- ^ Telescope before split point.</span><span>
</span><span id="line-1021"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatVarName"><span class="hs-identifier hs-type">PatVarName</span></a></span><span>                   </span><span class="hs-comment">-- ^ Name of pattern variable at split point.</span><span>
</span><span id="line-1022"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="hs-comment">-- ^ Telescope after split point.</span><span>
</span><span id="line-1023"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>                        </span><span class="hs-comment">-- ^ Name of datatype to split at.</span><span>
</span><span id="line-1024"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="hs-comment">-- ^ Data type parameters.</span><span>
</span><span id="line-1025"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="hs-comment">-- ^ Data type indices.</span><span>
</span><span id="line-1026"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>                          </span><span class="hs-comment">-- ^ Index of split variable.</span><span>
</span><span id="line-1027"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="hs-comment">-- ^ Telescope for the patterns.</span><span>
</span><span id="line-1028"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>      </span><span class="hs-comment">-- ^ Patterns before doing the split.</span><span>
</span><span id="line-1029"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#CheckpointId"><span class="hs-identifier hs-type">CheckpointId</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span> </span><span class="hs-comment">-- ^ Current checkpoints</span><span>
</span><span id="line-1030"></span><span>  </span><span class="hs-comment">-- -&gt; QName                        -- ^ Constructor to fit into hole.</span><span>
</span><span id="line-1031"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-type">CoverM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- ^ New split clause if successful.</span><span>
</span><span id="line-1032"></span><span id="computeHCompSplit"><span class="annot"><span class="annottext">computeHCompSplit :: Telescope
-&gt; VerboseKey
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Nat
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId Substitution
-&gt; CoverM (Maybe (SplitTag, SplitClause))
</span><a href="Agda.TypeChecking.Coverage.html#computeHCompSplit"><span class="hs-identifier hs-var hs-var">computeHCompSplit</span></a></span></span><span> </span><span id="local-6989586621680774269"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774269"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621680774268"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774268"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774267"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774267"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621680774266"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774266"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680774265"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774265"><span class="hs-identifier hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621680774264"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774264"><span class="hs-identifier hs-var">ixs</span></a></span></span><span> </span><span id="local-6989586621680774263"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774263"><span class="hs-identifier hs-var">hix</span></a></span></span><span> </span><span id="local-6989586621680774262"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774262"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774261"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774261"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680774260"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774260"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1033"></span><span>    </span><span class="hs-comment">-- Get the type of the datatype</span><span>
</span><span id="line-1034"></span><span>  </span><span class="hs-comment">-- &#916;1 &#8866; dtype</span><span>
</span><span id="line-1035"></span><span>  </span><span id="local-6989586621680774259"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774259"><span class="hs-identifier hs-var">dsort</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Sort -&gt; ExceptT SplitError TCM Sort
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Sort -&gt; ExceptT SplitError TCM Sort)
-&gt; TCM Sort -&gt; ExceptT SplitError TCM Sort
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Term] -&gt; Substitution
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Term] -&gt; [Term]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; [Term]) -&gt; [Term] -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; Args -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774265"><span class="hs-identifier hs-var">pars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Sort) -&gt; Sort -&gt; Sort
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; Sort) -&gt; (Definition -&gt; Sort) -&gt; Definition -&gt; Sort
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Defn -&gt; Sort
</span><a href="Agda.TypeChecking.Monad.Base.html#dataSort"><span class="hs-identifier hs-var hs-var">dataSort</span></a></span><span> </span><span class="annot"><span class="annottext">(Defn -&gt; Sort) -&gt; (Definition -&gt; Defn) -&gt; Definition -&gt; Sort
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Sort) -&gt; TCMT IO Definition -&gt; TCM Sort
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774266"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1036"></span><span>  </span><span id="local-6989586621680774257"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774257"><span class="hs-identifier hs-var">hCompName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName -&gt; QName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">QName
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe QName -&gt; QName)
-&gt; ExceptT SplitError TCM (Maybe QName)
-&gt; ExceptT SplitError TCM QName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; ExceptT SplitError TCM (Maybe QName)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
VerboseKey -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getPrimitiveName%27"><span class="hs-identifier hs-var">getPrimitiveName'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-var">builtinHComp</span></a></span><span>
</span><span id="line-1037"></span><span>  </span><span id="local-6989586621680774256"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774256"><span class="hs-identifier hs-var">theHCompT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type)
-&gt; ExceptT SplitError TCM Definition -&gt; ExceptT SplitError TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; ExceptT SplitError TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774257"><span class="hs-identifier hs-var">hCompName</span></a></span><span>
</span><span id="line-1038"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1039"></span><span>    </span><span id="local-6989586621680774254"><span class="annot"><span class="annottext">dlvl :: Term
</span><a href="#local-6989586621680774254"><span class="hs-identifier hs-var hs-var">dlvl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Level' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-var">Level</span></a></span><span> </span><span class="annot"><span class="annottext">(Level' Term -&gt; Term) -&gt; (Sort -&gt; Level' Term) -&gt; Sort -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621680774253"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621680774253"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621680774253"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; Term) -&gt; Sort -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621680774259"><span class="hs-identifier hs-var">dsort</span></a></span><span>
</span><span id="line-1040"></span><span>    </span><span id="local-6989586621680774252"><span class="annot"><span class="annottext">dterm :: Term
</span><a href="#local-6989586621680774252"><span class="hs-identifier hs-var hs-var">dterm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774266"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774265"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774264"><span class="hs-identifier hs-var">ixs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span>  </span><span class="hs-comment">-- &#916;1 &#8866; gamma</span><span>
</span><span id="line-1042"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680774251"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774251"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO (TelV Type) -&gt; ExceptT SplitError TCM (TelV Type)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (TelV Type) -&gt; ExceptT SplitError TCM (TelV Type))
-&gt; TCMT IO (TelV Type) -&gt; ExceptT SplitError TCM (TelV Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telView"><span class="hs-identifier hs-var">telView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774256"><span class="hs-identifier hs-var">theHCompT</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; Arg Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774254"><span class="hs-identifier hs-var">dlvl</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774252"><span class="hs-identifier hs-var">dterm</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774269"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774251"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1044"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680774247"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774247"><span class="hs-identifier hs-var">delta1'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774246"><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774246"><span class="hs-identifier hs-var">rho0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1045"></span><span class="hs-comment">--      debugSubst &quot;rho0&quot; rho0</span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span>      </span><span class="hs-comment">-- We have &#916;&#8321;' &#8866; &#961;&#8320; : &#916;&#8321;&#915;, so split it into the part for &#916;&#8321; and the part for &#915;</span><span>
</span><span id="line-1048"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774245"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774245"><span class="hs-identifier hs-var">rho1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774244"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774244"><span class="hs-identifier hs-var">rho2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; Substitution' SplitPattern
-&gt; (Substitution' SplitPattern, Substitution' SplitPattern)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774251"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern
 -&gt; (Substitution' SplitPattern, Substitution' SplitPattern))
-&gt; Substitution' SplitPattern
-&gt; (Substitution' SplitPattern, Substitution' SplitPattern)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.Match.html#toSplitPSubst"><span class="hs-identifier hs-var">toSplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774246"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-1049"></span><span>
</span><span id="line-1050"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774241"><span class="annot"><span class="annottext">defp :: SplitPattern
</span><a href="#local-6989586621680774241"><span class="hs-identifier hs-var hs-var">defp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; QName -&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall x.
PatternInfo -&gt; QName -&gt; [NamedArg (Pattern' x)] -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-var">DefP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><a href="Agda.Syntax.Internal.html#defaultPatternInfo"><span class="hs-identifier hs-var">defaultPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774257"><span class="hs-identifier hs-var">hCompName</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; SplitPattern)
-&gt; ([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern]
-&gt; SplitPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Origin -&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Inserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1051"></span><span>                   </span><span class="annot"><span class="annottext">(Arg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [Arg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitPattern -&gt; Named NamedName SplitPattern)
-&gt; Arg SplitPattern -&gt; NamedArg SplitPattern
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; Named NamedName SplitPattern
forall a name. a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#unnamed"><span class="hs-identifier hs-var">unnamed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Hiding -&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg SplitPattern -&gt; Arg SplitPattern)
-&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; Arg SplitPattern
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; Arg SplitPattern)
-&gt; SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg SplitPattern)
-&gt; SplitPattern -&gt; SplitPattern
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg SplitPattern)
</span><a href="#local-6989586621680774245"><span class="hs-identifier hs-var">rho1</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern) -&gt; SplitPattern -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; Term -&gt; SplitPattern
forall x. PatternInfo -&gt; Term -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-var">DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><a href="Agda.Syntax.Internal.html#defaultPatternInfo"><span class="hs-identifier hs-var">defaultPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; SplitPattern) -&gt; Term -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774254"><span class="hs-identifier hs-var">dlvl</span></a></span><span>
</span><span id="line-1052"></span><span>                                      </span><span class="hs-special">,</span><span class="annot"><span class="annottext">Hiding -&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg SplitPattern -&gt; Arg SplitPattern)
-&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; Arg SplitPattern
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; Arg SplitPattern)
-&gt; SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg SplitPattern)
-&gt; SplitPattern -&gt; SplitPattern
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg SplitPattern)
</span><a href="#local-6989586621680774245"><span class="hs-identifier hs-var">rho1</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern) -&gt; SplitPattern -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; Term -&gt; SplitPattern
forall x. PatternInfo -&gt; Term -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-var">DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><a href="Agda.Syntax.Internal.html#defaultPatternInfo"><span class="hs-identifier hs-var">defaultPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; SplitPattern) -&gt; Term -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774252"><span class="hs-identifier hs-var">dterm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1053"></span><span>                   </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680774244"><span class="hs-identifier hs-var">rho2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern]
forall a. DeBruijn a =&gt; Telescope -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleNamedArgs"><span class="hs-identifier hs-var">teleNamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774251"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- rho0?</span><span>
</span><span id="line-1054"></span><span>      </span><span class="hs-comment">-- Compute final context and substitution</span><span>
</span><span id="line-1055"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774238"><span class="annot"><span class="annottext">rho3 :: Substitution' SplitPattern
</span><a href="#local-6989586621680774238"><span class="hs-identifier hs-var hs-var">rho3</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621680774241"><span class="hs-identifier hs-var">defp</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774245"><span class="hs-identifier hs-var">rho1</span></a></span><span>            </span><span class="hs-comment">-- &#916;&#8321;' &#8866; &#961;&#8323; : &#916;&#8321;(x:D)</span><span>
</span><span id="line-1056"></span><span>          </span><span id="local-6989586621680774237"><span class="annot"><span class="annottext">delta2' :: Telescope
</span><a href="#local-6989586621680774237"><span class="hs-identifier hs-var hs-var">delta2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Telescope -&gt; Telescope
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774238"><span class="hs-identifier hs-var">rho3</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774267"><span class="hs-identifier hs-var">delta2</span></a></span><span>  </span><span class="hs-comment">-- &#916;&#8322;' = &#916;&#8322;&#961;&#8323;</span><span>
</span><span id="line-1057"></span><span>          </span><span id="local-6989586621680774236"><span class="annot"><span class="annottext">delta' :: Telescope
</span><a href="#local-6989586621680774236"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774247"><span class="hs-identifier hs-var">delta1'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774237"><span class="hs-identifier hs-var">delta2'</span></a></span><span> </span><span class="hs-comment">-- &#916;'  = &#916;&#8321;'&#916;&#8322;'</span><span>
</span><span id="line-1058"></span><span>          </span><span id="local-6989586621680774235"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621680774235"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774267"><span class="hs-identifier hs-var">delta2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774238"><span class="hs-identifier hs-var">rho3</span></a></span><span>   </span><span class="hs-comment">-- &#916;' &#8866; &#961; : &#916;&#8321;(x:D)&#916;&#8322;</span><span>
</span><span id="line-1059"></span><span>
</span><span id="line-1060"></span><span>      </span><span class="hs-comment">-- debugTel &quot;delta'&quot; delta'</span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-comment">-- debugSubst &quot;rho&quot; rho</span><span>
</span><span id="line-1062"></span><span>      </span><span class="hs-comment">-- debugPs tel ps</span><span>
</span><span id="line-1063"></span><span>
</span><span id="line-1064"></span><span>      </span><span class="hs-comment">-- Apply the substitution</span><span>
</span><span id="line-1065"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774234"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680774234"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680774235"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774261"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1066"></span><span>      </span><span class="hs-comment">-- debugPlugged delta' ps'</span><span>
</span><span id="line-1067"></span><span>
</span><span id="line-1068"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774233"><span class="annot"><span class="annottext">cps' :: Map CheckpointId Substitution
</span><a href="#local-6989586621680774233"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774235"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774260"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span>      </span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (SplitTag, SplitClause)
 -&gt; CoverM (Maybe (SplitTag, SplitClause)))
-&gt; Maybe (SplitTag, SplitClause)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; Maybe (SplitTag, SplitClause)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; Maybe (SplitTag, SplitClause))
-&gt; (SplitClause -&gt; (SplitTag, SplitClause))
-&gt; SplitClause
-&gt; Maybe (SplitTag, SplitClause)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774257"><span class="hs-identifier hs-var">hCompName</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Maybe (SplitTag, SplitClause))
-&gt; SplitClause -&gt; Maybe (SplitTag, SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774236"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774234"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774235"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774233"><span class="hs-identifier hs-var">cps'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- target fixed later</span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span>
</span><span id="line-1073"></span><span>
</span><span id="line-1074"></span><span class="hs-comment">-- | @computeNeighbourhood delta1 delta2 d pars ixs hix tel ps con@</span><span>
</span><span id="line-1075"></span><span class="hs-comment">--</span><span>
</span><span id="line-1076"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-1077"></span><span class="hs-comment">--      delta1   Telescope before split point</span><span>
</span><span id="line-1078"></span><span class="hs-comment">--      n        Name of pattern variable at split point</span><span>
</span><span id="line-1079"></span><span class="hs-comment">--      delta2   Telescope after split point</span><span>
</span><span id="line-1080"></span><span class="hs-comment">--      d        Name of datatype to split at</span><span>
</span><span id="line-1081"></span><span class="hs-comment">--      pars     Data type parameters</span><span>
</span><span id="line-1082"></span><span class="hs-comment">--      ixs      Data type indices</span><span>
</span><span id="line-1083"></span><span class="hs-comment">--      hix      Index of split variable</span><span>
</span><span id="line-1084"></span><span class="hs-comment">--      tel      Telescope for patterns ps</span><span>
</span><span id="line-1085"></span><span class="hs-comment">--      ps       Patterns before doing the split</span><span>
</span><span id="line-1086"></span><span class="hs-comment">--      cps      Current module parameter checkpoints</span><span>
</span><span id="line-1087"></span><span class="hs-comment">--      con      Constructor to fit into hole</span><span>
</span><span id="line-1088"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-1089"></span><span class="hs-comment">--   @dtype == d pars ixs@</span><span>
</span><span id="line-1090"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#computeNeighbourhood"><span class="hs-identifier hs-type">computeNeighbourhood</span></a></span><span>
</span><span id="line-1091"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="hs-comment">-- ^ Telescope before split point.</span><span>
</span><span id="line-1092"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatVarName"><span class="hs-identifier hs-type">PatVarName</span></a></span><span>                   </span><span class="hs-comment">-- ^ Name of pattern variable at split point.</span><span>
</span><span id="line-1093"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="hs-comment">-- ^ Telescope after split point.</span><span>
</span><span id="line-1094"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>                        </span><span class="hs-comment">-- ^ Name of datatype to split at.</span><span>
</span><span id="line-1095"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="hs-comment">-- ^ Data type parameters.</span><span>
</span><span id="line-1096"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="hs-comment">-- ^ Data type indices.</span><span>
</span><span id="line-1097"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>                          </span><span class="hs-comment">-- ^ Index of split variable.</span><span>
</span><span id="line-1098"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="hs-comment">-- ^ Telescope for the patterns.</span><span>
</span><span id="line-1099"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>      </span><span class="hs-comment">-- ^ Patterns before doing the split.</span><span>
</span><span id="line-1100"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#CheckpointId"><span class="hs-identifier hs-type">CheckpointId</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span> </span><span class="hs-comment">-- ^ Current checkpoints</span><span>
</span><span id="line-1101"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>                        </span><span class="hs-comment">-- ^ Constructor to fit into hole.</span><span>
</span><span id="line-1102"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-type">CoverM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- ^ New split clause if successful.</span><span>
</span><span id="line-1103"></span><span id="computeNeighbourhood"><span class="annot"><span class="annottext">computeNeighbourhood :: Telescope
-&gt; VerboseKey
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Nat
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId Substitution
-&gt; QName
-&gt; CoverM (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#computeNeighbourhood"><span class="hs-identifier hs-var hs-var">computeNeighbourhood</span></a></span></span><span> </span><span id="local-6989586621680774231"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774231"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621680774230"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774230"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680774229"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774229"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621680774228"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774228"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680774227"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774227"><span class="hs-identifier hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621680774226"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774226"><span class="hs-identifier hs-var">ixs</span></a></span></span><span> </span><span id="local-6989586621680774225"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774225"><span class="hs-identifier hs-var">hix</span></a></span></span><span> </span><span id="local-6989586621680774224"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774224"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774223"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774223"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680774222"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774222"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621680774221"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774221"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1104"></span><span>
</span><span id="line-1105"></span><span>  </span><span class="hs-comment">-- Get the type of the datatype</span><span>
</span><span id="line-1106"></span><span>  </span><span id="local-6989586621680774220"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774220"><span class="hs-identifier hs-var">dtype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Type -&gt; ExceptT SplitError TCM Type
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; ExceptT SplitError TCM Type)
-&gt; TCM Type -&gt; ExceptT SplitError TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774227"><span class="hs-identifier hs-var">pars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; (Definition -&gt; Type) -&gt; Definition -&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; TCMT IO Definition -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774228"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1107"></span><span>
</span><span id="line-1108"></span><span>  </span><span class="hs-comment">-- Get the real constructor name</span><span>
</span><span id="line-1109"></span><span>  </span><span id="local-6989586621680774219"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774219"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM ConHead -&gt; ExceptT SplitError TCM ConHead
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM ConHead -&gt; ExceptT SplitError TCM ConHead)
-&gt; TCM ConHead -&gt; ExceptT SplitError TCM ConHead
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SigError -&gt; ConHead) -&gt; Either SigError ConHead -&gt; ConHead
forall a b. (a -&gt; b) -&gt; Either a b -&gt; b
</span><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-var">fromRight</span></a></span><span> </span><span class="annot"><span class="annottext">SigError -&gt; ConHead
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Either SigError ConHead -&gt; ConHead)
-&gt; TCMT IO (Either SigError ConHead) -&gt; TCM ConHead
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO (Either SigError ConHead)
</span><a href="Agda.TypeChecking.Datatypes.html#getConForm"><span class="hs-identifier hs-var">getConForm</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774221"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1110"></span><span>  </span><span id="local-6989586621680774217"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774217"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ExceptT SplitError TCM ConHead
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ConHead -&gt; ExceptT SplitError TCM ConHead)
-&gt; ConHead -&gt; ExceptT SplitError TCM ConHead
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774219"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">conName :: QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774221"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">}</span><span>  </span><span class="hs-comment">-- What if we restore the current name?</span><span>
</span><span id="line-1111"></span><span>                                       </span><span class="hs-comment">-- Andreas, 2013-11-29 changes nothing!</span><span>
</span><span id="line-1112"></span><span>
</span><span id="line-1113"></span><span>  </span><span class="hs-comment">-- Get the type of the constructor</span><span>
</span><span id="line-1114"></span><span>  </span><span id="local-6989586621680774216"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774216"><span class="hs-identifier hs-var">ctype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Type -&gt; ExceptT SplitError TCM Type
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; ExceptT SplitError TCM Type)
-&gt; TCM Type -&gt; ExceptT SplitError TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; TCMT IO Definition -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; ConHead -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConInfo"><span class="hs-identifier hs-var">getConInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774217"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1115"></span><span>
</span><span id="line-1116"></span><span>  </span><span class="hs-comment">-- Lookup the type of the constructor at the given parameters</span><span>
</span><span id="line-1117"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680774214"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774214"><span class="hs-identifier hs-var">gamma0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774213"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774213"><span class="hs-identifier hs-var">cixs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774212"><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774212"><span class="hs-identifier hs-var">boundary</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1118"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680774211"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774211"><span class="hs-identifier hs-var">gamma0</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774209"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774209"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774208"><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774208"><span class="hs-identifier hs-var">boundary</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (TelV Type, [(Term, (Term, Term))])
-&gt; ExceptT SplitError TCM (TelV Type, [(Term, (Term, Term))])
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (TelV Type, [(Term, (Term, Term))])
 -&gt; ExceptT SplitError TCM (TelV Type, [(Term, (Term, Term))]))
-&gt; TCM (TelV Type, [(Term, (Term, Term))])
-&gt; ExceptT SplitError TCM (TelV Type, [(Term, (Term, Term))])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (TelV Type, [(Term, (Term, Term))])
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; m (TelV Type, [(Term, (Term, Term))])
</span><a href="Agda.TypeChecking.Telescope.html#telViewPathBoundaryP"><span class="hs-identifier hs-var">telViewPathBoundaryP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774216"><span class="hs-identifier hs-var">ctype</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774227"><span class="hs-identifier hs-var">pars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774206"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774206"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621680774209"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1120"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680774205"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774205"><span class="hs-identifier hs-var">cixs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe Args
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680774206"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-1121"></span><span>    </span><span class="annot"><span class="annottext">(Telescope, Args, [(Term, (Term, Term))])
-&gt; ExceptT SplitError TCM (Telescope, Args, [(Term, (Term, Term))])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774211"><span class="hs-identifier hs-var">gamma0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774205"><span class="hs-identifier hs-var">cixs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774208"><span class="hs-identifier hs-var">boundary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>
</span><span id="line-1123"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListTel
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774203"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774203"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">ListTel
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; ListTel -&gt; (ListTel, ListTel)
forall a. Nat -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774224"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774225"><span class="hs-identifier hs-var">hix</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (VerboseKey, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774224"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>
</span><span id="line-1125"></span><span>  </span><span class="hs-comment">-- Andreas, 2012-02-25 preserve name suggestion for recursive arguments</span><span>
</span><span id="line-1126"></span><span>  </span><span class="hs-comment">-- of constructor</span><span>
</span><span id="line-1127"></span><span>
</span><span id="line-1128"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774202"><span class="annot"><span class="annottext">preserve :: (VerboseKey, Type) -&gt; (VerboseKey, Type)
</span><a href="#local-6989586621680774202"><span class="hs-identifier hs-var hs-var">preserve</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774201"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774201"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774200"><span class="annot"><span class="annottext">t :: Type
</span><a href="#local-6989586621680774200"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621680774199"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774199"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774228"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774199"><span class="hs-identifier hs-var">d'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774230"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774200"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1129"></span><span>      </span><span class="annot"><a href="#local-6989586621680774202"><span class="hs-identifier hs-var">preserve</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774198"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774198"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774197"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774197"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774198"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774197"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>      </span><span id="local-6989586621680774196"><span class="annot"><span class="annottext">gamma :: Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var hs-var">gamma</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; Telescope -&gt; Telescope
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; Dom Type) -&gt; Telescope -&gt; Telescope)
-&gt; ((Modality -&gt; Modality) -&gt; Dom Type -&gt; Dom Type)
-&gt; (Modality -&gt; Modality)
-&gt; Telescope
-&gt; Telescope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Modality -&gt; Modality) -&gt; Dom Type -&gt; Dom Type
forall a. LensModality a =&gt; (Modality -&gt; Modality) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapModality"><span class="hs-identifier hs-var">mapModality</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Modality -&gt; Modality -&gt; Modality
</span><a href="Agda.Syntax.Common.html#composeModality"><span class="hs-identifier hs-var">composeModality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Modality
forall a. LensModality a =&gt; a -&gt; Modality
</span><a href="Agda.Syntax.Common.html#getModality"><span class="hs-identifier hs-var">getModality</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774203"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope)
-&gt; (Telescope -&gt; ListTel) -&gt; Telescope -&gt; Telescope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Dom' Term (VerboseKey, Type) -&gt; Dom' Term (VerboseKey, Type))
-&gt; ListTel -&gt; ListTel
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((VerboseKey, Type) -&gt; (VerboseKey, Type))
-&gt; Dom' Term (VerboseKey, Type) -&gt; Dom' Term (VerboseKey, Type)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey, Type) -&gt; (VerboseKey, Type)
</span><a href="#local-6989586621680774202"><span class="hs-identifier hs-var">preserve</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; ListTel)
-&gt; (Telescope -&gt; ListTel) -&gt; Telescope -&gt; ListTel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (VerboseKey, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774214"><span class="hs-identifier hs-var">gamma0</span></a></span><span>
</span><span id="line-1131"></span><span>      </span><span id="local-6989586621680774193"><span class="annot"><span class="annottext">delta1Gamma :: Telescope
</span><a href="#local-6989586621680774193"><span class="hs-identifier hs-var hs-var">delta1Gamma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774231"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-1132"></span><span>
</span><span id="line-1133"></span><span>  </span><span class="annot"><span class="annottext">ConHead
-&gt; Type
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Args
-&gt; Telescope
-&gt; Telescope
-&gt; Telescope
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Nat
-&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a a a a a a a a a a a.
(MonadTCM tcm, AddContext a, AddContext a, AddContext a,
 PrettyTCM a, PrettyTCM a, PrettyTCM a, PrettyTCM a, PrettyTCM a,
 PrettyTCM a, PrettyTCM a, PrettyTCM a, PrettyTCM a, PrettyTCM a,
 Show a, Show a, Show a, Show a, Show a, Show a, Show a, Show a,
 Show a, Show a) =&gt;
a
-&gt; a
-&gt; a
-&gt; [a]
-&gt; [a]
-&gt; [a]
-&gt; a
-&gt; a
-&gt; a
-&gt; a
-&gt; [NamedArg SplitPattern]
-&gt; a
-&gt; tcm ()
</span><a href="#local-6989586621680774192"><span class="hs-identifier hs-var">debugInit</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774217"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774216"><span class="hs-identifier hs-var">ctype</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774228"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774227"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774226"><span class="hs-identifier hs-var">ixs</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774213"><span class="hs-identifier hs-var">cixs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774231"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774229"><span class="hs-identifier hs-var">delta2</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774224"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774223"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774225"><span class="hs-identifier hs-var">hix</span></a></span><span>
</span><span id="line-1134"></span><span>
</span><span id="line-1135"></span><span>  </span><span id="local-6989586621680774191"><span class="annot"><span class="annottext">[IsForced]
</span><a href="#local-6989586621680774191"><span class="hs-identifier hs-var">cforced</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; [IsForced]
</span><a href="Agda.TypeChecking.Monad.Base.html#defForced"><span class="hs-identifier hs-var">defForced</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; [IsForced])
-&gt; ExceptT SplitError TCM Definition
-&gt; ExceptT SplitError TCM [IsForced]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; ExceptT SplitError TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774221"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1136"></span><span>      </span><span class="hs-comment">-- Variables in &#916;&#8321; are not forced, since the unifier takes care to not introduce forced</span><span>
</span><span id="line-1137"></span><span>      </span><span class="hs-comment">-- variables.</span><span>
</span><span id="line-1138"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774189"><span class="annot"><span class="annottext">forced :: [IsForced]
</span><a href="#local-6989586621680774189"><span class="hs-identifier hs-var hs-var">forced</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; IsForced -&gt; [IsForced]
forall a. Nat -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774231"><span class="hs-identifier hs-var">delta1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IsForced
</span><a href="Agda.TypeChecking.Monad.Base.html#NotForced"><span class="hs-identifier hs-var">NotForced</span></a></span><span> </span><span class="annot"><span class="annottext">[IsForced] -&gt; [IsForced] -&gt; [IsForced]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[IsForced]
</span><a href="#local-6989586621680774191"><span class="hs-identifier hs-var">cforced</span></a></span><span>
</span><span id="line-1139"></span><span>      </span><span id="local-6989586621680774186"><span class="annot"><span class="annottext">flex :: FlexibleVars
</span><a href="#local-6989586621680774186"><span class="hs-identifier hs-var hs-var">flex</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IsForced] -&gt; Telescope -&gt; FlexibleVars
</span><a href="Agda.TypeChecking.Rules.LHS.Problem.html#allFlexVars"><span class="hs-identifier hs-var">allFlexVars</span></a></span><span> </span><span class="annot"><span class="annottext">[IsForced]
</span><a href="#local-6989586621680774189"><span class="hs-identifier hs-var">forced</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774193"><span class="hs-identifier hs-var">delta1Gamma</span></a></span><span> </span><span class="hs-comment">-- All variables are flexible</span><span>
</span><span id="line-1140"></span><span>
</span><span id="line-1141"></span><span>  </span><span class="hs-comment">-- Unify constructor target and given type (in &#916;&#8321;&#915;)</span><span>
</span><span id="line-1142"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774185"><span class="annot"><span class="annottext">conIxs :: Args
</span><a href="#local-6989586621680774185"><span class="hs-identifier hs-var hs-var">conIxs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Args -&gt; Args
forall a. Nat -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774227"><span class="hs-identifier hs-var">pars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774213"><span class="hs-identifier hs-var">cixs</span></a></span><span>
</span><span id="line-1143"></span><span>      </span><span id="local-6989586621680774184"><span class="annot"><span class="annottext">givenIxs :: Args
</span><a href="#local-6989586621680774184"><span class="hs-identifier hs-var hs-var">givenIxs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Args -&gt; Args
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774226"><span class="hs-identifier hs-var">ixs</span></a></span><span>
</span><span id="line-1144"></span><span>
</span><span id="line-1145"></span><span>  </span><span class="hs-comment">-- Andrea 2019-07-17 propagate the Cohesion to the equation telescope</span><span>
</span><span id="line-1146"></span><span>  </span><span class="hs-comment">-- TODO: should we propagate the modality in general?</span><span>
</span><span id="line-1147"></span><span>  </span><span class="hs-comment">-- See also LHS checking.</span><span>
</span><span id="line-1148"></span><span>  </span><span id="local-6989586621680774183"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774183"><span class="hs-identifier hs-var">dtype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1149"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774182"><span class="annot"><span class="annottext">updCoh :: Cohesion -&gt; Cohesion
</span><a href="#local-6989586621680774182"><span class="hs-identifier hs-var hs-var">updCoh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cohesion -&gt; Cohesion -&gt; Cohesion
</span><a href="Agda.Syntax.Common.html#composeCohesion"><span class="hs-identifier hs-var">composeCohesion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Cohesion
forall a. LensCohesion a =&gt; a -&gt; Cohesion
</span><a href="Agda.Syntax.Common.html#getCohesion"><span class="hs-identifier hs-var">getCohesion</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621680774203"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1150"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680774179"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774179"><span class="hs-identifier hs-var">dtel</span></a></span></span><span> </span><span id="local-6989586621680774178"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774178"><span class="hs-identifier hs-var">dt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; ExceptT SplitError TCM (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telView"><span class="hs-identifier hs-var">telView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774220"><span class="hs-identifier hs-var">dtype</span></a></span><span>
</span><span id="line-1151"></span><span>         </span><span class="annot"><span class="annottext">Type -&gt; ExceptT SplitError TCM Type
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; ExceptT SplitError TCM Type)
-&gt; Type -&gt; ExceptT SplitError TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Type -&gt; Type
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Cohesion -&gt; Cohesion) -&gt; Dom Type -&gt; Dom Type
forall a. LensCohesion a =&gt; (Cohesion -&gt; Cohesion) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapCohesion"><span class="hs-identifier hs-var">mapCohesion</span></a></span><span> </span><span class="annot"><span class="annottext">Cohesion -&gt; Cohesion
</span><a href="#local-6989586621680774182"><span class="hs-identifier hs-var">updCoh</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; Telescope -&gt; Telescope
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774179"><span class="hs-identifier hs-var">dtel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774178"><span class="hs-identifier hs-var">dt</span></a></span><span>
</span><span id="line-1152"></span><span>
</span><span id="line-1153"></span><span>  </span><span id="local-6989586621680774176"><span class="annot"><span class="annottext">ExceptT SplitError TCM UnificationResult
-&gt; ExceptT SplitError TCM UnificationResult
</span><a href="#local-6989586621680774176"><span class="hs-identifier hs-var">withKIfStrict</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774231"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   SplitError
   TCM
   (ExceptT SplitError TCM UnificationResult
    -&gt; ExceptT SplitError TCM UnificationResult)
 -&gt; ExceptT
      SplitError
      TCM
      (ExceptT SplitError TCM UnificationResult
       -&gt; ExceptT SplitError TCM UnificationResult))
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; ExceptT SplitError TCM Sort
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Sort
forall a. LensSort a =&gt; a -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#getSort"><span class="hs-identifier hs-var">getSort</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774183"><span class="hs-identifier hs-var">dtype</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM Sort
-&gt; (Sort
    -&gt; ExceptT
         SplitError
         TCM
         (ExceptT SplitError TCM UnificationResult
          -&gt; ExceptT SplitError TCM UnificationResult))
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1154"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#SSet"><span class="hs-identifier hs-type">SSet</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM UnificationResult
 -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((ExceptT SplitError TCM UnificationResult
  -&gt; ExceptT SplitError TCM UnificationResult)
 -&gt; ExceptT
      SplitError
      TCM
      (ExceptT SplitError TCM UnificationResult
       -&gt; ExceptT SplitError TCM UnificationResult))
-&gt; (ExceptT SplitError TCM UnificationResult
    -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Lens' Bool TCEnv
-&gt; (Bool -&gt; Bool)
-&gt; ExceptT SplitError TCM UnificationResult
-&gt; ExceptT SplitError TCM UnificationResult
forall (m :: * -&gt; *) a b.
MonadTCEnv m =&gt;
Lens' a TCEnv -&gt; (a -&gt; a) -&gt; m b -&gt; m b
</span><a href="Agda.TypeChecking.Monad.Base.html#locallyTC"><span class="hs-identifier hs-var">locallyTC</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Bool TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#eSplitOnStrict"><span class="hs-identifier hs-var">eSplitOnStrict</span></a></span><span> </span><span class="annot"><span class="annottext">((Bool -&gt; Bool)
 -&gt; ExceptT SplitError TCM UnificationResult
 -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; (Bool -&gt; Bool)
-&gt; ExceptT SplitError TCM UnificationResult
-&gt; ExceptT SplitError TCM UnificationResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1155"></span><span>    </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM UnificationResult
 -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; ExceptT
     SplitError
     TCM
     (ExceptT SplitError TCM UnificationResult
      -&gt; ExceptT SplitError TCM UnificationResult)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM UnificationResult
-&gt; ExceptT SplitError TCM UnificationResult
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-1156"></span><span>
</span><span id="line-1157"></span><span>  </span><span id="local-6989586621680774173"><span class="annot"><span class="annottext">UnificationResult
</span><a href="#local-6989586621680774173"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM UnificationResult
-&gt; ExceptT SplitError TCM UnificationResult
</span><a href="#local-6989586621680774176"><span class="hs-identifier hs-var">withKIfStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM UnificationResult
 -&gt; ExceptT SplitError TCM UnificationResult)
-&gt; ExceptT SplitError TCM UnificationResult
-&gt; ExceptT SplitError TCM UnificationResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; FlexibleVars
-&gt; Type
-&gt; Args
-&gt; Args
-&gt; ExceptT SplitError TCM UnificationResult
forall (m :: * -&gt; *).
(PureTCM m, MonadBench m, BenchPhase m ~ Phase) =&gt;
Telescope
-&gt; FlexibleVars -&gt; Type -&gt; Args -&gt; Args -&gt; m UnificationResult
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.html#unifyIndices"><span class="hs-identifier hs-var">unifyIndices</span></a></span><span>
</span><span id="line-1158"></span><span>         </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774193"><span class="hs-identifier hs-var">delta1Gamma</span></a></span><span>
</span><span id="line-1159"></span><span>         </span><span class="annot"><span class="annottext">FlexibleVars
</span><a href="#local-6989586621680774186"><span class="hs-identifier hs-var">flex</span></a></span><span>
</span><span id="line-1160"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; Type
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774183"><span class="hs-identifier hs-var">dtype</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1161"></span><span>         </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774185"><span class="hs-identifier hs-var">conIxs</span></a></span><span>
</span><span id="line-1162"></span><span>         </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774184"><span class="hs-identifier hs-var">givenIxs</span></a></span><span>
</span><span id="line-1163"></span><span>
</span><span id="line-1164"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774171"><span class="annot"><span class="annottext">stuck :: Maybe Blocker -&gt; [UnificationFailure] -&gt; CoverM (Maybe SplitClause)
</span><a href="#local-6989586621680774171"><span class="hs-identifier hs-var hs-var">stuck</span></a></span></span><span> </span><span id="local-6989586621680774170"><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621680774170"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680774169"><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621680774169"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1165"></span><span>        </span><span class="annot"><span class="annottext">ExceptT SplitError TCM ()
</span><a href="#local-6989586621680774168"><span class="hs-identifier hs-var">debugCantSplit</span></a></span><span>
</span><span id="line-1166"></span><span>        </span><span class="annot"><span class="annottext">SplitError -&gt; CoverM (Maybe SplitClause)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError -&gt; CoverM (Maybe SplitClause))
-&gt; SplitError -&gt; CoverM (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
-&gt; QName
-&gt; Telescope
-&gt; Args
-&gt; Args
-&gt; [UnificationFailure]
-&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#UnificationStuck"><span class="hs-identifier hs-var">UnificationStuck</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621680774170"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774217"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774231"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774185"><span class="hs-identifier hs-var">conIxs</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774184"><span class="hs-identifier hs-var">givenIxs</span></a></span><span> </span><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621680774169"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-1167"></span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnificationResult
</span><a href="#local-6989586621680774173"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1170"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#NoUnify"><span class="hs-identifier hs-type">NoUnify</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM ()
</span><a href="#local-6989586621680774165"><span class="hs-identifier hs-var">debugNoUnify</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM ()
-&gt; Maybe SplitClause -&gt; CoverM (Maybe SplitClause)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe SplitClause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#UnifyBlocked"><span class="hs-identifier hs-type">UnifyBlocked</span></a></span><span> </span><span id="local-6989586621680774163"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621680774163"><span class="hs-identifier hs-var">block</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocker -&gt; [UnificationFailure] -&gt; CoverM (Maybe SplitClause)
</span><a href="#local-6989586621680774171"><span class="hs-identifier hs-var">stuck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocker -&gt; Maybe Blocker
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621680774163"><span class="hs-identifier hs-var">block</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#UnifyStuck"><span class="hs-identifier hs-type">UnifyStuck</span></a></span><span> </span><span id="local-6989586621680774161"><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621680774161"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocker -&gt; [UnificationFailure] -&gt; CoverM (Maybe SplitClause)
</span><a href="#local-6989586621680774171"><span class="hs-identifier hs-var">stuck</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621680774161"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-1175"></span><span>
</span><span id="line-1176"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#Unifies"><span class="hs-identifier hs-type">Unifies</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774159"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774159"><span class="hs-identifier hs-var">delta1'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774158"><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774158"><span class="hs-identifier hs-var">rho0</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1177"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey
-&gt; Substitution' DeBruijnPattern -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, PrettyTCM a) =&gt;
VerboseKey -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774157"><span class="hs-identifier hs-var">debugSubst</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;rho0&quot;</span></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774158"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774156"><span class="annot"><span class="annottext">rho0' :: Substitution' SplitPattern
</span><a href="#local-6989586621680774156"><span class="hs-identifier hs-var hs-var">rho0'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.Match.html#toSplitPSubst"><span class="hs-identifier hs-var">toSplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' DeBruijnPattern
</span><a href="#local-6989586621680774158"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span>      </span><span class="hs-comment">-- We have &#916;&#8321;' &#8866; &#961;&#8320; : &#916;&#8321;&#915;, so split it into the part for &#916;&#8321; and the part for &#915;</span><span>
</span><span id="line-1182"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774155"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774155"><span class="hs-identifier hs-var">rho1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680774154"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774154"><span class="hs-identifier hs-var">rho2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat
-&gt; Substitution' SplitPattern
-&gt; (Substitution' SplitPattern, Substitution' SplitPattern)
forall a.
Nat -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern
 -&gt; (Substitution' SplitPattern, Substitution' SplitPattern))
-&gt; Substitution' SplitPattern
-&gt; (Substitution' SplitPattern, Substitution' SplitPattern)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774156"><span class="hs-identifier hs-var">rho0'</span></a></span><span>
</span><span id="line-1183"></span><span>
</span><span id="line-1184"></span><span>      </span><span class="hs-comment">-- Andreas, 2015-05-01  I guess it is fine to use no @conPType@</span><span>
</span><span id="line-1185"></span><span>      </span><span class="hs-comment">-- as the result of splitting is never used further down the pipeline.</span><span>
</span><span id="line-1186"></span><span>      </span><span class="hs-comment">-- After splitting, Agda reloads the file.</span><span>
</span><span id="line-1187"></span><span>      </span><span class="hs-comment">-- Andreas, 2017-09-03, issue #2729: remember that pattern was generated by case split.</span><span>
</span><span id="line-1188"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774153"><span class="annot"><span class="annottext">cpi :: ConPatternInfo
</span><a href="#local-6989586621680774153"><span class="hs-identifier hs-var hs-var">cpi</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="Agda.Syntax.Internal.html#noConPatternInfo"><span class="hs-identifier hs-var">noConPatternInfo</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">conPInfo :: PatternInfo
</span><a href="Agda.Syntax.Internal.html#conPInfo"><span class="hs-identifier hs-var">conPInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatOrigin -&gt; [Name] -&gt; PatternInfo
</span><a href="Agda.Syntax.Internal.html#PatternInfo"><span class="hs-identifier hs-var">PatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">PatOrigin
</span><a href="Agda.Syntax.Internal.html#PatOSplit"><span class="hs-identifier hs-var">PatOSplit</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">conPRecord :: Bool
</span><a href="Agda.Syntax.Internal.html#conPRecord"><span class="hs-identifier hs-var">conPRecord</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1189"></span><span>          </span><span id="local-6989586621680774147"><span class="annot"><span class="annottext">conp :: SplitPattern
</span><a href="#local-6989586621680774147"><span class="hs-identifier hs-var hs-var">conp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead
-&gt; ConPatternInfo -&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall x.
ConHead -&gt; ConPatternInfo -&gt; [NamedArg (Pattern' x)] -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-var">ConP</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621680774217"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="#local-6989586621680774153"><span class="hs-identifier hs-var">cpi</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680774156"><span class="hs-identifier hs-var">rho0'</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1190"></span><span>                   </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensArgInfo a =&gt; (ArgInfo -&gt; ArgInfo) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapArgInfo"><span class="hs-identifier hs-var">mapArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo
</span><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-var">hiddenInserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall a. DeBruijn a =&gt; Telescope -&gt; [NamedArg a])
-&gt; Telescope -&gt; [(Term, (Term, Term))] -&gt; [NamedArg SplitPattern]
forall a.
DeBruijn a =&gt;
(forall a. DeBruijn a =&gt; Telescope -&gt; [NamedArg a])
-&gt; Telescope -&gt; [(Term, (Term, Term))] -&gt; [NamedArg (Pattern' a)]
</span><a href="Agda.TypeChecking.Telescope.html#telePatterns%27"><span class="hs-identifier hs-var">telePatterns'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; [NamedArg a1]
forall a. DeBruijn a =&gt; Telescope -&gt; Telescope -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#tele2NamedArgs"><span class="hs-identifier hs-var">tele2NamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774214"><span class="hs-identifier hs-var">gamma0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774196"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680774212"><span class="hs-identifier hs-var">boundary</span></a></span><span>
</span><span id="line-1191"></span><span>          </span><span class="hs-comment">-- Andreas, 2016-09-08, issue #2166: use gamma0 for correct argument names</span><span>
</span><span id="line-1192"></span><span>
</span><span id="line-1193"></span><span>      </span><span class="hs-comment">-- Compute final context and substitution</span><span>
</span><span id="line-1194"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774144"><span class="annot"><span class="annottext">rho3 :: Substitution' SplitPattern
</span><a href="#local-6989586621680774144"><span class="hs-identifier hs-var hs-var">rho3</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621680774147"><span class="hs-identifier hs-var">conp</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774155"><span class="hs-identifier hs-var">rho1</span></a></span><span>            </span><span class="hs-comment">-- &#916;&#8321;' &#8866; &#961;&#8323; : &#916;&#8321;(x:D)</span><span>
</span><span id="line-1195"></span><span>          </span><span id="local-6989586621680774143"><span class="annot"><span class="annottext">delta2' :: Telescope
</span><a href="#local-6989586621680774143"><span class="hs-identifier hs-var hs-var">delta2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Telescope -&gt; Telescope
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774144"><span class="hs-identifier hs-var">rho3</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774229"><span class="hs-identifier hs-var">delta2</span></a></span><span>  </span><span class="hs-comment">-- &#916;&#8322;' = &#916;&#8322;&#961;&#8323;</span><span>
</span><span id="line-1196"></span><span>          </span><span id="local-6989586621680774142"><span class="annot"><span class="annottext">delta' :: Telescope
</span><a href="#local-6989586621680774142"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774159"><span class="hs-identifier hs-var">delta1'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774143"><span class="hs-identifier hs-var">delta2'</span></a></span><span> </span><span class="hs-comment">-- &#916;'  = &#916;&#8321;'&#916;&#8322;'</span><span>
</span><span id="line-1197"></span><span>          </span><span id="local-6989586621680774141"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621680774141"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774229"><span class="hs-identifier hs-var">delta2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774144"><span class="hs-identifier hs-var">rho3</span></a></span><span>   </span><span class="hs-comment">-- &#916;' &#8866; &#961; : &#916;&#8321;(x:D)&#916;&#8322;</span><span>
</span><span id="line-1198"></span><span>
</span><span id="line-1199"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Telescope -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, PrettyTCM a) =&gt;
VerboseKey -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774140"><span class="hs-identifier hs-var">debugTel</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;delta'&quot;</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774142"><span class="hs-identifier hs-var">delta'</span></a></span><span>
</span><span id="line-1200"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey
-&gt; Substitution' SplitPattern -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, PrettyTCM a) =&gt;
VerboseKey -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774157"><span class="hs-identifier hs-var">debugSubst</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;rho&quot;</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774141"><span class="hs-identifier hs-var">rho</span></a></span><span>
</span><span id="line-1201"></span><span>      </span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern] -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) b.
(MonadTCM tcm, AddContext b) =&gt;
b -&gt; [NamedArg SplitPattern] -&gt; tcm ()
</span><a href="#local-6989586621680774139"><span class="hs-identifier hs-var">debugPs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774224"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774223"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span>      </span><span class="hs-comment">-- Apply the substitution</span><span>
</span><span id="line-1204"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774138"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680774138"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680774141"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774223"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1205"></span><span>      </span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern] -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) b.
(MonadTCM tcm, AddContext b) =&gt;
b -&gt; [NamedArg SplitPattern] -&gt; tcm ()
</span><a href="#local-6989586621680774137"><span class="hs-identifier hs-var">debugPlugged</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774142"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774138"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-1206"></span><span>
</span><span id="line-1207"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774136"><span class="annot"><span class="annottext">cps' :: Map CheckpointId Substitution
</span><a href="#local-6989586621680774136"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774141"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774222"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1208"></span><span>
</span><span id="line-1209"></span><span>      </span><span class="annot"><span class="annottext">Maybe SplitClause -&gt; CoverM (Maybe SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe SplitClause -&gt; CoverM (Maybe SplitClause))
-&gt; Maybe SplitClause -&gt; CoverM (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Maybe SplitClause
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Maybe SplitClause)
-&gt; SplitClause -&gt; Maybe SplitClause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774142"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774138"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774141"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774136"><span class="hs-identifier hs-var">cps'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- target fixed later</span><span>
</span><span id="line-1210"></span><span>
</span><span id="line-1211"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1212"></span><span>    </span><span id="local-6989586621680774192"><span class="annot"><span class="annottext">debugInit :: a
-&gt; a
-&gt; a
-&gt; [a]
-&gt; [a]
-&gt; [a]
-&gt; a
-&gt; a
-&gt; a
-&gt; a
-&gt; [NamedArg SplitPattern]
-&gt; a
-&gt; tcm ()
</span><a href="#local-6989586621680774192"><span class="hs-identifier hs-var hs-var">debugInit</span></a></span></span><span> </span><span id="local-6989586621680774135"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774135"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621680774134"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774134"><span class="hs-identifier hs-var">ctype</span></a></span></span><span> </span><span id="local-6989586621680774133"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774133"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680774132"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774132"><span class="hs-identifier hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621680774131"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774131"><span class="hs-identifier hs-var">ixs</span></a></span></span><span> </span><span id="local-6989586621680774130"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774130"><span class="hs-identifier hs-var">cixs</span></a></span></span><span> </span><span id="local-6989586621680774129"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774129"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621680774128"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774128"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621680774127"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774127"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621680774126"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774126"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774125"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774125"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680774124"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774124"><span class="hs-identifier hs-var">hix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1213"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1214"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;computeNeighbourhood&quot;</span></span><span>
</span><span id="line-1215"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1216"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;context=&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc)
-&gt; (Telescope -&gt; TCM Doc) -&gt; Telescope -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; TCM Doc) -&gt; TCM Telescope -&gt; TCM Doc
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCM Telescope
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;con    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774135"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1218"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ctype  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774134"><span class="hs-identifier hs-var">ctype</span></a></span><span>
</span><span id="line-1219"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774126"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; TCM Doc)
-&gt; [NamedArg DeBruijnPattern] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774125"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1220"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;d      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774133"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1221"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;pars   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Semigroup (m Doc), Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TCM Doc) -&gt; [a] -&gt; [TCM Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774132"><span class="hs-identifier hs-var">pars</span></a></span><span>
</span><span id="line-1222"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ixs    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774129"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Semigroup (m Doc), Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TCM Doc) -&gt; [a] -&gt; [TCM Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774131"><span class="hs-identifier hs-var">ixs</span></a></span><span>
</span><span id="line-1223"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cixs   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774127"><span class="hs-identifier hs-var">gamma</span></a></span><span>  </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Semigroup (m Doc), Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TCM Doc) -&gt; [a] -&gt; [TCM Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774130"><span class="hs-identifier hs-var">cixs</span></a></span><span>
</span><span id="line-1224"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;delta1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774129"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-1225"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;delta2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774129"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774127"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774128"><span class="hs-identifier hs-var">delta2</span></a></span><span>
</span><span id="line-1226"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;gamma  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774129"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774127"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-1227"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;tel  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774126"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1228"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;hix    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774124"><span class="hs-identifier hs-var">hix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1229"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1230"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1231"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">70</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1232"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;computeNeighbourhood&quot;</span></span><span>
</span><span id="line-1233"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1234"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;context=&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc)
-&gt; (Telescope -&gt; TCM Doc) -&gt; Telescope -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc)
-&gt; (Telescope -&gt; VerboseKey) -&gt; Telescope -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; TCM Doc) -&gt; TCM Telescope -&gt; TCM Doc
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCM Telescope
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1235"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;con    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774135"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1236"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ctype  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774134"><span class="hs-identifier hs-var">ctype</span></a></span><span>
</span><span id="line-1237"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc)
-&gt; ([NamedArg SplitPattern] -&gt; VerboseKey)
-&gt; [NamedArg SplitPattern]
-&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774125"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1238"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;d      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774133"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1239"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;pars   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; ([a] -&gt; VerboseKey) -&gt; [a] -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774132"><span class="hs-identifier hs-var">pars</span></a></span><span>
</span><span id="line-1240"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ixs    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; ([a] -&gt; VerboseKey) -&gt; [a] -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774131"><span class="hs-identifier hs-var">ixs</span></a></span><span>
</span><span id="line-1241"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cixs   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; ([a] -&gt; VerboseKey) -&gt; [a] -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680774130"><span class="hs-identifier hs-var">cixs</span></a></span><span>
</span><span id="line-1242"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;delta1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774129"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-1243"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;delta2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774128"><span class="hs-identifier hs-var">delta2</span></a></span><span>
</span><span id="line-1244"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;gamma  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774127"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-1245"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;hix    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774124"><span class="hs-identifier hs-var">hix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1246"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1247"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span>    </span><span id="local-6989586621680774165"><span class="annot"><span class="annottext">debugNoUnify :: ExceptT SplitError TCM ()
</span><a href="#local-6989586621680774165"><span class="hs-identifier hs-var hs-var">debugNoUnify</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1250"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError TCM ())
-&gt; TCMT IO () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;  Constructor impossible!&quot;</span></span><span>
</span><span id="line-1251"></span><span>
</span><span id="line-1252"></span><span>    </span><span id="local-6989586621680774168"><span class="annot"><span class="annottext">debugCantSplit :: ExceptT SplitError TCM ()
</span><a href="#local-6989586621680774168"><span class="hs-identifier hs-var hs-var">debugCantSplit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1253"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError TCM ())
-&gt; TCMT IO () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;  Bad split!&quot;</span></span><span>
</span><span id="line-1254"></span><span>
</span><span id="line-1255"></span><span>    </span><span id="local-6989586621680774157"><span class="annot"><span class="annottext">debugSubst :: VerboseKey -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774157"><span class="hs-identifier hs-var hs-var">debugSubst</span></a></span></span><span> </span><span id="local-6989586621680774122"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774122"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680774121"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774121"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1256"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1257"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774122"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot; =&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774121"><span class="hs-identifier hs-var">sub</span></a></span><span>
</span><span id="line-1258"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span>    </span><span id="local-6989586621680774140"><span class="annot"><span class="annottext">debugTel :: VerboseKey -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774140"><span class="hs-identifier hs-var hs-var">debugTel</span></a></span></span><span> </span><span id="local-6989586621680774120"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774120"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680774119"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774119"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1261"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1262"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774120"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot; =&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680774119"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1263"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1264"></span><span>
</span><span id="line-1265"></span><span>    </span><span id="local-6989586621680774139"><span class="annot"><span class="annottext">debugPs :: b -&gt; [NamedArg SplitPattern] -&gt; tcm ()
</span><a href="#local-6989586621680774139"><span class="hs-identifier hs-var hs-var">debugPs</span></a></span></span><span> </span><span id="local-6989586621680774118"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680774118"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774117"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774117"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1266"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1267"></span><span>        </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680774118"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1268"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774117"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1270"></span><span>
</span><span id="line-1271"></span><span>    </span><span id="local-6989586621680774137"><span class="annot"><span class="annottext">debugPlugged :: b -&gt; [NamedArg SplitPattern] -&gt; tcm ()
</span><a href="#local-6989586621680774137"><span class="hs-identifier hs-var hs-var">debugPlugged</span></a></span></span><span> </span><span id="local-6989586621680774116"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680774116"><span class="hs-identifier hs-var">delta'</span></a></span></span><span> </span><span id="local-6989586621680774115"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774115"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1272"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1273"></span><span>        </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680774116"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1274"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps'    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; TCM Doc)
-&gt; [NamedArg DeBruijnPattern] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774115"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-1275"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1276"></span><span>
</span><span id="line-1277"></span><span class="hs-comment">-- | Introduce trailing pattern variables?</span><span>
</span><span id="line-1278"></span><span class="hs-keyword">data</span><span> </span><span id="InsertTrailing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#InsertTrailing"><span class="hs-identifier hs-var">InsertTrailing</span></a></span></span><span>
</span><span id="line-1279"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DoInsertTrailing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span></span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DontInsertTrailing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#DontInsertTrailing"><span class="hs-identifier hs-var">DontInsertTrailing</span></a></span></span><span>
</span><span id="line-1281"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774109"><span id="local-6989586621680774111"><span class="annot"><span class="annottext">InsertTrailing -&gt; InsertTrailing -&gt; Bool
(InsertTrailing -&gt; InsertTrailing -&gt; Bool)
-&gt; (InsertTrailing -&gt; InsertTrailing -&gt; Bool) -&gt; Eq InsertTrailing
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
$c/= :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
== :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
$c== :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774102"><span id="local-6989586621680774104"><span id="local-6989586621680774106"><span class="annot"><span class="annottext">Nat -&gt; InsertTrailing -&gt; VerboseKey -&gt; VerboseKey
[InsertTrailing] -&gt; VerboseKey -&gt; VerboseKey
InsertTrailing -&gt; VerboseKey
(Nat -&gt; InsertTrailing -&gt; VerboseKey -&gt; VerboseKey)
-&gt; (InsertTrailing -&gt; VerboseKey)
-&gt; ([InsertTrailing] -&gt; VerboseKey -&gt; VerboseKey)
-&gt; Show InsertTrailing
forall a.
(Nat -&gt; a -&gt; VerboseKey -&gt; VerboseKey)
-&gt; (a -&gt; VerboseKey) -&gt; ([a] -&gt; VerboseKey -&gt; VerboseKey) -&gt; Show a
showList :: [InsertTrailing] -&gt; VerboseKey -&gt; VerboseKey
$cshowList :: [InsertTrailing] -&gt; VerboseKey -&gt; VerboseKey
show :: InsertTrailing -&gt; VerboseKey
$cshow :: InsertTrailing -&gt; VerboseKey
showsPrec :: Nat -&gt; InsertTrailing -&gt; VerboseKey -&gt; VerboseKey
$cshowsPrec :: Nat -&gt; InsertTrailing -&gt; VerboseKey -&gt; VerboseKey
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span class="hs-comment">-- | Allow partial covering for split?</span><span>
</span><span id="line-1284"></span><span class="hs-keyword">data</span><span> </span><span id="AllowPartialCover"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-var">AllowPartialCover</span></a></span></span><span>
</span><span id="line-1285"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="YesAllowPartialCover"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#YesAllowPartialCover"><span class="hs-identifier hs-var">YesAllowPartialCover</span></a></span></span><span>  </span><span class="hs-comment">-- To try to coverage-check incomplete splits.</span><span>
</span><span id="line-1286"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoAllowPartialCover"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span></span><span>   </span><span class="hs-comment">-- Default.</span><span>
</span><span id="line-1287"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774097"><span id="local-6989586621680774099"><span class="annot"><span class="annottext">AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
(AllowPartialCover -&gt; AllowPartialCover -&gt; Bool)
-&gt; (AllowPartialCover -&gt; AllowPartialCover -&gt; Bool)
-&gt; Eq AllowPartialCover
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
$c/= :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
== :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
$c== :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774091"><span id="local-6989586621680774093"><span id="local-6989586621680774095"><span class="annot"><span class="annottext">Nat -&gt; AllowPartialCover -&gt; VerboseKey -&gt; VerboseKey
[AllowPartialCover] -&gt; VerboseKey -&gt; VerboseKey
AllowPartialCover -&gt; VerboseKey
(Nat -&gt; AllowPartialCover -&gt; VerboseKey -&gt; VerboseKey)
-&gt; (AllowPartialCover -&gt; VerboseKey)
-&gt; ([AllowPartialCover] -&gt; VerboseKey -&gt; VerboseKey)
-&gt; Show AllowPartialCover
forall a.
(Nat -&gt; a -&gt; VerboseKey -&gt; VerboseKey)
-&gt; (a -&gt; VerboseKey) -&gt; ([a] -&gt; VerboseKey -&gt; VerboseKey) -&gt; Show a
showList :: [AllowPartialCover] -&gt; VerboseKey -&gt; VerboseKey
$cshowList :: [AllowPartialCover] -&gt; VerboseKey -&gt; VerboseKey
show :: AllowPartialCover -&gt; VerboseKey
$cshow :: AllowPartialCover -&gt; VerboseKey
showsPrec :: Nat -&gt; AllowPartialCover -&gt; VerboseKey -&gt; VerboseKey
$cshowsPrec :: Nat -&gt; AllowPartialCover -&gt; VerboseKey -&gt; VerboseKey
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1288"></span><span>
</span><span id="line-1289"></span><span class="hs-comment">-- | Entry point from @Interaction.MakeCase@.</span><span>
</span><span id="line-1290"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitClauseWithAbsurd"><span class="hs-identifier hs-type">splitClauseWithAbsurd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1291"></span><span id="splitClauseWithAbsurd"><span class="annot"><span class="annottext">splitClauseWithAbsurd :: SplitClause
-&gt; Nat -&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#splitClauseWithAbsurd"><span class="hs-identifier hs-var hs-var">splitClauseWithAbsurd</span></a></span></span><span> </span><span id="local-6989586621680774090"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774090"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680774089"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774089"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1292"></span><span>  </span><span class="annot"><span class="annottext">CheckEmpty
-&gt; Induction
-&gt; AllowPartialCover
-&gt; InsertTrailing
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-var">split'</span></a></span><span> </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#Inductive"><span class="hs-identifier hs-var">Inductive</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DontInsertTrailing"><span class="hs-identifier hs-var">DontInsertTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774090"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; [ConHead] -&gt; [Literal] -&gt; Bool -&gt; Bool -&gt; BlockingVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-var">BlockingVar</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774089"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1293"></span><span>  </span><span class="hs-comment">-- Andreas, 2016-05-03, issue 1950:</span><span>
</span><span id="line-1294"></span><span>  </span><span class="hs-comment">-- Do not introduce trailing pattern vars after split,</span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-comment">-- because this does not work for with-clauses.</span><span>
</span><span id="line-1296"></span><span>
</span><span id="line-1297"></span><span class="hs-comment">-- | Entry point from @TypeChecking.Empty@ and @Interaction.BasicOps@.</span><span>
</span><span id="line-1298"></span><span class="hs-comment">--   @splitLast CoInductive@ is used in the @refine@ tactics.</span><span>
</span><span id="line-1299"></span><span>
</span><span id="line-1300"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitLast"><span class="hs-identifier hs-type">splitLast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DeBruijnPattern"><span class="hs-identifier hs-type">DeBruijnPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1301"></span><span id="splitLast"><span class="annot"><span class="annottext">splitLast :: Induction
-&gt; Telescope
-&gt; [NamedArg DeBruijnPattern]
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitLast"><span class="hs-identifier hs-var hs-var">splitLast</span></a></span></span><span> </span><span id="local-6989586621680774085"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774085"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621680774084"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774084"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774083"><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774083"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Induction
-&gt; AllowPartialCover
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774085"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774082"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; [ConHead] -&gt; [Literal] -&gt; Bool -&gt; Bool -&gt; BlockingVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-var">BlockingVar</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1302"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680774082"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680774082"><span class="hs-identifier hs-var hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774084"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#toSplitPatterns"><span class="hs-identifier hs-var">toSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680774083"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall t. Maybe (Dom (Type'' t Term))
</span><a href="#local-6989586621680774081"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1303"></span><span>        </span><span class="hs-comment">-- TODO 2ltt: allows (Empty_fib -&gt; Empty_strict) which is not conservative</span><span>
</span><span id="line-1304"></span><span>        </span><span id="local-6989586621680774081"><span class="annot"><span class="annottext">target :: Maybe (Dom (Type'' t Term))
</span><a href="#local-6989586621680774081"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom (Type'' t Term) -&gt; Maybe (Dom (Type'' t Term))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom (Type'' t Term) -&gt; Maybe (Dom (Type'' t Term)))
-&gt; Dom (Type'' t Term) -&gt; Maybe (Dom (Type'' t Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type'' t Term -&gt; Dom (Type'' t Term)
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Type'' t Term -&gt; Dom (Type'' t Term))
-&gt; Type'' t Term -&gt; Dom (Type'' t Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' t -&gt; Term -&gt; Type'' t Term
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Level' t -&gt; Sort' t
forall t. Level' t -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#Prop"><span class="hs-identifier hs-var">Prop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; [PlusLevel' t] -&gt; Level' t
forall t. Integer -&gt; [PlusLevel' t] -&gt; Level' t
</span><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-var">Max</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type'' t Term) -&gt; Term -&gt; Type'' t Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-var">Dummy</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;splitLastTarget&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1305"></span><span>
</span><span id="line-1306"></span><span class="hs-comment">-- | @split ind splitClause x = return res@</span><span>
</span><span id="line-1307"></span><span class="hs-comment">--   splits @splitClause@ at pattern var @x@ (de Bruijn index).</span><span>
</span><span id="line-1308"></span><span class="hs-comment">--</span><span>
</span><span id="line-1309"></span><span class="hs-comment">--   Possible results @res@ are:</span><span>
</span><span id="line-1310"></span><span class="hs-comment">--</span><span>
</span><span id="line-1311"></span><span class="hs-comment">--   1. @Left err@:</span><span>
</span><span id="line-1312"></span><span class="hs-comment">--      Splitting failed.</span><span>
</span><span id="line-1313"></span><span class="hs-comment">--</span><span>
</span><span id="line-1314"></span><span class="hs-comment">--   2. @Right covering@:</span><span>
</span><span id="line-1315"></span><span class="hs-comment">--      A covering set of split clauses, one for each valid constructor.</span><span>
</span><span id="line-1316"></span><span class="hs-comment">--      This could be the empty set (denoting an absurd clause).</span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-type">split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span>
</span><span id="line-1319"></span><span>         </span><span class="hs-comment">-- ^ Coinductive constructors are allowed if this argument is</span><span>
</span><span id="line-1320"></span><span>         </span><span class="hs-comment">-- 'CoInductive'.</span><span>
</span><span id="line-1321"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-type">AllowPartialCover</span></a></span><span>
</span><span id="line-1322"></span><span>         </span><span class="hs-comment">-- ^ Don't fail if computed 'Covering' does not cover all constructors.</span><span>
</span><span id="line-1323"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-1324"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span>
</span><span id="line-1325"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1326"></span><span id="split"><span class="annot"><span class="annottext">split :: Induction
-&gt; AllowPartialCover
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-var hs-var">split</span></a></span></span><span> </span><span id="local-6989586621680774077"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774077"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621680774076"><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621680774076"><span class="hs-identifier hs-var">allowPartialCover</span></a></span></span><span> </span><span id="local-6989586621680774075"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774075"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span id="local-6989586621680774074"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774074"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1327"></span><span>  </span><span class="annot"><span class="annottext">(Either SplitClause Covering -&gt; Covering)
-&gt; Either SplitError (Either SplitClause Covering)
-&gt; Either SplitError Covering
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Either SplitClause Covering -&gt; Covering
</span><a href="#local-6989586621680774073"><span class="hs-identifier hs-var">blendInAbsurdClause</span></a></span><span> </span><span class="annot"><span class="annottext">(Either SplitError (Either SplitClause Covering)
 -&gt; Either SplitError Covering)
-&gt; TCM (Either SplitError (Either SplitClause Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">CheckEmpty
-&gt; Induction
-&gt; AllowPartialCover
-&gt; InsertTrailing
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-var">split'</span></a></span><span> </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#NoCheckEmpty"><span class="hs-identifier hs-var">NoCheckEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774077"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621680774076"><span class="hs-identifier hs-var">allowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774075"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774074"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1328"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1329"></span><span>    </span><span id="local-6989586621680774071"><span class="annot"><span class="annottext">n :: Arg Nat
</span><a href="#local-6989586621680774071"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Nat -&gt; Arg Nat
</span><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-var">lookupPatternVar</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774075"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; Arg Nat) -&gt; Nat -&gt; Arg Nat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockingVar -&gt; Nat
</span><a href="Agda.TypeChecking.Coverage.Match.html#blockingVarNo"><span class="hs-identifier hs-var hs-var">blockingVarNo</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621680774074"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1330"></span><span>    </span><span class="annot"><a href="#local-6989586621680774073"><span class="hs-identifier hs-type">blendInAbsurdClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span>
</span><span id="line-1331"></span><span>    </span><span id="local-6989586621680774073"><span class="annot"><span class="annottext">blendInAbsurdClause :: Either SplitClause Covering -&gt; Covering
</span><a href="#local-6989586621680774073"><span class="hs-identifier hs-var hs-var">blendInAbsurdClause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Covering)
-&gt; Either SplitClause Covering -&gt; Covering
forall a b. (a -&gt; b) -&gt; Either a b -&gt; b
</span><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-var">fromRight</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Covering -&gt; SplitClause -&gt; Covering
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; SplitClause -&gt; Covering)
-&gt; Covering -&gt; SplitClause -&gt; Covering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Nat -&gt; [(SplitTag, SplitClause)] -&gt; Covering
</span><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680774071"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1332"></span><span>
</span><span id="line-1333"></span><span class="hs-comment">-- | Convert a de Bruijn index relative to the clause telescope to a de Bruijn</span><span>
</span><span id="line-1334"></span><span class="hs-comment">--   level. The result should be the argument position (counted from left,</span><span>
</span><span id="line-1335"></span><span class="hs-comment">--   starting with 0) to split at (dot patterns included!).</span><span>
</span><span id="line-1336"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-type">lookupPatternVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-1337"></span><span id="lookupPatternVar"><span class="annot"><span class="annottext">lookupPatternVar :: SplitClause -&gt; Nat -&gt; Arg Nat
</span><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-var hs-var">lookupPatternVar</span></a></span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774069"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774069"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680774068"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774068"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621680774067"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774067"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern
</span><a href="#local-6989586621680774066"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern -&gt; Nat -&gt; Arg Nat
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span>
</span><span id="line-1338"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774065"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Nat
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774065"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1339"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680774065"><span class="annot"><span class="annottext">n :: Nat
</span><a href="#local-6989586621680774065"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774064"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1340"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Nat
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-1341"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Maybe Nat -&gt; Nat
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Nat
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Nat -&gt; Nat) -&gt; Maybe Nat -&gt; Nat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Nat]
</span><a href="Agda.Utils.Permutation.html#permPicks"><span class="hs-identifier hs-var hs-var">permPicks</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621680774062"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">[Nat] -&gt; Nat -&gt; Maybe Nat
forall a. [a] -&gt; Nat -&gt; Maybe a
</span><a href="Agda.Utils.List.html#%21%21%21"><span class="hs-operator hs-var">!!!</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774064"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1342"></span><span>        </span><span id="local-6989586621680774062"><span class="annot"><span class="annottext">perm :: Permutation
</span><a href="#local-6989586621680774062"><span class="hs-identifier hs-var hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Maybe Permutation -&gt; Permutation
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Permutation
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Permutation -&gt; Permutation)
-&gt; Maybe Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Maybe Permutation
</span><a href="Agda.Syntax.Internal.Pattern.html#dbPatPerm"><span class="hs-identifier hs-var">dbPatPerm</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; Maybe Permutation)
-&gt; [NamedArg DeBruijnPattern] -&gt; Maybe Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774068"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1343"></span><span>        </span><span id="local-6989586621680774064"><span class="annot"><span class="annottext">k :: Nat
</span><a href="#local-6989586621680774064"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774069"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774067"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1344"></span><span>        </span><span id="local-6989586621680774066"><span class="annot"><span class="annottext">arg :: Arg DeBruijnPattern
</span><a href="#local-6989586621680774066"><span class="hs-identifier hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern
-&gt; [Arg DeBruijnPattern] -&gt; Nat -&gt; Arg DeBruijnPattern
forall a. a -&gt; [a] -&gt; Nat -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Telescope -&gt; [Arg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Substitute.html#telVars"><span class="hs-identifier hs-var">telVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774069"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774069"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774064"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1345"></span><span>
</span><span id="line-1346"></span><span>
</span><span id="line-1347"></span><span class="hs-keyword">data</span><span> </span><span id="CheckEmpty"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CheckEmpty"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NoCheckEmpty"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoCheckEmpty"><span class="hs-identifier hs-var">NoCheckEmpty</span></a></span></span><span>
</span><span id="line-1348"></span><span>
</span><span id="line-1349"></span><span class="hs-comment">-- | @split' ind pc ft splitClause x = return res@</span><span>
</span><span id="line-1350"></span><span class="hs-comment">--   splits @splitClause@ at pattern var @x@ (de Bruijn index).</span><span>
</span><span id="line-1351"></span><span class="hs-comment">--</span><span>
</span><span id="line-1352"></span><span class="hs-comment">--   Possible results @res@ are:</span><span>
</span><span id="line-1353"></span><span class="hs-comment">--</span><span>
</span><span id="line-1354"></span><span class="hs-comment">--   1. @Left err@:</span><span>
</span><span id="line-1355"></span><span class="hs-comment">--      Splitting failed.</span><span>
</span><span id="line-1356"></span><span class="hs-comment">--</span><span>
</span><span id="line-1357"></span><span class="hs-comment">--   2. @Right (Left splitClause')@:</span><span>
</span><span id="line-1358"></span><span class="hs-comment">--      Absurd clause (type of @x@ has 0 valid constructors).</span><span>
</span><span id="line-1359"></span><span class="hs-comment">--</span><span>
</span><span id="line-1360"></span><span class="hs-comment">--   3. @Right (Right covering)@:</span><span>
</span><span id="line-1361"></span><span class="hs-comment">--      A covering set of split clauses, one for each valid constructor.</span><span>
</span><span id="line-1362"></span><span>
</span><span id="line-1363"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-type">split'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-type">CheckEmpty</span></a></span><span>
</span><span id="line-1364"></span><span>          </span><span class="hs-comment">-- ^ Use isEmptyType to check whether the type of the variable to</span><span>
</span><span id="line-1365"></span><span>          </span><span class="hs-comment">-- split on is empty. This switch is necessary to break the cycle</span><span>
</span><span id="line-1366"></span><span>          </span><span class="hs-comment">-- between split' and isEmptyType.</span><span>
</span><span id="line-1367"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span>
</span><span id="line-1368"></span><span>          </span><span class="hs-comment">-- ^ Coinductive constructors are allowed if this argument is</span><span>
</span><span id="line-1369"></span><span>          </span><span class="hs-comment">-- 'CoInductive'.</span><span>
</span><span id="line-1370"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-type">AllowPartialCover</span></a></span><span>
</span><span id="line-1371"></span><span>          </span><span class="hs-comment">-- ^ Don't fail if computed 'Covering' does not cover all constructors.</span><span>
</span><span id="line-1372"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#InsertTrailing"><span class="hs-identifier hs-type">InsertTrailing</span></a></span><span>
</span><span id="line-1373"></span><span>          </span><span class="hs-comment">-- ^ If 'DoInsertTrailing', introduce new trailing variable patterns.</span><span>
</span><span id="line-1374"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-1375"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span>
</span><span id="line-1376"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1377"></span><span id="split%27"><span class="annot"><span class="annottext">split' :: CheckEmpty
-&gt; Induction
-&gt; AllowPartialCover
-&gt; InsertTrailing
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-var hs-var">split'</span></a></span></span><span> </span><span id="local-6989586621680774058"><span class="annot"><span class="annottext">CheckEmpty
</span><a href="#local-6989586621680774058"><span class="hs-identifier hs-var">checkEmpty</span></a></span></span><span> </span><span id="local-6989586621680774057"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774057"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621680774056"><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621680774056"><span class="hs-identifier hs-var">allowPartialCover</span></a></span></span><span> </span><span id="local-6989586621680774055"><span class="annot"><span class="annottext">InsertTrailing
</span><a href="#local-6989586621680774055"><span class="hs-identifier hs-var">inserttrailing</span></a></span></span><span>
</span><span id="line-1378"></span><span>       </span><span id="local-6989586621680774054"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680774054"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680774053"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680774052"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680774051"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774051"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621680774050"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774050"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span> </span><span id="local-6989586621680774049"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680774048"><span class="annot"><span class="annottext">[ConHead]
</span><a href="#local-6989586621680774048"><span class="hs-identifier hs-var">pcons'</span></a></span></span><span> </span><span id="local-6989586621680774047"><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621680774047"><span class="hs-identifier hs-var">plits</span></a></span></span><span> </span><span id="local-6989586621680774046"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774046"><span class="hs-identifier hs-var">overlap</span></a></span></span><span> </span><span id="local-6989586621680774045"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774045"><span class="hs-identifier hs-var">lazy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1379"></span><span> </span><span class="annot"><span class="annottext">TCM (Either SplitError (Either SplitClause Covering))
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Either SplitError (Either SplitClause Covering))
 -&gt; TCM (Either SplitError (Either SplitClause Covering)))
-&gt; TCM (Either SplitError (Either SplitClause Covering))
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM (Either SplitClause Covering)
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM (Either SplitClause Covering)
 -&gt; TCM (Either SplitError (Either SplitClause Covering)))
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1380"></span><span>  </span><span class="annot"><span class="annottext">Telescope
-&gt; Nat
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId Substitution
-&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a a a.
(MonadTCM tcm, AddContext a, PrettyTCM a, PrettyTCM a, PrettyTCM a,
 Show a, Show a, Show a) =&gt;
a -&gt; a -&gt; [NamedArg SplitPattern] -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774044"><span class="hs-identifier hs-var">debugInit</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774051"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1381"></span><span>
</span><span id="line-1382"></span><span>  </span><span class="hs-comment">-- Split the telescope at the variable</span><span>
</span><span id="line-1383"></span><span>  </span><span class="hs-comment">-- t = type of the variable,  &#916;&#8321; &#8866; t</span><span>
</span><span id="line-1384"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680774043"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774043"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774042"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774041"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774041"><span class="hs-identifier hs-var">delta1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774040"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774040"><span class="hs-identifier hs-var">delta2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1385"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680774039"><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621680774039"><span class="hs-identifier hs-var">tel1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774038"><span class="annot"><span class="annottext">Dom' Term (VerboseKey, Type)
</span><a href="#local-6989586621680774038"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680774037"><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621680774037"><span class="hs-identifier hs-var">tel2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; ListTel -&gt; (ListTel, ListTel)
forall a. Nat -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Nat
forall a. Sized a =&gt; a -&gt; Nat
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; (ListTel, ListTel)) -&gt; ListTel -&gt; (ListTel, ListTel)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (VerboseKey, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1386"></span><span>    </span><span class="annot"><span class="annottext">(VerboseKey, Dom Type, Telescope, Telescope)
-&gt; ExceptT
     SplitError TCM (VerboseKey, Dom Type, Telescope, Telescope)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VerboseKey, Type) -&gt; VerboseKey
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((VerboseKey, Type) -&gt; VerboseKey)
-&gt; (VerboseKey, Type) -&gt; VerboseKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom' Term (VerboseKey, Type) -&gt; (VerboseKey, Type)
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' Term (VerboseKey, Type)
</span><a href="#local-6989586621680774038"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(VerboseKey, Type) -&gt; Type
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((VerboseKey, Type) -&gt; Type)
-&gt; Dom' Term (VerboseKey, Type) -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Dom' Term (VerboseKey, Type)
</span><a href="#local-6989586621680774038"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621680774039"><span class="hs-identifier hs-var">tel1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621680774037"><span class="hs-identifier hs-var">tel2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1387"></span><span>
</span><span id="line-1388"></span><span>  </span><span class="hs-comment">-- Compute the neighbourhoods for the constructors</span><span>
</span><span id="line-1389"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774036"><span class="annot"><span class="annottext">computeNeighborhoods :: ExceptT
  SplitError TCM (DataOrRecord, Bool, [(SplitTag, SplitClause)])
</span><a href="#local-6989586621680774036"><span class="hs-identifier hs-var hs-var">computeNeighborhoods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1390"></span><span>        </span><span class="hs-comment">-- Check that t is a datatype or a record</span><span>
</span><span id="line-1391"></span><span>        </span><span class="hs-comment">-- Andreas, 2010-09-21, isDatatype now directly throws an exception if it fails</span><span>
</span><span id="line-1392"></span><span>        </span><span class="hs-comment">-- cons = constructors of this datatype</span><span>
</span><span id="line-1393"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680774035"><span class="annot"><span class="annottext">DataOrRecord
</span><a href="#local-6989586621680774035"><span class="hs-identifier hs-var">dr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774034"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774034"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774033"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774033"><span class="hs-identifier hs-var">pars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774032"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774032"><span class="hs-identifier hs-var">ixs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774031"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774031"><span class="hs-identifier hs-var">cons'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680774030"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774030"><span class="hs-identifier hs-var">isHIT</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT
  SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool)
-&gt; ExceptT
     SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool)
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621680774029"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool)
 -&gt; ExceptT
      SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool))
-&gt; ExceptT
     SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool)
-&gt; ExceptT
     SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Induction
-&gt; Dom Type
-&gt; ExceptT
     SplitError TCM (DataOrRecord, QName, Args, Args, [QName], Bool)
forall (tcm :: * -&gt; *).
(MonadTCM tcm, MonadError SplitError tcm) =&gt;
Induction
-&gt; Dom Type -&gt; tcm (DataOrRecord, QName, Args, Args, [QName], Bool)
</span><a href="Agda.TypeChecking.Coverage.html#isDatatype"><span class="hs-identifier hs-var">isDatatype</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621680774057"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1394"></span><span>        </span><span id="local-6989586621680774028"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774028"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="#local-6989586621680774058"><span class="hs-identifier hs-var">checkEmpty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1395"></span><span>          </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM Bool
-&gt; ExceptT SplitError TCM [QName]
-&gt; ExceptT SplitError TCM [QName]
-&gt; ExceptT SplitError TCM [QName]
forall (m :: * -&gt; *) a. Monad m =&gt; m Bool -&gt; m a -&gt; m a -&gt; m a
</span><a href="Agda.Utils.Monad.html#ifM"><span class="hs-identifier hs-var">ifM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; ExceptT SplitError TCM Bool
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; ExceptT SplitError TCM Bool)
-&gt; TCMT IO Bool -&gt; ExceptT SplitError TCM Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO Bool
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621680774029"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; TCMT IO Bool) -&gt; TCMT IO Bool -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Bool
</span><a href="Agda.TypeChecking.Empty.html#isEmptyType"><span class="hs-identifier hs-var">isEmptyType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Bool) -&gt; Type -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[QName] -&gt; ExceptT SplitError TCM [QName]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[QName] -&gt; ExceptT SplitError TCM [QName]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774031"><span class="hs-identifier hs-var">cons'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1396"></span><span>          </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#NoCheckEmpty"><span class="hs-identifier hs-var">NoCheckEmpty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; ExceptT SplitError TCM [QName]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774031"><span class="hs-identifier hs-var">cons'</span></a></span><span>
</span><span id="line-1397"></span><span>        </span><span id="local-6989586621680774026"><span class="annot"><span class="annottext">[Maybe (SplitTag, SplitClause)]
</span><a href="#local-6989586621680774026"><span class="hs-identifier hs-var">mns</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[QName]
-&gt; (QName -&gt; CoverM (Maybe (SplitTag, SplitClause)))
-&gt; ExceptT SplitError TCM [Maybe (SplitTag, SplitClause)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621680774028"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="annot"><span class="annottext">((QName -&gt; CoverM (Maybe (SplitTag, SplitClause)))
 -&gt; ExceptT SplitError TCM [Maybe (SplitTag, SplitClause)])
-&gt; (QName -&gt; CoverM (Maybe (SplitTag, SplitClause)))
-&gt; ExceptT SplitError TCM [Maybe (SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680774025"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774025"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; (SplitTag, SplitClause))
-&gt; Maybe SplitClause -&gt; Maybe (SplitTag, SplitClause)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774025"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe SplitClause -&gt; Maybe (SplitTag, SplitClause))
-&gt; CoverM (Maybe SplitClause)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1398"></span><span>          </span><span class="annot"><span class="annottext">Telescope
-&gt; VerboseKey
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Nat
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId Substitution
-&gt; QName
-&gt; CoverM (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#computeNeighbourhood"><span class="hs-identifier hs-var">computeNeighbourhood</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774041"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774043"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774040"><span class="hs-identifier hs-var">delta2</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774034"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774033"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774032"><span class="hs-identifier hs-var">ixs</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774051"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774025"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1399"></span><span>        </span><span id="local-6989586621680774024"><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
</span><a href="#local-6989586621680774024"><span class="hs-identifier hs-var">hcompsc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774030"><span class="hs-identifier hs-var">isHIT</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="#local-6989586621680774055"><span class="hs-identifier hs-var">inserttrailing</span></a></span><span> </span><span class="annot"><span class="annottext">InsertTrailing -&gt; InsertTrailing -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span><span>
</span><span id="line-1400"></span><span>                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; VerboseKey
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Nat
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId Substitution
-&gt; CoverM (Maybe (SplitTag, SplitClause))
</span><a href="Agda.TypeChecking.Coverage.html#computeHCompSplit"><span class="hs-identifier hs-var">computeHCompSplit</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774041"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680774043"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774040"><span class="hs-identifier hs-var">delta2</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680774034"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774033"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774032"><span class="hs-identifier hs-var">ixs</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774051"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1401"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1402"></span><span>        </span><span class="annot"><span class="annottext">(DataOrRecord, Bool, [(SplitTag, SplitClause)])
-&gt; ExceptT
     SplitError TCM (DataOrRecord, Bool, [(SplitTag, SplitClause)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="#local-6989586621680774035"><span class="hs-identifier hs-var">dr</span></a></span><span>
</span><span id="line-1403"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680774032"><span class="hs-identifier hs-var">ixs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Is &quot;d&quot; indexed?</span><span>
</span><span id="line-1404"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe (SplitTag, SplitClause)] -&gt; [(SplitTag, SplitClause)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Maybe (SplitTag, SplitClause)]
</span><a href="#local-6989586621680774026"><span class="hs-identifier hs-var">mns</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (SplitTag, SplitClause)]
-&gt; [Maybe (SplitTag, SplitClause)]
-&gt; [Maybe (SplitTag, SplitClause)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
</span><a href="#local-6989586621680774024"><span class="hs-identifier hs-var">hcompsc</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1406"></span><span>
</span><span id="line-1407"></span><span>      </span><span id="local-6989586621680774023"><span class="annot"><span class="annottext">computeLitNeighborhoods :: ExceptT
  SplitError TCM (DataOrRecord, Bool, [(SplitTag, SplitClause)])
</span><a href="#local-6989586621680774023"><span class="hs-identifier hs-var hs-var">computeLitNeighborhoods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1408"></span><span>        </span><span id="local-6989586621680774022"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774022"><span class="hs-identifier hs-var">typeOk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; ExceptT SplitError TCM Bool
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; ExceptT SplitError TCM Bool)
-&gt; TCMT IO Bool -&gt; ExceptT SplitError TCM Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1409"></span><span>          </span><span id="local-6989586621680774021"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774021"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; TCM Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
Literal -&gt; m Type
</span><a href="Agda.TypeChecking.Monad.Builtin.html#litType"><span class="hs-identifier hs-var">litType</span></a></span><span> </span><span class="annot"><span class="annottext">(Literal -&gt; TCM Type) -&gt; Literal -&gt; TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; [Literal] -&gt; Literal
forall a. a -&gt; [a] -&gt; a
</span><a href="Agda.Utils.List.html#headWithDefault"><span class="hs-identifier hs-var">headWithDefault</span></a></span><span> </span><span class="hs-comment">{-'-}</span><span> </span><span class="annot"><span class="annottext">Literal
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621680774047"><span class="hs-identifier hs-var">plits</span></a></span><span>
</span><span id="line-1410"></span><span>          </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO Bool
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; TCMT IO Bool) -&gt; TCMT IO Bool -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasOptions m, MonadDebug m) =&gt;
m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#dontAssignMetas"><span class="hs-identifier hs-var">dontAssignMetas</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; TCMT IO Bool) -&gt; TCMT IO Bool -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; TCMT IO Bool
forall (m :: * -&gt; *).
(MonadConstraint m, MonadWarning m, MonadError TCErr m,
 MonadFresh ProblemId m) =&gt;
m () -&gt; m Bool
</span><a href="Agda.TypeChecking.Conversion.html#tryConversion"><span class="hs-identifier hs-var">tryConversion</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO Bool) -&gt; TCMT IO () -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; TCMT IO ()
forall (m :: * -&gt; *). MonadConversion m =&gt; Type -&gt; Type -&gt; m ()
</span><a href="Agda.TypeChecking.Conversion.html#equalType"><span class="hs-identifier hs-var">equalType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680774021"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-1411"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774022"><span class="hs-identifier hs-var">typeOk</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; ExceptT SplitError TCM ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError -&gt; ExceptT SplitError TCM ())
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; ExceptT SplitError TCM ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM (Closure Type)
-&gt; ExceptT SplitError TCM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; ExceptT SplitError TCM (Closure Type)
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; ExceptT SplitError TCM (Closure Type))
-&gt; TCM (Closure Type) -&gt; ExceptT SplitError TCM (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1412"></span><span>        </span><span id="local-6989586621680774017"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774017"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Literal]
-&gt; (Literal -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621680774047"><span class="hs-identifier hs-var">plits</span></a></span><span> </span><span class="annot"><span class="annottext">((Literal -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
 -&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)])
-&gt; (Literal -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680774016"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680774016"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1413"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774015"><span class="annot"><span class="annottext">delta2' :: Telescope
</span><a href="#local-6989586621680774015"><span class="hs-identifier hs-var hs-var">delta2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; SubstArg Telescope -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Nat -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680774016"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774040"><span class="hs-identifier hs-var">delta2</span></a></span><span>
</span><span id="line-1414"></span><span>              </span><span id="local-6989586621680774012"><span class="annot"><span class="annottext">delta' :: Telescope
</span><a href="#local-6989586621680774012"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774041"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774015"><span class="hs-identifier hs-var">delta2'</span></a></span><span>
</span><span id="line-1415"></span><span>              </span><span id="local-6989586621680774011"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621680774011"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; SplitPattern
forall a. Literal -&gt; Pattern' a
</span><a href="Agda.Syntax.Internal.html#litP"><span class="hs-identifier hs-var">litP</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680774016"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-1416"></span><span>              </span><span id="local-6989586621680774009"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680774009"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680774011"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1417"></span><span>              </span><span id="local-6989586621680774008"><span class="annot"><span class="annottext">cps' :: Map CheckpointId Substitution
</span><a href="#local-6989586621680774008"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.Match.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774011"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774051"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1418"></span><span>          </span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
-&gt; ExceptT SplitError TCM (SplitTag, SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-var">SplitLit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680774016"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774012"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774009"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774011"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774008"><span class="hs-identifier hs-var">cps'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-1419"></span><span>        </span><span id="local-6989586621680774007"><span class="annot"><span class="annottext">(SplitTag, SplitClause)
</span><a href="#local-6989586621680774007"><span class="hs-identifier hs-var">ca</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1420"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680774006"><span class="annot"><span class="annottext">delta' :: Telescope
</span><a href="#local-6989586621680774006"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-comment">-- telescope is unchanged for catchall branch</span><span>
</span><span id="line-1421"></span><span>              </span><span id="local-6989586621680774005"><span class="annot"><span class="annottext">varp :: SplitPattern
</span><a href="#local-6989586621680774005"><span class="hs-identifier hs-var hs-var">varp</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; SplitPatVar -&gt; SplitPattern
forall x. PatternInfo -&gt; x -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-var">VarP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatOrigin -&gt; [Name] -&gt; PatternInfo
</span><a href="Agda.Syntax.Internal.html#PatternInfo"><span class="hs-identifier hs-var">PatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">PatOrigin
</span><a href="Agda.Syntax.Internal.html#PatOSplit"><span class="hs-identifier hs-var">PatOSplit</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitPatVar -&gt; SplitPattern) -&gt; SplitPatVar -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar :: VerboseKey -&gt; Nat -&gt; [Literal] -&gt; SplitPatVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#SplitPatVar"><span class="hs-identifier hs-type">SplitPatVar</span></a></span><span>
</span><span id="line-1422"></span><span>                         </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">splitPatVarName :: VerboseKey
</span><a href="Agda.TypeChecking.Coverage.Match.html#splitPatVarName"><span class="hs-identifier hs-var">splitPatVarName</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VerboseKey
forall a. Underscore a =&gt; a
</span><a href="Agda.Syntax.Common.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span>
</span><span id="line-1423"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">splitPatVarIndex :: Nat
</span><a href="Agda.TypeChecking.Coverage.Match.html#splitPatVarIndex"><span class="hs-identifier hs-var">splitPatVarIndex</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1424"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">splitExcludedLits :: [Literal]
</span><a href="Agda.TypeChecking.Coverage.Match.html#splitExcludedLits"><span class="hs-identifier hs-var">splitExcludedLits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621680774047"><span class="hs-identifier hs-var">plits</span></a></span><span>
</span><span id="line-1425"></span><span>                         </span><span class="hs-special">}</span><span>
</span><span id="line-1426"></span><span>              </span><span id="local-6989586621680774000"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621680774000"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621680774005"><span class="hs-identifier hs-var">varp</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1427"></span><span>              </span><span id="local-6989586621680773999"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680773999"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680774000"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1428"></span><span>          </span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
-&gt; ExceptT SplitError TCM (SplitTag, SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCatchall"><span class="hs-identifier hs-var">SplitCatchall</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774006"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773999"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680774000"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680774051"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-1429"></span><span>
</span><span id="line-1430"></span><span>        </span><span class="hs-comment">-- If Agda is changed so that the type of a literal can belong</span><span>
</span><span id="line-1431"></span><span>        </span><span class="hs-comment">-- to an inductive family (with at least one index), then the</span><span>
</span><span id="line-1432"></span><span>        </span><span class="hs-comment">-- following code should be changed (the constructor False</span><span>
</span><span id="line-1433"></span><span>        </span><span class="hs-comment">-- stands for &quot;not indexed&quot;).</span><span>
</span><span id="line-1434"></span><span>        </span><span class="annot"><span class="annottext">(DataOrRecord, Bool, [(SplitTag, SplitClause)])
-&gt; ExceptT
     SplitError TCM (DataOrRecord, Bool, [(SplitTag, SplitClause)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.TypeChecking.Rules.LHS.html#IsData"><span class="hs-identifier hs-var">IsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680774017"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; [(SplitTag, SplitClause)] -&gt; [(SplitTag, SplitClause)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
</span><a href="#local-6989586621680774007"><span class="hs-identifier hs-var">ca</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>
</span><span id="line-1436"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680773998"><span class="annot"><span class="annottext">DataOrRecord
</span><a href="#local-6989586621680773998"><span class="hs-identifier hs-var">dr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773997"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773997"><span class="hs-identifier hs-var">isIndexed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773996"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773996"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ConHead] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ConHead]
</span><a href="#local-6989586621680774048"><span class="hs-identifier hs-var">pcons'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Literal] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621680774047"><span class="hs-identifier hs-var">plits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1437"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ExceptT
  SplitError TCM (DataOrRecord, Bool, [(SplitTag, SplitClause)])
</span><a href="#local-6989586621680774023"><span class="hs-identifier hs-var">computeLitNeighborhoods</span></a></span><span>
</span><span id="line-1438"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ExceptT
  SplitError TCM (DataOrRecord, Bool, [(SplitTag, SplitClause)])
</span><a href="#local-6989586621680774036"><span class="hs-identifier hs-var">computeNeighborhoods</span></a></span><span>
</span><span id="line-1439"></span><span>
</span><span id="line-1440"></span><span>  </span><span id="local-6989586621680773995"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773995"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774050"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1441"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680773994"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773994"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; ((SplitTag, SplitClause)
    -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773996"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause)
  -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
 -&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)])
-&gt; ((SplitTag, SplitClause)
    -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680773993"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773993"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773992"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773992"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO (SplitTag, SplitClause)
-&gt; ExceptT SplitError TCM (SplitTag, SplitClause)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (SplitTag, SplitClause)
 -&gt; ExceptT SplitError TCM (SplitTag, SplitClause))
-&gt; TCMT IO (SplitTag, SplitClause)
-&gt; ExceptT SplitError TCM (SplitTag, SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773993"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; (SplitTag, SplitClause))
-&gt; TCMT IO SplitClause -&gt; TCMT IO (SplitTag, SplitClause)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SplitTag -&gt; SplitClause -&gt; Dom Type -&gt; TCMT IO SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#fixTargetType"><span class="hs-identifier hs-var">fixTargetType</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773993"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773992"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773994"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1442"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773996"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1443"></span><span>
</span><span id="line-1444"></span><span>  </span><span id="local-6989586621680773991"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773991"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="#local-6989586621680774055"><span class="hs-identifier hs-var">inserttrailing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1445"></span><span>    </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DontInsertTrailing"><span class="hs-identifier hs-var">DontInsertTrailing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773995"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1446"></span><span>    </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO [(SplitTag, SplitClause)]
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [(SplitTag, SplitClause)]
 -&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)])
-&gt; TCMT IO [(SplitTag, SplitClause)]
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; ((SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, SplitClause))
-&gt; TCMT IO [(SplitTag, SplitClause)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773995"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, SplitClause))
 -&gt; TCMT IO [(SplitTag, SplitClause)])
-&gt; ((SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, SplitClause))
-&gt; TCMT IO [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680773990"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773990"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680773989"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773989"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1447"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773990"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; (SplitTag, SplitClause))
-&gt; ((Telescope, SplitClause) -&gt; SplitClause)
-&gt; (Telescope, SplitClause)
-&gt; (SplitTag, SplitClause)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; (SplitTag, SplitClause))
-&gt; TCM (Telescope, SplitClause) -&gt; TCMT IO (SplitTag, SplitClause)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773989"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span>  </span><span id="local-6989586621680773988"><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680773988"><span class="hs-identifier hs-var">mHCompName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; ExceptT SplitError TCM (Maybe QName)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
VerboseKey -&gt; m (Maybe QName)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getPrimitiveName%27"><span class="hs-identifier hs-var">getPrimitiveName'</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-var">builtinHComp</span></a></span><span>
</span><span id="line-1450"></span><span>  </span><span id="local-6989586621680773987"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773987"><span class="hs-identifier hs-var">withoutK</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WithDefault 'False -&gt; Bool
forall (b :: Bool). KnownBool b =&gt; WithDefault b -&gt; Bool
</span><a href="Agda.Utils.WithDefault.html#collapseDefault"><span class="hs-identifier hs-var">collapseDefault</span></a></span><span> </span><span class="annot"><span class="annottext">(WithDefault 'False -&gt; Bool)
-&gt; (PragmaOptions -&gt; WithDefault 'False) -&gt; PragmaOptions -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PragmaOptions -&gt; WithDefault 'False
</span><a href="Agda.Interaction.Options.Base.html#optWithoutK"><span class="hs-identifier hs-var hs-var">optWithoutK</span></a></span><span> </span><span class="annot"><span class="annottext">(PragmaOptions -&gt; Bool)
-&gt; ExceptT SplitError TCM PragmaOptions
-&gt; ExceptT SplitError TCM Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError TCM PragmaOptions
forall (m :: * -&gt; *). HasOptions m =&gt; m PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-var">pragmaOptions</span></a></span><span>
</span><span id="line-1451"></span><span>
</span><span id="line-1452"></span><span>  </span><span id="local-6989586621680773984"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773984"><span class="hs-identifier hs-var">erased</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TCEnv -&gt; Bool) -&gt; ExceptT SplitError TCM Bool
forall (m :: * -&gt; *) a. MonadTCEnv m =&gt; (TCEnv -&gt; a) -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#asksTC"><span class="hs-identifier hs-var">asksTC</span></a></span><span> </span><span class="annot"><span class="annottext">TCEnv -&gt; Bool
forall a. LensQuantity a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#hasQuantity0"><span class="hs-identifier hs-var">hasQuantity0</span></a></span><span>
</span><span id="line-1453"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; ExceptT SplitError TCM ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; VerboseKey -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; ExceptT SplitError TCM ())
-&gt; VerboseKey -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;We are in erased context = &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773984"><span class="hs-identifier hs-var">erased</span></a></span><span>
</span><span id="line-1454"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773981"><span class="annot"><span class="annottext">erasedError :: Bool -&gt; ExceptT SplitError TCM (Either SplitClause Covering)
</span><a href="#local-6989586621680773981"><span class="hs-identifier hs-var hs-var">erasedError</span></a></span></span><span> </span><span id="local-6989586621680773980"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773980"><span class="hs-identifier hs-var">causedByWithoutK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1455"></span><span>        </span><span class="annot"><span class="annottext">SplitError -&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError
 -&gt; ExceptT SplitError TCM (Either SplitClause Covering))
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#ErasedDatatype"><span class="hs-identifier hs-var">ErasedDatatype</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773980"><span class="hs-identifier hs-var">causedByWithoutK</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Type
 -&gt; ExceptT SplitError TCM (Either SplitClause Covering))
-&gt; ExceptT SplitError TCM (Closure Type)
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-1456"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; ExceptT SplitError TCM (Closure Type)
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; ExceptT SplitError TCM (Closure Type))
-&gt; TCM (Closure Type) -&gt; ExceptT SplitError TCM (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; TCM (Closure Type)
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621680774029"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; TCM (Closure Type))
-&gt; TCM (Closure Type) -&gt; TCM (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>  </span><span id="local-6989586621680773978"><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773978"><span class="hs-identifier hs-var">runtime_splits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM Bool)
 -&gt; [(SplitTag, SplitClause)]
 -&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)])
-&gt; [(SplitTag, SplitClause)]
-&gt; ((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM Bool)
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM Bool)
-&gt; [(SplitTag, SplitClause)]
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">filterM</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773991"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM Bool)
 -&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)])
-&gt; ((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM Bool)
-&gt; ExceptT SplitError TCM [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680773977"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773977"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SplitClause
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1458"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773977"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1459"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-type">SplitLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1460"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCatchall"><span class="hs-identifier hs-type">SplitCatchall</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- conservative</span><span>
</span><span id="line-1461"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-type">SplitCon</span></a></span><span> </span><span id="local-6989586621680773976"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773976"><span class="hs-identifier hs-var">q</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Quantity -&gt; Bool
forall a. LensQuantity a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#usableQuantity"><span class="hs-identifier hs-var">usableQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">(Quantity -&gt; Bool)
-&gt; (Definition -&gt; Quantity) -&gt; Definition -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Quantity
forall a. LensQuantity a =&gt; a -&gt; Quantity
</span><a href="Agda.Syntax.Common.html#getQuantity"><span class="hs-identifier hs-var">getQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Bool)
-&gt; ExceptT SplitError TCM Definition -&gt; ExceptT SplitError TCM Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; ExceptT SplitError TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773976"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-1462"></span><span>
</span><span id="line-1463"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773991"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1464"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1465"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773974"><span class="annot"><span class="annottext">absurdp :: SplitPattern
</span><a href="#local-6989586621680773974"><span class="hs-identifier hs-var hs-var">absurdp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; SplitPatVar -&gt; SplitPattern
forall x. PatternInfo -&gt; x -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-var">VarP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatOrigin -&gt; [Name] -&gt; PatternInfo
</span><a href="Agda.Syntax.Internal.html#PatternInfo"><span class="hs-identifier hs-var">PatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">PatOrigin
</span><a href="Agda.Syntax.Internal.html#PatOAbsurd"><span class="hs-identifier hs-var">PatOAbsurd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitPatVar -&gt; SplitPattern) -&gt; SplitPatVar -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; [Literal] -&gt; SplitPatVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#SplitPatVar"><span class="hs-identifier hs-var">SplitPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
forall a. Underscore a =&gt; a
</span><a href="Agda.Syntax.Common.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1466"></span><span>          </span><span id="local-6989586621680773972"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621680773972"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621680773974"><span class="hs-identifier hs-var">absurdp</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' SplitPattern
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1467"></span><span>          </span><span id="local-6989586621680773971"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680773971"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621680773972"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680774052"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1468"></span><span>      </span><span class="annot"><span class="annottext">Either SplitClause Covering
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either SplitClause Covering
 -&gt; ExceptT SplitError TCM (Either SplitClause Covering))
-&gt; Either SplitClause Covering
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Either SplitClause Covering
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Either SplitClause Covering)
-&gt; SplitClause -&gt; Either SplitClause Covering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SClause :: Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span>
</span><span id="line-1469"></span><span>               </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1470"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773971"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-1471"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- not used</span><span>
</span><span id="line-1472"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: Map CheckpointId Substitution
</span><a href="Agda.TypeChecking.Coverage.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- not used</span><span>
</span><span id="line-1473"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1474"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span>    </span><span class="hs-comment">-- Andreas, 2018-10-17: If more than one constructor matches, we cannot erase.</span><span>
</span><span id="line-1477"></span><span>    </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773978"><span class="hs-identifier hs-var">runtime_splits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773984"><span class="hs-identifier hs-var">erased</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Bool
forall a. LensQuantity a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#usableQuantity"><span class="hs-identifier hs-var">usableQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1478"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM (Either SplitClause Covering)
</span><a href="#local-6989586621680773981"><span class="hs-identifier hs-var">erasedError</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1479"></span><span>
</span><span id="line-1480"></span><span>    </span><span class="hs-comment">-- If exactly one constructor matches and the K rule is turned</span><span>
</span><span id="line-1481"></span><span>    </span><span class="hs-comment">-- off, then we only allow erasure for non-indexed data types</span><span>
</span><span id="line-1482"></span><span>    </span><span class="hs-comment">-- (#4172).</span><span>
</span><span id="line-1483"></span><span>    </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773978"><span class="hs-identifier hs-var">runtime_splits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773984"><span class="hs-identifier hs-var">erased</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Bool
forall a. LensQuantity a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#usableQuantity"><span class="hs-identifier hs-var">usableQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1484"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773987"><span class="hs-identifier hs-var">withoutK</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773997"><span class="hs-identifier hs-var">isIndexed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1485"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM (Either SplitClause Covering)
</span><a href="#local-6989586621680773981"><span class="hs-identifier hs-var">erasedError</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span>    </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1488"></span><span>
</span><span id="line-1489"></span><span>      </span><span class="hs-comment">-- Andreas, 2012-10-10 fail if precomputed constructor set does not cover</span><span>
</span><span id="line-1490"></span><span>      </span><span class="hs-comment">-- all the data type constructors</span><span>
</span><span id="line-1491"></span><span>      </span><span class="hs-comment">-- Andreas, 2017-10-08 ... unless partial covering is explicitly allowed.</span><span>
</span><span id="line-1492"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773970"><span class="annot"><span class="annottext">ptags :: [SplitTag]
</span><a href="#local-6989586621680773970"><span class="hs-identifier hs-var hs-var">ptags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ConHead -&gt; SplitTag) -&gt; [ConHead] -&gt; [SplitTag]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; SplitTag) -&gt; (ConHead -&gt; QName) -&gt; ConHead -&gt; SplitTag
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var hs-var">conName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConHead]
</span><a href="#local-6989586621680774048"><span class="hs-identifier hs-var">pcons'</span></a></span><span> </span><span class="annot"><span class="annottext">[SplitTag] -&gt; [SplitTag] -&gt; [SplitTag]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Literal -&gt; SplitTag) -&gt; [Literal] -&gt; [SplitTag]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-var">SplitLit</span></a></span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621680774047"><span class="hs-identifier hs-var">plits</span></a></span><span>
</span><span id="line-1493"></span><span>      </span><span class="hs-comment">-- clauses for hcomp will be automatically generated.</span><span>
</span><span id="line-1494"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773969"><span class="annot"><span class="annottext">inferred_tags :: Set SplitTag
</span><a href="#local-6989586621680773969"><span class="hs-identifier hs-var hs-var">inferred_tags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set SplitTag
-&gt; (QName -&gt; Set SplitTag) -&gt; Maybe QName -&gt; Set SplitTag
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Set SplitTag
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag -&gt; Set SplitTag
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag -&gt; Set SplitTag)
-&gt; (QName -&gt; SplitTag) -&gt; QName -&gt; Set SplitTag
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621680773988"><span class="hs-identifier hs-var">mHCompName</span></a></span><span>
</span><span id="line-1495"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773966"><span class="annot"><span class="annottext">all_tags :: Set SplitTag
</span><a href="#local-6989586621680773966"><span class="hs-identifier hs-var hs-var">all_tags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SplitTag] -&gt; Set SplitTag
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[SplitTag]
</span><a href="#local-6989586621680773970"><span class="hs-identifier hs-var">ptags</span></a></span><span> </span><span class="annot"><span class="annottext">Set SplitTag -&gt; Set SplitTag -&gt; Set SplitTag
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.union`</span></span><span> </span><span class="annot"><span class="annottext">Set SplitTag
</span><a href="#local-6989586621680773969"><span class="hs-identifier hs-var">inferred_tags</span></a></span><span>
</span><span id="line-1496"></span><span>
</span><span id="line-1497"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621680774056"><span class="hs-identifier hs-var">allowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680774046"><span class="hs-identifier hs-var">overlap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1498"></span><span>        </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; ((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773991"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM ())
 -&gt; ExceptT SplitError TCM ())
-&gt; ((SplitTag, SplitClause) -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680773963"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773963"><span class="hs-identifier hs-var">tag</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773962"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773962"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1499"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773963"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTag -&gt; Set SplitTag -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.member`</span></span><span> </span><span class="annot"><span class="annottext">Set SplitTag
</span><a href="#local-6989586621680773966"><span class="hs-identifier hs-var">all_tags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1500"></span><span>            </span><span id="local-6989586621680773960"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773960"><span class="hs-identifier hs-var">isImpossibleClause</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; ExceptT SplitError TCM Bool
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; ExceptT SplitError TCM Bool)
-&gt; TCMT IO Bool -&gt; ExceptT SplitError TCM Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Bool
</span><a href="Agda.TypeChecking.Empty.html#isEmptyTel"><span class="hs-identifier hs-var">isEmptyTel</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; TCMT IO Bool) -&gt; Telescope -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.html#scTel"><span class="hs-identifier hs-var hs-var">scTel</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773962"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-1501"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680773960"><span class="hs-identifier hs-var">isImpossibleClause</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ())
-&gt; ExceptT SplitError TCM () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1502"></span><span>              </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError TCM ())
-&gt; TCMT IO () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1503"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;Missing case for&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTag -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621680773963"><span class="hs-identifier hs-var">tag</span></a></span><span>
</span><span id="line-1504"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773962"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-1505"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1506"></span><span>              </span><span class="annot"><span class="annottext">SplitError -&gt; ExceptT SplitError TCM ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#GenericSplitError"><span class="hs-identifier hs-var">GenericSplitError</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;precomputed set of constructors does not cover all cases&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>
</span><span id="line-1508"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError TCM ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError TCM ())
-&gt; TCMT IO () -&gt; ExceptT SplitError TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DataOrRecord -&gt; Type -&gt; Telescope -&gt; Maybe (Dom Type) -&gt; TCMT IO ()
forall (m :: * -&gt; *) a ty.
(MonadTCM m, PureTCM m, MonadError TCErr m, LensSort a,
 PrettyTCM a, LensSort ty, PrettyTCM ty) =&gt;
DataOrRecord -&gt; a -&gt; Telescope -&gt; Maybe ty -&gt; m ()
</span><a href="Agda.TypeChecking.Rules.LHS.html#checkSortOfSplitVar"><span class="hs-identifier hs-var">checkSortOfSplitVar</span></a></span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="#local-6989586621680773998"><span class="hs-identifier hs-var">dr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680774042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774040"><span class="hs-identifier hs-var">delta2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680774050"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1509"></span><span>      </span><span class="annot"><span class="annottext">Either SplitClause Covering
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either SplitClause Covering
 -&gt; ExceptT SplitError TCM (Either SplitClause Covering))
-&gt; Either SplitClause Covering
-&gt; ExceptT SplitError TCM (Either SplitClause Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Covering -&gt; Either SplitClause Covering
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; Either SplitClause Covering)
-&gt; Covering -&gt; Either SplitClause Covering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Nat -&gt; [(SplitTag, SplitClause)] -&gt; Covering
</span><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Nat -&gt; Arg Nat
</span><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-var">lookupPatternVar</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680774054"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621680773991"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1510"></span><span>
</span><span id="line-1511"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1512"></span><span>    </span><span id="local-6989586621680775065"><span id="local-6989586621680775066"><span class="annot"><a href="#local-6989586621680774029"><span class="hs-identifier hs-type">inContextOfT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680773958"><span class="hs-identifier hs-type">inContextOfDelta2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-type">MonadTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775066"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#MonadAddContext"><span class="hs-identifier hs-type">MonadAddContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775066"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#MonadDebug"><span class="hs-identifier hs-type">MonadDebug</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775066"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680775066"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775065"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680775066"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680775065"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1513"></span><span>    </span><span id="local-6989586621680774029"><span class="annot"><span class="annottext">inContextOfT :: tcm a -&gt; tcm a
</span><a href="#local-6989586621680774029"><span class="hs-identifier hs-var hs-var">inContextOfT</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; tcm a -&gt; tcm a
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm a -&gt; tcm a) -&gt; (tcm a -&gt; tcm a) -&gt; tcm a -&gt; tcm a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Empty -&gt; Nat -&gt; tcm a -&gt; tcm a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Empty -&gt; Nat -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#escapeContext"><span class="hs-identifier hs-var">escapeContext</span></a></span><span> </span><span class="annot"><span class="annottext">Empty
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1514"></span><span>    </span><span id="local-6989586621680773958"><span class="annot"><span class="annottext">inContextOfDelta2 :: tcm a -&gt; tcm a
</span><a href="#local-6989586621680773958"><span class="hs-identifier hs-var hs-var">inContextOfDelta2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; tcm a -&gt; tcm a
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680774053"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm a -&gt; tcm a) -&gt; (tcm a -&gt; tcm a) -&gt; tcm a -&gt; tcm a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Empty -&gt; Nat -&gt; tcm a -&gt; tcm a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Empty -&gt; Nat -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#escapeContext"><span class="hs-identifier hs-var">escapeContext</span></a></span><span> </span><span class="annot"><span class="annottext">Empty
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621680774049"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span>    </span><span class="hs-comment">-- Debug printing</span><span>
</span><span id="line-1517"></span><span>    </span><span id="local-6989586621680774044"><span class="annot"><span class="annottext">debugInit :: a -&gt; a -&gt; [NamedArg SplitPattern] -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680774044"><span class="hs-identifier hs-var hs-var">debugInit</span></a></span></span><span> </span><span id="local-6989586621680773956"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773956"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680773955"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773955"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680773954"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773954"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680773953"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773953"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; TCMT IO ()
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1518"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1519"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;TypeChecking.Coverage.split': split&quot;</span></span><span>
</span><span id="line-1520"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1521"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;tel     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773956"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1522"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;x       =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773955"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1523"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773956"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; TCM Doc)
-&gt; [NamedArg DeBruijnPattern] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773954"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1524"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773953"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1525"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1526"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1527"></span><span>      </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1528"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;TypeChecking.Coverage.split': split&quot;</span></span><span>
</span><span id="line-1529"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1530"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;tel     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773956"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1531"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;x       =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773955"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1532"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc)
-&gt; ([NamedArg SplitPattern] -&gt; VerboseKey)
-&gt; [NamedArg SplitPattern]
-&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773954"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1533"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;cps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; (a -&gt; VerboseKey) -&gt; a -&gt; TCM Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; VerboseKey
forall a. Show a =&gt; a -&gt; VerboseKey
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773953"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1534"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1535"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1536"></span><span>
</span><span id="line-1537"></span><span>    </span><span id="local-6989586621680773952"><span class="annot"><span class="annottext">debugHoleAndType :: a -&gt; a -&gt; VerboseKey -&gt; [NamedArg DeBruijnPattern] -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621680773952"><span class="hs-identifier hs-var hs-var">debugHoleAndType</span></a></span></span><span> </span><span id="local-6989586621680773951"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773951"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621680773950"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773950"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621680773949"><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680773949"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680773948"><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680773948"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680773947"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773947"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1538"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([TCM Doc] -&gt; TCM Doc) -&gt; [TCM Doc] -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1539"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;p      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey
</span><a href="Agda.Syntax.Internal.html#patVarNameToString"><span class="hs-identifier hs-var">patVarNameToString</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><a href="#local-6989586621680773949"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; TCM Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
[NamedArg DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern]
</span><a href="#local-6989586621680773948"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1541"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;delta1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773951"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-1542"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;delta2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621680773958"><span class="hs-identifier hs-var">inContextOfDelta2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773950"><span class="hs-identifier hs-var">delta2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1543"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;t      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621680774029"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680773947"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1545"></span><span>
</span><span id="line-1546"></span><span>
</span><span id="line-1547"></span><span class="hs-comment">-- | splitResult for MakeCase, tries to introduce IApply or ProjP copatterns</span><span>
</span><span id="line-1548"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResult"><span class="hs-identifier hs-type">splitResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1549"></span><span id="splitResult"><span class="annot"><span class="annottext">splitResult :: QName -&gt; SplitClause -&gt; TCM (Either SplitError [SplitClause])
</span><a href="Agda.TypeChecking.Coverage.html#splitResult"><span class="hs-identifier hs-var hs-var">splitResult</span></a></span></span><span> </span><span id="local-6989586621680773945"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773945"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680773944"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773944"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1550"></span><span>  </span><span class="annot"><span class="annottext">TCMT IO (Maybe SplitClause)
-&gt; TCM (Either SplitError [SplitClause])
-&gt; (SplitClause -&gt; TCM (Either SplitError [SplitClause]))
-&gt; TCM (Either SplitError [SplitClause])
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-var">splitResultPath</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773945"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773944"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>             </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either SplitError Covering -&gt; Either SplitError [SplitClause])
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCM (Either SplitError [SplitClause])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Either SplitError Covering -&gt; Either SplitError [SplitClause])
 -&gt; TCMT IO (Either SplitError Covering)
 -&gt; TCM (Either SplitError [SplitClause]))
-&gt; ((Covering -&gt; [SplitClause])
    -&gt; Either SplitError Covering -&gt; Either SplitError [SplitClause])
-&gt; (Covering -&gt; [SplitClause])
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCM (Either SplitError [SplitClause])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; [SplitClause])
-&gt; Either SplitError Covering -&gt; Either SplitError [SplitClause]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Covering -&gt; [SplitClause]
</span><a href="Agda.TypeChecking.Coverage.html#splitClauses"><span class="hs-identifier hs-var">splitClauses</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Either SplitError Covering)
 -&gt; TCM (Either SplitError [SplitClause]))
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCM (Either SplitError [SplitClause])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-var">splitResultRecord</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773945"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773944"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1552"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either SplitError [SplitClause]
-&gt; TCM (Either SplitError [SplitClause])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either SplitError [SplitClause]
 -&gt; TCM (Either SplitError [SplitClause]))
-&gt; (SplitClause -&gt; Either SplitError [SplitClause])
-&gt; SplitClause
-&gt; TCM (Either SplitError [SplitClause])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[SplitClause] -&gt; Either SplitError [SplitClause]
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">([SplitClause] -&gt; Either SplitError [SplitClause])
-&gt; (SplitClause -&gt; [SplitClause])
-&gt; SplitClause
-&gt; Either SplitError [SplitClause]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; [SplitClause] -&gt; [SplitClause]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span>
</span><span id="line-1555"></span><span class="hs-comment">-- | Tries to split the result to introduce an IApply pattern.</span><span>
</span><span id="line-1556"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-type">splitResultPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span id="splitResultPath"><span class="annot"><span class="annottext">splitResultPath :: QName -&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-var hs-var">splitResultPath</span></a></span></span><span> </span><span id="local-6989586621680773943"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773943"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680773942"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680773942"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680773941"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773941"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680773940"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773940"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680773939"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773939"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1558"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Dom Type)
-&gt; TCMT IO (Maybe SplitClause)
-&gt; (Dom Type -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773939"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe SplitClause -&gt; TCMT IO (Maybe SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SplitClause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCMT IO (Maybe SplitClause))
 -&gt; TCMT IO (Maybe SplitClause))
-&gt; (Dom Type -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680773938"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773938"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1559"></span><span>        </span><span class="annot"><span class="annottext">TCMT IO (Maybe (Dom Type, Abs Type))
-&gt; TCMT IO (Maybe SplitClause)
-&gt; ((Dom Type, Abs Type) -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; TCMT IO (Maybe (Dom Type, Abs Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; m (Maybe (Dom Type, Abs Type))
</span><a href="Agda.TypeChecking.Telescope.html#isPath"><span class="hs-identifier hs-var">isPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773938"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe SplitClause -&gt; TCMT IO (Maybe SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SplitClause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Dom Type, Abs Type) -&gt; TCMT IO (Maybe SplitClause))
 -&gt; TCMT IO (Maybe SplitClause))
-&gt; ((Dom Type, Abs Type) -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">(Dom Type, Abs Type)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1560"></span><span>               </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621680773936"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773936"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680773935"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680773935"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773934"><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680773934"><span class="hs-identifier hs-var">boundary</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; TCM (TelV Type, [(Term, (Term, Term))])
forall (m :: * -&gt; *).
PureTCM m =&gt;
Nat -&gt; Type -&gt; m (TelV Type, [(Term, (Term, Term))])
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpToPathBoundary%27"><span class="hs-identifier hs-var">telViewUpToPathBoundary'</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773938"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1561"></span><span>               </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773933"><span class="annot"><span class="annottext">tel' :: Telescope
</span><a href="#local-6989586621680773933"><span class="hs-identifier hs-var hs-var">tel'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773941"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773936"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1562"></span><span>                   </span><span id="local-6989586621680773932"><span class="annot"><span class="annottext">rho :: Substitution' a
</span><a href="#local-6989586621680773932"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' a
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1563"></span><span>                   </span><span id="local-6989586621680773931"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621680773931"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
forall a. Substitution' a
</span><a href="#local-6989586621680773932"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var hs-var">scPats</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773942"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [(Term, (Term, Term))] -&gt; [NamedArg SplitPattern]
forall a.
DeBruijn a =&gt;
Telescope -&gt; [(Term, (Term, Term))] -&gt; [NamedArg (Pattern' a)]
</span><a href="Agda.TypeChecking.Telescope.html#telePatterns"><span class="hs-identifier hs-var">telePatterns</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773936"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[(Term, (Term, Term))]
</span><a href="#local-6989586621680773934"><span class="hs-identifier hs-var">boundary</span></a></span><span>
</span><span id="line-1564"></span><span>                   </span><span id="local-6989586621680773929"><span class="annot"><span class="annottext">cps' :: Map CheckpointId Substitution
</span><a href="#local-6989586621680773929"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Map CheckpointId Substitution))
-&gt; Map CheckpointId Substitution -&gt; Map CheckpointId Substitution
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Map CheckpointId Substitution))
forall a. Substitution' a
</span><a href="#local-6989586621680773932"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Map CheckpointId Substitution
</span><a href="Agda.TypeChecking.Coverage.html#scCheckpoints"><span class="hs-identifier hs-var hs-var">scCheckpoints</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773942"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1565"></span><span>                   </span><span id="local-6989586621680773928"><span class="annot"><span class="annottext">target' :: Maybe (Dom Type)
</span><a href="#local-6989586621680773928"><span class="hs-identifier hs-var hs-var">target'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680773935"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773938"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1566"></span><span>               </span><span class="annot"><span class="annottext">Maybe SplitClause -&gt; TCMT IO (Maybe SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe SplitClause -&gt; TCMT IO (Maybe SplitClause))
-&gt; (SplitClause -&gt; Maybe SplitClause)
-&gt; SplitClause
-&gt; TCMT IO (Maybe SplitClause)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Maybe SplitClause
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCMT IO (Maybe SplitClause))
-&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId Substitution
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773933"><span class="hs-identifier hs-var">tel'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773931"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680773929"><span class="hs-identifier hs-var">cps'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773928"><span class="hs-identifier hs-var">target'</span></a></span><span>
</span><span id="line-1567"></span><span>
</span><span id="line-1568"></span><span class="hs-comment">-- | @splitResultRecord f sc = return res@</span><span>
</span><span id="line-1569"></span><span class="hs-comment">--</span><span>
</span><span id="line-1570"></span><span class="hs-comment">--   If the target type of @sc@ is a record type, a covering set of</span><span>
</span><span id="line-1571"></span><span class="hs-comment">--   split clauses is returned (@sc@ extended by all valid projection patterns),</span><span>
</span><span id="line-1572"></span><span class="hs-comment">--   otherwise @res == Left _@.</span><span>
</span><span id="line-1573"></span><span class="hs-comment">--   Note that the empty set of split clauses is returned if the record has no fields.</span><span>
</span><span id="line-1574"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-type">splitResultRecord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1575"></span><span id="splitResultRecord"><span class="annot"><span class="annottext">splitResultRecord :: QName -&gt; SplitClause -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-var hs-var">splitResultRecord</span></a></span></span><span> </span><span id="local-6989586621680773927"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773927"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680773926"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621680773926"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680773925"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773925"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680773924"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773924"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680773923"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773923"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1576"></span><span>  </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.split&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1577"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;splitting result:&quot;</span></span><span>
</span><span id="line-1578"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;f      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773927"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1579"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;target =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773925"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCM Doc -&gt; (Dom Type -&gt; TCM Doc) -&gt; Maybe (Dom Type) -&gt; TCM Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773923"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1580"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1581"></span><span>  </span><span class="hs-comment">-- if we want to split projections, but have no target type, we give up</span><span>
</span><span id="line-1582"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773922"><span class="annot"><span class="annottext">failure :: a -&gt; TCMT IO (Either a b)
</span><a href="#local-6989586621680773922"><span class="hs-identifier hs-var hs-var">failure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either a b -&gt; TCMT IO (Either a b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either a b -&gt; TCMT IO (Either a b))
-&gt; (a -&gt; Either a b) -&gt; a -&gt; TCMT IO (Either a b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span>
</span><span id="line-1583"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Dom Type)
-&gt; TCMT IO (Either SplitError Covering)
-&gt; (Dom Type -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773923"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitError -&gt; TCMT IO (Either SplitError Covering)
forall a b. a -&gt; TCMT IO (Either a b)
</span><a href="#local-6989586621680773922"><span class="hs-identifier hs-var">failure</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CosplitNoTarget"><span class="hs-identifier hs-var">CosplitNoTarget</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCMT IO (Either SplitError Covering))
 -&gt; TCMT IO (Either SplitError Covering))
-&gt; (Dom Type -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680773920"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773920"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1584"></span><span>    </span><span id="local-6989586621680773919"><span class="annot"><span class="annottext">Maybe (QName, Args, Defn)
</span><a href="#local-6989586621680773919"><span class="hs-identifier hs-var">isR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; TCMT IO (Maybe (QName, Args, Defn))
-&gt; TCMT IO (Maybe (QName, Args, Defn))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773925"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Maybe (QName, Args, Defn))
 -&gt; TCMT IO (Maybe (QName, Args, Defn)))
-&gt; TCMT IO (Maybe (QName, Args, Defn))
-&gt; TCMT IO (Maybe (QName, Args, Defn))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO (Maybe (QName, Args, Defn))
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; m (Maybe (QName, Args, Defn))
</span><a href="Agda.TypeChecking.Records.html#isRecordType"><span class="hs-identifier hs-var">isRecordType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO (Maybe (QName, Args, Defn)))
-&gt; Type -&gt; TCMT IO (Maybe (QName, Args, Defn))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773920"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1585"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Args, Defn)
</span><a href="#local-6989586621680773919"><span class="hs-identifier hs-var">isR</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1586"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680773917"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773917"><span class="hs-identifier hs-var">_r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773916"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680773916"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recFields :: Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">recFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680773914"><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621680773914"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1587"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1588"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;we are of record type _r = &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773917"><span class="hs-identifier hs-var">_r</span></a></span><span>
</span><span id="line-1589"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>   </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;applied to parameters vs =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773925"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680773916"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1590"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(VerboseKey -&gt; TCM Doc) -&gt; VerboseKey -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;and have fields       fs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; VerboseKey -&gt; VerboseKey
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Dom QName] -&gt; VerboseKey
forall a. Pretty a =&gt; a -&gt; VerboseKey
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621680773914"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-1591"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1592"></span><span>        </span><span class="hs-comment">-- Andreas, 2018-06-09, issue #2170, we always have irrelevant projections</span><span>
</span><span id="line-1593"></span><span>        </span><span class="hs-comment">-- available on the lhs.</span><span>
</span><span id="line-1594"></span><span>        </span><span class="hs-comment">-- -- Andreas, 2018-03-19, issue #2971, check that we have a &quot;strong&quot; record type,</span><span>
</span><span id="line-1595"></span><span>        </span><span class="hs-comment">-- -- i.e., with all the projections.  Otherwise, we may not split.</span><span>
</span><span id="line-1596"></span><span>        </span><span class="hs-comment">-- ifNotM (strongRecord fs) (failure CosplitIrrelevantProjections) $ {-else-} do</span><span>
</span><span id="line-1597"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773913"><span class="annot"><span class="annottext">es :: Elims
</span><a href="#local-6989586621680773913"><span class="hs-identifier hs-var hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Elims
</span><a href="Agda.Syntax.Internal.Pattern.html#patternsToElims"><span class="hs-identifier hs-var">patternsToElims</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; Elims)
-&gt; [NamedArg DeBruijnPattern] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773924"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1598"></span><span>        </span><span class="hs-comment">-- Note: module parameters are part of ps</span><span>
</span><span id="line-1599"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773912"><span class="annot"><span class="annottext">self :: Arg Term
</span><a href="#local-6989586621680773912"><span class="hs-identifier hs-var hs-var">self</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621680773927"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621680773913"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-1600"></span><span>            </span><span id="local-6989586621680773911"><span class="annot"><span class="annottext">pargs :: Args
</span><a href="#local-6989586621680773911"><span class="hs-identifier hs-var hs-var">pargs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680773916"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680773912"><span class="hs-identifier hs-var">self</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1601"></span><span>            </span><span id="local-6989586621680773910"><span class="annot"><span class="annottext">fieldValues :: [Term]
</span><a href="#local-6989586621680773910"><span class="hs-identifier hs-var hs-var">fieldValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Dom QName] -&gt; (Dom QName -&gt; Term) -&gt; [Term]
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621680773914"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom QName -&gt; Term) -&gt; [Term]) -&gt; (Dom QName -&gt; Term) -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680773909"><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773909"><span class="hs-identifier hs-var">proj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680773912"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Elim' Term
forall a. ProjOrigin -&gt; QName -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773909"><span class="hs-identifier hs-var">proj</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1602"></span><span>        </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Doc -&gt; TCM Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773925"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1603"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>   </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;we are              self =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621680773912"><span class="hs-identifier hs-var">self</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1604"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerboseKey -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; VerboseKey -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>   </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;            field values =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621680773910"><span class="hs-identifier hs-var">fieldValues</span></a></span><span>
</span><span id="line-1605"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1606"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680773906"><span class="annot"><span class="annottext">n :: Arg Nat
</span><a href="#local-6989586621680773906"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Arg Nat
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; Arg Nat) -&gt; Nat -&gt; Arg Nat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Nat
</span><a href="Agda.Utils.Permutation.html#permRange"><span class="hs-identifier hs-var hs-var">permRange</span></a></span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Nat) -&gt; Permutation -&gt; Nat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Maybe Permutation -&gt; Permutation
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Permutation
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Permutation -&gt; Permutation)
-&gt; Maybe Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg DeBruijnPattern] -&gt; Maybe Permutation
</span><a href="Agda.Syntax.Internal.Pattern.html#dbPatPerm"><span class="hs-identifier hs-var">dbPatPerm</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg DeBruijnPattern] -&gt; Maybe Permutation)
-&gt; [NamedArg DeBruijnPattern] -&gt; Maybe Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; [NamedArg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Coverage.Match.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773924"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1607"></span><span>            </span><span class="hs-comment">-- Andreas &amp; James, 2013-11-19 includes the dot patterns!</span><span>
</span><span id="line-1608"></span><span>            </span><span class="hs-comment">-- See test/succeed/CopatternsAndDotPatterns.agda for a case with dot patterns</span><span>
</span><span id="line-1609"></span><span>            </span><span class="hs-comment">-- and copatterns which fails for @n = size tel@ with a broken case tree.</span><span>
</span><span id="line-1610"></span><span>
</span><span id="line-1611"></span><span>        </span><span class="hs-comment">-- Andreas, 2016-07-22 read the style of projections from the user's lips</span><span>
</span><span id="line-1612"></span><span>        </span><span id="local-6989586621680773904"><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621680773904"><span class="hs-identifier hs-var">projOrigin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool
-&gt; TCMT IO ProjOrigin -&gt; TCMT IO ProjOrigin -&gt; TCMT IO ProjOrigin
forall (m :: * -&gt; *) a. Monad m =&gt; m Bool -&gt; m a -&gt; m a -&gt; m a
</span><a href="Agda.Utils.Monad.html#ifM"><span class="hs-identifier hs-var">ifM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PragmaOptions -&gt; Bool
</span><a href="Agda.Interaction.Options.Base.html#optPostfixProjections"><span class="hs-identifier hs-var hs-var">optPostfixProjections</span></a></span><span> </span><span class="annot"><span class="annottext">(PragmaOptions -&gt; Bool) -&gt; TCMT IO PragmaOptions -&gt; TCMT IO Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO PragmaOptions
forall (m :: * -&gt; *). HasOptions m =&gt; m PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-var">pragmaOptions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProjOrigin -&gt; TCMT IO ProjOrigin
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjPostfix"><span class="hs-identifier hs-var">ProjPostfix</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProjOrigin -&gt; TCMT IO ProjOrigin
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjPrefix"><span class="hs-identifier hs-var">ProjPrefix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1613"></span><span>        </span><span class="annot"><span class="annottext">Covering -&gt; Either SplitError Covering
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; Either SplitError Covering)
-&gt; ([(SplitTag, SplitClause)] -&gt; Covering)
-&gt; [(SplitTag, SplitClause)]
-&gt; Either SplitError Covering
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Nat -&gt; [(SplitTag, SplitClause)] -&gt; Covering
</span><a href="Agda.TypeChecking.Coverage.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Nat
</span><a href="#local-6989586621680773906"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">([(SplitTag, SplitClause)] -&gt; Either SplitError Covering)
-&gt; TCMT IO [(SplitTag, SplitClause)]
-&gt; TCMT IO (Either SplitError Covering)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1614"></span><span>          </span><span class="annot"><span class="annottext">[(Dom QName, [Term])]
-&gt; ((Dom QName, [Term]) -&gt; TCMT IO (SplitTag, SplitClause))
-&gt; TCMT IO [(SplitTag, SplitClause)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Dom QName] -&gt; [[Term]] -&gt; [(Dom QName, [Term])]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621680773914"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">([[Term]] -&gt; [(Dom QName, [Term])])
-&gt; [[Term]] -&gt; [(Dom QName, [Term])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; [[Term]]
forall a. [a] -&gt; [[a]]
</span><span class="hs-identifier hs-var">List.inits</span></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621680773910"><span class="hs-identifier hs-var">fieldValues</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Dom QName, [Term]) -&gt; TCMT IO (SplitTag, SplitClause))
 -&gt; TCMT IO [(SplitTag, SplitClause)])
-&gt; ((Dom QName, [Term]) -&gt; TCMT IO (SplitTag, SplitClause))
-&gt; TCMT IO [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680773899"><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773899"><span class="hs-identifier hs-var">proj</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680773898"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621680773898"><span class="hs-identifier hs-var">prevFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1615"></span><span>            </span><span class="hs-comment">-- compute the new target</span><span>
</span><span id="line-1616"></span><span>            </span><span id="local-6989586621680773897"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680773897"><span class="hs-identifier hs-var">dType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; TCMT IO Definition -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; TCMT IO Definition) -&gt; QName -&gt; TCMT IO Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773899"><span class="hs-identifier hs-var">proj</span></a></span><span> </span><span class="hs-comment">-- WRONG: typeOfConst $ unArg proj</span><span>
</span><span id="line-1617"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- Substitution for parameters and previous fields. Needs to be applied to potential</span><span>
</span><span id="line-1618"></span><span>                </span><span class="hs-comment">-- tactic in proj.</span><span>
</span><span id="line-1619"></span><span>                </span><span id="local-6989586621680773896"><span class="annot"><span class="annottext">fieldSub :: Substitution
</span><a href="#local-6989586621680773896"><span class="hs-identifier hs-var hs-var">fieldSub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; [Term]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; Args -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680773916"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; [Term] -&gt; [Term]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621680773898"><span class="hs-identifier hs-var">prevFields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; Substitution -&gt; Substitution
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-var">++#</span></a></span><span> </span><span class="annot"><span class="annottext">Empty -&gt; Substitution
forall a. Empty -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Empty
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-1620"></span><span>                </span><span id="local-6989586621680773893"><span class="annot"><span class="annottext">proj' :: Dom QName
</span><a href="#local-6989586621680773893"><span class="hs-identifier hs-var hs-var">proj'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Dom QName)) -&gt; Dom QName -&gt; Dom QName
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
Substitution' (SubstArg (Dom QName))
</span><a href="#local-6989586621680773896"><span class="hs-identifier hs-var">fieldSub</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773899"><span class="hs-identifier hs-var">proj</span></a></span><span>
</span><span id="line-1621"></span><span>                </span><span class="hs-comment">-- type of projection instantiated at self</span><span>
</span><span id="line-1622"></span><span>                </span><span id="local-6989586621680773892"><span class="annot"><span class="annottext">target' :: Maybe (Dom Type)
</span><a href="#local-6989586621680773892"><span class="hs-identifier hs-var hs-var">target'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773893"><span class="hs-identifier hs-var">proj'</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Type -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680773897"><span class="hs-identifier hs-var">dType</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621680773911"><span class="hs-identifier hs-var">pargs</span></a></span><span>      </span><span class="hs-comment">-- Always visible (#2287)</span><span>
</span><span id="line-1623"></span><span>                </span><span id="local-6989586621680773891"><span class="annot"><span class="annottext">projArg :: NamedArg SplitPattern
</span><a href="#local-6989586621680773891"><span class="hs-identifier hs-var hs-var">projArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; Named NamedName SplitPattern)
-&gt; Arg QName -&gt; NamedArg SplitPattern
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NamedName -&gt; SplitPattern -&gt; Named NamedName SplitPattern
forall name a. Maybe name -&gt; a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NamedName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; Named NamedName SplitPattern)
-&gt; (QName -&gt; SplitPattern) -&gt; QName -&gt; Named NamedName SplitPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; SplitPattern
forall x. ProjOrigin -&gt; QName -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-var">ProjP</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621680773904"><span class="hs-identifier hs-var">projOrigin</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Arg QName -&gt; NamedArg SplitPattern)
-&gt; Arg QName -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Arg QName
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; Arg QName) -&gt; Dom QName -&gt; Arg QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Dom QName -&gt; Dom QName
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773899"><span class="hs-identifier hs-var">proj</span></a></span><span>
</span><span id="line-1624"></span><span>                </span><span id="local-6989586621680773889"><span class="annot"><span class="annottext">sc' :: SplitClause
</span><a href="#local-6989586621680773889"><span class="hs-identifier hs-var hs-var">sc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773926"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scPats :: [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.html#scPats"><span class="hs-identifier hs-var hs-var">scPats</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773926"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621680773891"><span class="hs-identifier hs-var">projArg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1625"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-1626"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773892"><span class="hs-identifier hs-var">target'</span></a></span><span>
</span><span id="line-1627"></span><span>                         </span><span class="hs-special">}</span><span>
</span><span id="line-1628"></span><span>            </span><span class="annot"><span class="annottext">VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
VerboseKey -&gt; Nat -&gt; TCM Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseKey
</span><span class="hs-string">&quot;tc.cover.copattern&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCMT IO ()) -&gt; TCM Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCM Doc] -&gt; TCM Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1629"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCM Doc
</span><span class="hs-string">&quot;fieldSub for&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCM Doc -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773899"><span class="hs-identifier hs-var">proj</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1630"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCM Doc -&gt; TCM Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCM Doc -&gt; TCM Doc) -&gt; TCM Doc -&gt; TCM Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; TCM Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621680773896"><span class="hs-identifier hs-var">fieldSub</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1631"></span><span>            </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, SplitClause)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621680773899"><span class="hs-identifier hs-var">proj</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621680773889"><span class="hs-identifier hs-var">sc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1632"></span><span>      </span><span class="annot"><span class="annottext">Maybe (QName, Args, Defn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCMT IO (Either SplitError Covering)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773925"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Either SplitError Covering)
 -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCMT IO (Either SplitError Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1633"></span><span>        </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773920"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type)
-&gt; (Closure Type -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCMT IO (Either SplitError Covering)
forall a b. a -&gt; TCMT IO (Either a b)
</span><a href="#local-6989586621680773922"><span class="hs-identifier hs-var">failure</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitError -&gt; TCMT IO (Either SplitError Covering))
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; TCMT IO (Either SplitError Covering)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CosplitNoRecordType"><span class="hs-identifier hs-var">CosplitNoRecordType</span></a></span><span>
</span><span id="line-1634"></span><span>  </span><span class="hs-comment">-- Andreas, 2018-06-09, issue #2170: splitting with irrelevant fields is always fine!</span><span>
</span><span id="line-1635"></span><span>  </span><span class="hs-comment">-- where</span><span>
</span><span id="line-1636"></span><span>  </span><span class="hs-comment">-- -- A record type is strong if it has all the projections.</span><span>
</span><span id="line-1637"></span><span>  </span><span class="hs-comment">-- -- This is the case if --irrelevant-projections or no field is irrelevant.</span><span>
</span><span id="line-1638"></span><span>  </span><span class="hs-comment">-- -- TODO: what about shape irrelevance?</span><span>
</span><span id="line-1639"></span><span>  </span><span class="hs-comment">-- strongRecord :: [Arg QName] -&gt; TCM Bool</span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-comment">-- strongRecord fs = (optIrrelevantProjections &lt;$&gt; pragmaOptions) `or2M`</span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-comment">--   (return $ not $ any isIrrelevant fs)</span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span>
</span><span id="line-1644"></span><span class="hs-comment">-- * Boring instances</span><span>
</span><span id="line-1645"></span><span>
</span><span id="line-1646"></span><span class="hs-comment">-- | For debugging only.</span><span>
</span><span id="line-1647"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#PrettyTCM"><span class="hs-identifier hs-type">PrettyTCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1648"></span><span>  </span><span id="local-6989586621680773885"><span class="annot"><span class="annottext">prettyTCM :: SplitClause -&gt; m Doc
</span><a href="#local-6989586621680773885"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyTCM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621680773884"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773884"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621680773883"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773883"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621680773882"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680773882"><span class="hs-identifier hs-var">sigma</span></a></span></span><span> </span><span id="local-6989586621680773881"><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680773881"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621680773880"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773880"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1649"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;SplitClause&quot;</span></span><span>
</span><span id="line-1650"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(m Doc -&gt; m Doc) -&gt; m Doc -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1651"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;tel          =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773884"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1652"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;pats         =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; m Doc)
-&gt; [NamedArg SplitPattern] -&gt; [m Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitPattern -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; m Doc)
-&gt; (NamedArg SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern
-&gt; m Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621680773883"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1653"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;subst        =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621680773882"><span class="hs-identifier hs-var">sigma</span></a></span><span>
</span><span id="line-1654"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;checkpoints  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId Substitution
</span><a href="#local-6989586621680773881"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1655"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;target       =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1656"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; m Doc -&gt; (Dom Type -&gt; m Doc) -&gt; m Doc
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621680773880"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">m Doc
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; m Doc) -&gt; m Doc) -&gt; (Dom Type -&gt; m Doc) -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680773879"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773879"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1657"></span><span>            </span><span class="annot"><span class="annottext">Telescope -&gt; m Doc -&gt; m Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621680773884"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(m Doc -&gt; m Doc) -&gt; m Doc -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621680773879"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1658"></span><span>      </span><span class="hs-comment">-- Triggers crash (see Issue 1374).</span><span>
</span><span id="line-1659"></span><span>      </span><span class="hs-comment">-- , &quot;subst target = &quot; &lt;+&gt; do</span><span>
</span><span id="line-1660"></span><span>      </span><span class="hs-comment">--     caseMaybe target empty $ \ t -&gt; do</span><span>
</span><span id="line-1661"></span><span>      </span><span class="hs-comment">--       addContext tel $ prettyTCM $ applySubst sigma t</span><span>
</span><span id="line-1662"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1663"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1664"></span></pre></body></html>